!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/static/dist/",n(n.s=22)}([function(e,t){e.exports=React},function(e,t){e.exports=moment},function(e,t,n){e.exports=n(43)()},function(e,t){e.exports=jQuery},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=function(e){function t(t){var n=e.call(this,t)||this;return n.state=n.getState(t),n}return r(t,e),t.prototype.componentWillReceiveProps=function(e){this.setState(this.getState(e))},t.prototype.getState=function(e){var t=this,n={tokens:[],pendingToken:"",autoCompleteTokens:[],selectedTokenIndex:-1};return e.initialValues&&e.initialValues.forEach(function(e){t.props.tokenLimit&&n.tokens.length>=t.props.tokenLimit||n.tokens.push(e)}),n},t.prototype.updateAutoComplete=function(e){var t=this;if(e=e.toLowerCase(),!this.props.possibleTokens||0==e.length)return[];var n=[];return this.props.possibleTokens.forEach(function(r){var a=r.label.toLowerCase().indexOf(e);a>=0&&(t.tokenAlreadyAdded(r)||n.push([a,r]))}),n.sort(function(e,t){var n=e[0],r=e[1],a=t[0],i=t[1];return n!=a?n-a:r.label<i.label?-1:r.label==i.label?0:1}),(n=n.slice(0,5)).map(function(e){return e[1]})},t.prototype.updatePendingToken=function(e){var t=e.target.value.trim(),n=this.updateAutoComplete(e.target.value),r=this.state.selectedTokenIndex;null==this.state.selectedTokenIndex?r=-1:this.state.selectedTokenIndex>=this.state.autoCompleteTokens.length&&(r=this.state.autoCompleteTokens.length-1),this.setState({pendingToken:t,autoCompleteTokens:n,selectedTokenIndex:r})},t.prototype.tokenAlreadyAdded=function(e){var t=!1;return this.state.tokens.forEach(function(n){e.value==n.value&&(t=!0)}),t},t.prototype.appendToken=function(e){var t=this.state.tokens.concat([{label:e.label,subtext:e.subtext,value:e.value}]);this.setState({tokens:t,pendingToken:"",autoCompleteTokens:[],selectedTokenIndex:-1}),this.props.onChange(t)},t.prototype.onClick=function(e,t){t.preventDefault(),this.appendToken(e)},t.prototype.onKeyPress=function(e){if("Enter"==e.key){if(this.props.tokenLimit&&this.state.tokens.length>=this.props.tokenLimit)return;if(this.state.selectedTokenIndex>=0)return void this.appendToken(this.state.autoCompleteTokens[this.state.selectedTokenIndex]);var t=this.state.pendingToken,n=!1,r={label:t,value:t};this.props.possibleTokens?this.props.possibleTokens.forEach(function(e){e.label.toLowerCase()==t.toLowerCase()&&(n=!0,r=e)}):n=!0,n&&!this.tokenAlreadyAdded(r)&&this.appendToken(r)}},t.prototype.onKeyDown=function(e){if("ArrowDown"==e.key){if(!this.state.autoCompleteTokens.length)return;this.setState({selectedTokenIndex:Math.min(this.state.selectedTokenIndex+1,this.state.autoCompleteTokens.length-1)})}else if("ArrowUp"==e.key){if(!this.state.autoCompleteTokens.length)return;this.setState({selectedTokenIndex:Math.max(this.state.selectedTokenIndex-1,0)})}},t.prototype.removeToken=function(e){var t=this.state.tokens.filter(function(t){return e.label!=t.label});this.setState({tokens:t}),this.props.onChange(t)},t.prototype.renderToken=function(e,t){return a.createElement("div",{className:"card rendered-token",key:t},e.label,a.createElement("div",{className:"remove-token",onClick:this.removeToken.bind(this,e)},"x"))},t.prototype.renderTokens=function(){if(this.state.tokens.length)return a.createElement("div",{className:"tokens-container"},this.state.tokens.map(this.renderToken.bind(this)))},t.prototype.shouldHidePendingToken=function(){return this.props.tokenLimit&&this.state.tokens.length>=this.props.tokenLimit},t.prototype.renderPendingToken=function(){if(!this.shouldHidePendingToken())return a.createElement("div",{className:"pending-token-container"},a.createElement("input",{type:"text",value:this.state.pendingToken,onChange:this.updatePendingToken.bind(this),onKeyPress:this.onKeyPress.bind(this),onKeyDown:this.onKeyDown.bind(this)}))},t.prototype.renderTokenSubtext=function(e){if(e.subtext)return a.createElement("div",{className:"token-subtext"},e.subtext)},t.prototype.renderAutoComplete=function(){var e=this;if(!this.shouldHidePendingToken()&&this.state.autoCompleteTokens.length)return a.createElement("div",{className:"autocomplete-token-container"},this.state.autoCompleteTokens.map(function(t,n){var r="autocomplete-token";return n==e.state.selectedTokenIndex&&(r+=" -selected"),a.createElement("div",{className:r,key:t.value,onClick:e.onClick.bind(e,t)},t.label,e.renderTokenSubtext(t))}))},t.prototype.render=function(){return a.createElement("div",{className:"tokenizer-container"},this.renderTokens(),a.createElement("div",{className:"pending-state-container"},this.renderPendingToken(),this.renderAutoComplete()))},t}(a.Component);t.TokenizerComponent=i},function(e,t,n){"use strict";var r=n(0),a=n(45);if(void 0===r)throw Error("create-react-class could not find the React object. If you are using script tags, make sure that React is being loaded before create-react-class.");var i=(new r.Component).updater;e.exports=a(r.Component,r.isValidElement,i)},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(3),i=n(0),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.componentDidMount=function(){var e=this,t=document.getElementsByClassName("modal");if(t.length>0){var n=t[0].getElementsByTagName("input");n.length>0&&n[0].focus()}a(document).bind("keyup.modalComponent",function(t){27==t.which&&e.props.cancelFunc()})},t.prototype.componentWillUnmount=function(){a(document).unbind("keyup.modalComponent")},t.prototype.renderCancelButton=function(){return i.createElement("div",{className:"cancel-button-container",onClick:this.props.cancelFunc},"x")},t.prototype.render=function(){return i.createElement("div",{className:"modal-container"},i.createElement("div",{className:"background"},i.createElement("div",{className:"modal card"},this.renderCancelButton(),this.props.children)))},t}(i.Component);t.ModalComponent=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debounce=function(e,t){var n=null;return function(){var r=arguments,a=!n;n||(n=setTimeout(function(){n=null},t)),a&&e.apply(this,r)}},t.renderDuration=function(e,t,n){var r="",a=function(t,n,a){if(!(e<n)){r.length&&(r+=", ");var i=Math.floor(e/n);r+=i+" "+t,1!=i&&a&&(r+="s"),e-=i*n}};return n?(a(t?"w":"week",604800,!t),a(t?"d":"day",86400,!t)):(a(t?"hr":"hour",3600,!0),a(t?"min":"minute",60,!0),t||a("second",1,!0)),r.length?r:"None"},t.getTagAndDescendantsRecursive=function(e,t){for(var n={},r=[e];r.length;){var a=r.pop();n[a]=!0;for(var i=0,o=t[a].childTagIds;i<o.length;i++){var s=o[i];n[s]||r.push(s)}}return n},t.getTagParentIds=function(e,t){for(var n=[],r=0,a=Object.keys(t);r<a.length;r++)for(var i=t[a[r]],o=0,s=i.childTagIds;o<s.length;o++)if(s[o]==e){n.push(i.id);break}return n}},function(e,t,n){"use strict";n.r(t),n.d(t,"IGNORE_CLASS_NAME",function(){return u});var r=n(0),a=n(11);function i(e,t,n){return e===t||(e.correspondingElement?e.correspondingElement.classList.contains(n):e.classList.contains(n))}var o=function(){if("undefined"!=typeof window&&"function"==typeof window.addEventListener){var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}}),n=function(){};return window.addEventListener("testPassiveEventSupport",n,t),window.removeEventListener("testPassiveEventSupport",n,t),e}};var s,c=function(e){return void 0===e&&(e=0),function(){return++e}}(),d={},l={},p=["touchstart","touchmove"],u="ignore-react-onclickoutside";function h(e,t){var n=null;return-1!==p.indexOf(t)&&s&&(n={passive:!e.props.preventDefault}),n}t.default=function(e,t){var n,p;return p=n=function(n){function p(e){var t;return(t=n.call(this,e)||this).__outsideClickHandler=function(e){if("function"!=typeof t.__clickOutsideHandlerProp){var n=t.getInstance();if("function"!=typeof n.props.handleClickOutside){if("function"!=typeof n.handleClickOutside)throw new Error("WrappedComponent lacks a handleClickOutside(event) function for processing outside click events.");n.handleClickOutside(e)}else n.props.handleClickOutside(e)}else t.__clickOutsideHandlerProp(e)},t.enableOnClickOutside=function(){if("undefined"!=typeof document&&!l[t._uid]){void 0===s&&(s=o()),l[t._uid]=!0;var e=t.props.eventTypes;e.forEach||(e=[e]),d[t._uid]=function(e){t.props.disableOnClickOutside||null!==t.componentNode&&(t.props.preventDefault&&e.preventDefault(),t.props.stopPropagation&&e.stopPropagation(),t.props.excludeScrollbar&&function(e){return document.documentElement.clientWidth<=e.clientX||document.documentElement.clientHeight<=e.clientY}(e)||function(e,t,n){if(e===t)return!0;for(;e.parentNode;){if(i(e,t,n))return!0;e=e.parentNode}return e}(e.target,t.componentNode,t.props.outsideClickIgnoreClass)===document&&t.__outsideClickHandler(e))},e.forEach(function(e){document.addEventListener(e,d[t._uid],h(t,e))})}},t.disableOnClickOutside=function(){delete l[t._uid];var e=d[t._uid];if(e&&"undefined"!=typeof document){var n=t.props.eventTypes;n.forEach||(n=[n]),n.forEach(function(n){return document.removeEventListener(n,e,h(t,n))}),delete d[t._uid]}},t.getRef=function(e){return t.instanceRef=e},t._uid=c(),t}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(p,n);var u=p.prototype;return u.getInstance=function(){if(!e.prototype.isReactComponent)return this;var t=this.instanceRef;return t.getInstance?t.getInstance():t},u.componentDidMount=function(){if("undefined"!=typeof document&&document.createElement){var e=this.getInstance();if(t&&"function"==typeof t.handleClickOutside&&(this.__clickOutsideHandlerProp=t.handleClickOutside(e),"function"!=typeof this.__clickOutsideHandlerProp))throw new Error("WrappedComponent lacks a function for processing outside click events specified by the handleClickOutside config option.");this.componentNode=Object(a.findDOMNode)(this.getInstance()),this.enableOnClickOutside()}},u.componentDidUpdate=function(){this.componentNode=Object(a.findDOMNode)(this.getInstance())},u.componentWillUnmount=function(){this.disableOnClickOutside()},u.render=function(){var t=this.props,n=(t.excludeScrollbar,function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(t,["excludeScrollbar"]));return e.prototype.isReactComponent?n.ref=this.getRef:n.wrappedRef=this.getRef,n.disableOnClickOutside=this.disableOnClickOutside,n.enableOnClickOutside=this.enableOnClickOutside,Object(r.createElement)(e,n)},p}(r.Component),n.displayName="OnClickOutside("+(e.displayName||e.name||"Component")+")",n.defaultProps={eventTypes:["mousedown","touchstart"],excludeScrollbar:t&&t.excludeScrollbar||!1,outsideClickIgnoreClass:u,preventDefault:!1,stopPropagation:!1},n.getClass=function(){return e.getClass?e.getClass():e},p}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=n(10),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.selectTag=function(e){e.stopPropagation();var t=new CustomEvent(i.signalDisplayTagInfo,{detail:this.props.tag.id});document.dispatchEvent(t)},t.prototype.render=function(){return a.createElement("div",{className:"tag card",onClick:this.selectTag.bind(this)},this.props.tag.name)},t}(a.Component);t.TagComponent=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.signalDisplayTaskInfo="signalDisplayTaskInfo",t.signalBeginEditingTask="signalBeginEditingTask",t.signalDisplayTagInfo="signalDisplayTagInfo"},function(e,t){e.exports=ReactDOM},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(){}}();t.User=r;var a=function(){return function(){}}();t.Task=a,t.priorityNameList=[["Unknown",0],["Highest",500],["High",400],["Normal",300],["Low",200],["Lowest",100]],t.stateNameList=[["Open",0],["In Progress",500],["Blocked",750],["Project",900],["Closed",1e3]];var i=function(){return function(){}}();t.Event=i;var o=function(){return function(){}}();t.Tag=o;var s=function(){return function(){}}();t.Note=s;var c=function(){return function(){}}();t.Capture=c},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var a=function(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}(r),i=r.sources.map(function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"});return[n].concat(i).concat([a]).join("\n")}return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},a=0;a<this.length;a++){var i=this[a][0];"number"==typeof i&&(r[i]=!0)}for(a=0;a<e.length;a++){var o=e[a];"number"==typeof o[0]&&r[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),t.push(o))}},t}},function(e,t,n){var r={},a=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}}(function(){return window&&document&&document.all&&!window.atob}),i=function(e){var t={};return function(e){if("function"==typeof e)return e();if(void 0===t[e]){var n=function(e){return document.querySelector(e)}.call(this,e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}}(),o=null,s=0,c=[],d=n(35);function l(e,t){for(var n=0;n<e.length;n++){var a=e[n],i=r[a.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](a.parts[o]);for(;o<a.parts.length;o++)i.parts.push(g(a.parts[o],t))}else{var s=[];for(o=0;o<a.parts.length;o++)s.push(g(a.parts[o],t));r[a.id]={id:a.id,refs:1,parts:s}}}}function p(e,t){for(var n=[],r={},a=0;a<e.length;a++){var i=e[a],o=t.base?i[0]+t.base:i[0],s={css:i[1],media:i[2],sourceMap:i[3]};r[o]?r[o].parts.push(s):n.push(r[o]={id:o,parts:[s]})}return n}function u(e,t){var n=i(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=c[c.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),c.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var a=i(e.insertInto+" "+e.insertAt.before);n.insertBefore(t,a)}}function h(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=c.indexOf(e);t>=0&&c.splice(t,1)}function m(e){var t=document.createElement("style");return void 0===e.attrs.type&&(e.attrs.type="text/css"),f(t,e.attrs),u(e,t),t}function f(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function g(e,t){var n,r,a,i;if(t.transform&&e.css){if(!(i=t.transform(e.css)))return function(){};e.css=i}if(t.singleton){var c=s++;n=o||(o=m(t)),r=y.bind(null,n,c,!1),a=y.bind(null,n,c,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",f(t,e.attrs),u(e,t),t}(t),r=function(e,t,n){var r=n.css,a=n.sourceMap,i=void 0===t.convertToAbsoluteUrls&&a;(t.convertToAbsoluteUrls||i)&&(r=d(r));a&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */");var o=new Blob([r],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(o),s&&URL.revokeObjectURL(s)}.bind(null,n,t),a=function(){h(n),n.href&&URL.revokeObjectURL(n.href)}):(n=m(t),r=function(e,t){var n=t.css,r=t.media;r&&e.setAttribute("media",r);if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),a=function(){h(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else a()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=a()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=p(e,t);return l(n,t),function(e){for(var a=[],i=0;i<n.length;i++){var o=n[i];(s=r[o.id]).refs--,a.push(s)}e&&l(p(e,t),t);for(i=0;i<a.length;i++){var s;if(0===(s=a[i]).refs){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete r[s.id]}}}};var v=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}();function y(e,t,n,r){var a=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=v(t,a);else{var i=document.createTextNode(a),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(i,o[t]):e.appendChild(i)}}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a,i=n(3),o=n(0),s=n(16),c=n(36),d=n(17),l=n(55),p=n(58),u=n(10),h=n(59),m=n(68),f=n(69),g=n(20),v=n(21);!function(e){e[e.mergedView=0]="mergedView",e[e.planView=1]="planView",e[e.taskView=2]="taskView",e[e.eventView=3]="eventView",e[e.tagView=4]="tagView",e[e.noteView=5]="noteView"}(a=t.AppViewMode||(t.AppViewMode={}));var y=function(e){function t(t){var n=e.call(this,t)||this;return n._handleDisplayTaskInfo=null,n._handleDisplayTagInfo=null,n._apiError=null,n.state={tasks:t.tasks,events:t.events,tags:t.tags,notes:t.notes,captures:t.captures,tagsById:v.API.getTagsById(t.tags),eventsById:v.API.getEventsById(t.events),tasksById:v.API.getTasksById(t.tasks),notesById:v.API.getNotesById(t.notes),capturesById:v.API.getCapturesById(t.captures),detailInfo:{},taskBoardView:{type:d.TaskBoardViewType.status,shouldHideClosedTasks:!1},calendarView:l.CalendarComponent.getInitialView(l.CalendarViewType.week)},n}return r(t,e),t.prototype.componentDidMount=function(){this._handleDisplayTaskInfo=this.handleDisplayTaskInfo.bind(this),document.addEventListener(u.signalDisplayTaskInfo,this._handleDisplayTaskInfo),this._handleDisplayTagInfo=this.handleDisplayTagInfo.bind(this),document.addEventListener(u.signalDisplayTagInfo,this._handleDisplayTagInfo)},t.prototype.componentWillUnmount=function(){document.removeEventListener(u.signalDisplayTaskInfo,this._handleDisplayTaskInfo),this._handleDisplayTaskInfo=null,document.removeEventListener(u.signalDisplayTagInfo,this._handleDisplayTagInfo),this._handleDisplayTagInfo=null},t.prototype.handleDisplayTaskInfo=function(e){this.setState({detailInfo:{taskId:e.detail,tagId:null}})},t.prototype.handleDisplayTagInfo=function(e){var t=e.detail;this.setState({detailInfo:{taskId:null,tagId:t}})},t.prototype.handleApiError=function(e){var t=this;this._apiError=e,setTimeout(function(){t._apiError&&e.responseText==t._apiError.responseText&&(t._apiError=null,i("#toast-container").addClass("hidden"))},4e3),i("#toast-container").html(this._apiError.status+" - "+this._apiError.responseText).removeClass("hidden")},t.prototype.updateStateWithTasks=function(e){this.setState({tasks:e,tasksById:v.API.getTasksById(e)})},t.prototype.createTask=function(e){var t=this;v.API.createTask(e,function(e){t.updateStateWithTasks(t.state.tasks.concat([e]))}).fail(this.handleApiError.bind(this))},t.prototype.updateTask=function(e){var t=this;v.API.updateTask(e,function(e){var n=t.state.tasks.map(function(t){return t.id==e.id?e:t});t.updateStateWithTasks(n)}).fail(this.handleApiError.bind(this))},t.prototype.deleteTask=function(e){var t=this;v.API.deleteTask(e,function(e){t.updateStateWithTasks(t.state.tasks.filter(function(t){return t.id!=e.id}))}).fail(this.handleApiError.bind(this))},t.prototype.updateStateWithEvents=function(e,t,n){var r=v.API.getTasksAfterEventChange(this.state.tasks,e,t);0==r.length&&this.setState({events:n,eventsById:v.API.getEventsById(n)});var a=v.API.getTasksById(r),i=this.state.tasks.map(function(e){return a.hasOwnProperty(e.id)?a[e.id]:e});this.setState({events:n,eventsById:v.API.getEventsById(n),tasks:i,tasksById:v.API.getTasksById(i)})},t.prototype.createEvent=function(e){var t=this;v.API.createEvent(e,function(e){t.updateStateWithEvents(e,!1,t.state.events.concat([e]))}).fail(this.handleApiError.bind(this))},t.prototype.updateEvent=function(e){var t=this;v.API.updateEvent(e,function(e){var n=t.state.events.map(function(t){return t.id==e.id?e:t});t.updateStateWithEvents(e,!1,n)}).fail(this.handleApiError.bind(this))},t.prototype.deleteEvent=function(e){var t=this;v.API.deleteEvent(e,function(e){var n=t.state.events.filter(function(t){return t.id!=e.id});t.updateStateWithEvents(e,!0,n)}).fail(this.handleApiError.bind(this))},t.prototype.updateStateWithTags=function(e){this.setState({tags:e,tagsById:v.API.getTagsById(e)})},t.prototype.createTag=function(e){var t=this;v.API.createTag(e,function(e){t.updateStateWithTags(t.state.tags.concat([e]))}).fail(this.handleApiError.bind(this))},t.prototype.updateTag=function(e){var t=this;v.API.updateTag(e,function(e){var n=t.state.tags.map(function(t){return t.id==e.id?e:t});t.updateStateWithTags(n)}).fail(this.handleApiError.bind(this))},t.prototype.deleteTag=function(e){},t.prototype.updateStateWithNotes=function(e){this.setState({notes:e,notesById:v.API.getNotesById(e)})},t.prototype.createNote=function(e){var t=this;v.API.createNote(e,function(e){t.updateStateWithNotes(t.state.notes.concat([e]))}).fail(this.handleApiError.bind(this))},t.prototype.updateNote=function(e){var t=this;v.API.updateNote(e,function(e){var n=t.state.notes.map(function(t){return t.id==e.id?e:t});t.updateStateWithNotes(n)}).fail(this.handleApiError.bind(this))},t.prototype.deleteNote=function(e){var t=this;v.API.deleteNote(e,function(e){t.updateStateWithNotes(t.state.notes.filter(function(t){return t.id!=e.id}))}).fail(this.handleApiError.bind(this))},t.prototype.updateStateWithCaptures=function(e){this.setState({captures:e,capturesById:v.API.getCapturesById(e)})},t.prototype.createCapture=function(e){var t=this;v.API.createCapture(e,function(e){t.updateStateWithCaptures(t.state.captures.concat([e]))}).fail(this.handleApiError.bind(this))},t.prototype.deleteCapture=function(e){var t=this;v.API.deleteCapture(e,function(e){t.updateStateWithCaptures(t.state.captures.filter(function(t){return t.id!=e.id}))}).fail(this.handleApiError.bind(this))},t.prototype.beginEditingSelectedTask=function(){if(this.state.detailInfo.taskId){var e=new CustomEvent(u.signalBeginEditingTask,{detail:this.state.detailInfo.taskId});document.dispatchEvent(e)}},t.prototype.closeDetail=function(){this.setState({detailInfo:{}})},t.prototype.changeTaskBoardView=function(e){this.setState({taskBoardView:e})},t.prototype.getCalendarView=function(e){if(this.state.calendarView.initial&&e!=this.state.calendarView.type){var t=l.CalendarComponent.getInitialView(e);return this.setState({calendarView:t}),t}return this.state.calendarView},t.prototype.changeCalendarView=function(e){e.initial=!1,this.setState({calendarView:e})},t.prototype.getSelectedTag=function(e){var t=null;if(!e)return t;for(var n=e.toLowerCase(),r=0,a=Object.keys(this.state.tagsById);r<a.length;r++){var i=a[r];this.state.tagsById[i].name.toLowerCase()==n&&(t=this.state.tagsById[i])}return t},t.prototype.changeSelectedTag=function(e){e&&("/plan"==window.location.pathname||"/tag"==window.location.pathname||"/tasks"==window.location.pathname?window.location.href+="/"+e.name:"/"==window.location.pathname?window.location.href="/tag/"+e.name:window.location.href="../"+e.name)},t.prototype.renderDetail=function(){if(this.state.detailInfo.taskId){var e=this.state.tasksById[this.state.detailInfo.taskId];return e?o.createElement(h.TaskDetailComponent,{task:e,eventsById:this.state.eventsById,closeCallback:this.closeDetail.bind(this),editCallback:this.beginEditingSelectedTask.bind(this)}):void console.error("Task not found to show detail for...")}if(this.state.detailInfo.tagId){var t=this.state.tagsById[this.state.detailInfo.tagId];return t?o.createElement(m.TagDetailComponent,{tag:t,eventsById:this.state.eventsById,tagsById:this.state.tagsById,closeCallback:this.closeDetail.bind(this)}):void console.error("Tag not found to show detail for...")}},t.prototype.renderToasts=function(){return o.createElement("div",{id:"toast-container",className:"hidden"})},t.prototype.renderMergedView=function(e){return o.createElement("div",{className:"merged-container"},o.createElement("div",{className:"main-pane"},o.createElement("div",{className:"merged-task-container"},this.renderTaskBoard(e)),this.renderDetail()),o.createElement("div",{className:"right-pane"},o.createElement("div",{className:"merged-capture-container"},this.renderCaptures())))},t.prototype.renderPlanView=function(e){return o.createElement("div",{className:"merged-container"},o.createElement("div",{className:"main-pane"},o.createElement("div",{className:"merged-task-container"},this.renderTaskBoard(e)),this.renderDetail()),o.createElement("div",{className:"right-pane"},o.createElement("div",{className:"merged-calendar-container"},this.renderCalendar(l.CalendarViewType.day,!0))))},t.prototype.renderTaskBoard=function(e){return o.createElement(d.TaskBoardComponent,{meUser:this.props.meUser,tasksById:this.state.tasksById,tagsById:this.state.tagsById,eventsById:this.state.eventsById,createTask:this.createTask.bind(this),updateTask:this.updateTask.bind(this),deleteTask:this.deleteTask.bind(this),selectedTag:this.getSelectedTag(e),changeSelectedTag:this.changeSelectedTag.bind(this),view:this.state.taskBoardView,changeView:this.changeTaskBoardView.bind(this)})},t.prototype.renderCalendar=function(e,t){return o.createElement(l.CalendarComponent,{meUser:this.props.meUser,eventsById:this.state.eventsById,tagsById:this.state.tagsById,tasksById:this.state.tasksById,simpleOptions:t,createEvent:this.createEvent.bind(this),updateEvent:this.updateEvent.bind(this),deleteEvent:this.deleteEvent.bind(this),selectedTag:this.getSelectedTag(null),changeSelectedTag:this.changeSelectedTag.bind(this),view:this.getCalendarView(e),changeView:this.changeCalendarView.bind(this)})},t.prototype.renderCaptures=function(){return o.createElement(g.CaptureListComponent,{meUser:this.props.meUser,capturesById:this.state.capturesById,createCapture:this.createCapture.bind(this),deleteCapture:this.deleteCapture.bind(this)})},t.prototype.renderTagGraph=function(){return o.createElement(c.TagGraphComponent,{meUser:this.props.meUser,tagsById:this.state.tagsById,createTag:this.createTag.bind(this),updateTag:this.updateTag.bind(this),deleteTag:this.deleteTag.bind(this)})},t.prototype.renderNotes=function(){return o.createElement(f.NoteBoardComponent,{meUser:this.props.meUser,notesById:this.state.notesById,tagsById:this.state.tagsById,createNote:this.createNote.bind(this),updateNote:this.updateNote.bind(this),deleteNote:this.deleteNote.bind(this)})},t.prototype.renderPageContainer=function(e,t){return o.createElement("div",null,o.createElement(p.AppHeader,{meUser:this.props.meUser,viewMode:e}),o.createElement("div",{className:"board-container"},t()),this.renderToasts())},t.prototype.render=function(){var e=this,t=function(t){return e.renderPageContainer(a.eventView,e.renderCalendar.bind(e,t,!1))};return o.createElement("div",null,o.createElement(s.BrowserRouter,null,o.createElement("div",null,o.createElement(s.Route,{exact:!0,path:"/",component:function(){return e.renderPageContainer(a.mergedView,e.renderMergedView.bind(e))}}),o.createElement(s.Route,{exact:!0,path:"/plan",component:function(){return e.renderPageContainer(a.planView,e.renderPlanView.bind(e))}}),o.createElement(s.Route,{path:"/plan/:tagName",component:function(t){return e.renderPageContainer(a.planView,e.renderPlanView.bind(e,t.match.params.tagName))}}),o.createElement(s.Route,{path:"/tasks",component:function(){return e.renderPageContainer(a.taskView,e.renderTaskBoard.bind(e))}}),o.createElement(s.Route,{exact:!0,path:"/cal",component:t.bind(this,l.CalendarViewType.week)}),o.createElement(s.Route,{path:"/cal/week",component:t.bind(this,l.CalendarViewType.week)}),o.createElement(s.Route,{path:"/cal/day",component:t.bind(this,l.CalendarViewType.day)}),o.createElement(s.Route,{path:"/tag/:tagName",component:function(t){return e.renderPageContainer(a.mergedView,e.renderMergedView.bind(e,t.match.params.tagName))}}),o.createElement(s.Route,{path:"/tags",component:function(){return e.renderPageContainer(a.tagView,e.renderTagGraph.bind(e))}}),o.createElement(s.Route,{path:"/notes",component:function(){return e.renderPageContainer(a.noteView,e.renderNotes.bind(e))}}))))},t}(o.Component);t.App=y},function(e,t){e.exports=ReactRouterDOM},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a,i=n(0),o=n(3),s=n(1),c=n(39),d=n(12),l=n(54),p=n(4),u=n(6),h=n(10),m=n(7);!function(e){e[e.status=0]="status",e[e.priority=1]="priority"}(a=t.TaskBoardViewType||(t.TaskBoardViewType={}));var f=function(e){function t(t){var n=e.call(this,t)||this;return n._handleBeginEditingTask=null,n._dragTargetElement=null,n.state=n.getState(t),n}return r(t,e),t.prototype.componentWillReceiveProps=function(e){this.setState(this.getState(e))},t.prototype.getState=function(e){var t=this.divideByType(e.tasksById,e.view.type,e.selectedTag,e.view.shouldHideClosedTasks),n=t[0],r=t[1];return{columns:t[2],headers:n,columnTypes:r,createColumnType:null,draggingTask:null,editingTask:null}},t.prototype.componentDidMount=function(){this._handleBeginEditingTask=this.handleBeginEditingTask.bind(this),document.addEventListener(h.signalBeginEditingTask,this._handleBeginEditingTask)},t.prototype.componentWillUnmount=function(){document.removeEventListener(h.signalBeginEditingTask,this._handleBeginEditingTask),this._handleBeginEditingTask=null},t.prototype.handleBeginEditingTask=function(e){if(!this.state.editingTask){var t=e.detail;this.setState({editingTask:this.props.tasksById[t]})}},t.prototype.divideByType=function(e,t,n,r){var i=this,o={},s=[],c=[],l=[],p={};if(p[a.status]={attr:"state",orderedNameAndValue:d.stateNameList,sortFunc:function(e,t){if(1e3==e.state&&1e3==t.state)return t.stateUpdatedTime-e.stateUpdatedTime;var n=0==e.priority?1e3:e.priority,r=0==t.priority?1e3:t.priority;return n!=r?r-n:(0==e.dueTime?Number.MAX_VALUE:e.dueTime)-(0==t.dueTime?Number.MAX_VALUE:t.dueTime)}},p[a.priority]={attr:"priority",orderedNameAndValue:d.priorityNameList,sortFunc:function(e,t){return e.state-t.state}},!p[t])throw Error("Split type not implemented: "+t);var u=p[t],h=u.attr,f=u.orderedNameAndValue,g=u.sortFunc,v={};n&&(v=m.getTagAndDescendantsRecursive(n.id,this.props.tagsById));for(var y=function(e){if(n){var o=!1;if(e.tagIds.forEach(function(e){o=o||v[e]}),!o)return!0}return!!i.state&&!(1e3!=e.state||t!=a.priority||!r)},b=0,k=Object.keys(e);b<k.length;b++){var E=e[k[b]];y(E)||(o[E[h]]?o[E[h]].push(E):o[E[h]]=[E])}return f.forEach(function(e){var t=e[0],n=e[1];(o[n]||[]).sort(g),s.push(o[n]||[]),c.push(t),l.push(n)}),[c,l,s]},t.prototype.onDragStart=function(e,t){if(this.state.draggingTask)throw Error("Already was dragging a task...");this.setState({draggingTask:e}),t.dataTransfer.setData("id",e.id.toString()),t.dataTransfer.effectAllowed="move",this._dragTargetElement=o(t.target)},t.prototype.onDragEnd=function(e){this.state.draggingTask==e&&(this.setState({draggingTask:null}),this._dragTargetElement.show())},t.prototype.onDrop=function(e,t){if(this.state.draggingTask){t.dataTransfer.dropEffect="move",t.preventDefault();var n=this.state.draggingTask;if(this.props.view.type==a.status){var r=n.state;n.state=e,r!=e&&(n.stateUpdatedTime=1e3*s().unix())}else{if(this.props.view.type!=a.priority)throw Error("Haven't implement drag and drop for this view type yet");n.priority=e}this.props.updateTask(n),o(t.target).removeClass("drop-container"),this.setState({draggingTask:null}),this._dragTargetElement.show()}},t.prototype.markColumnAsDraggable=function(e){var t=o(".drop-container");1==t.length&&t[0]!=e&&t.removeClass("drop-container"),o(e).addClass("drop-container")},t.prototype.onDragOver=function(e){e.preventDefault(),this.state.draggingTask&&(this._dragTargetElement.hide(),o(e.target).hasClass("column-container")?this.markColumnAsDraggable(e.target):this.markColumnAsDraggable(o(e.target).parents(".column-container")[0]))},t.prototype.onClick=function(e,t){t.stopPropagation();var n=new CustomEvent(h.signalDisplayTaskInfo,{detail:e});return document.dispatchEvent(n),!1},t.prototype.changeViewType=function(e){this.props.changeView({type:e,shouldHideClosedTasks:this.props.view.shouldHideClosedTasks})},t.prototype.changeHideClosedTasks=function(){this.props.changeView({type:this.props.view.type,shouldHideClosedTasks:!this.props.view.shouldHideClosedTasks})},t.prototype.getCurrentTagToken=function(){return this.props.selectedTag?[{label:this.props.selectedTag.name,value:this.props.selectedTag.id}]:[]},t.prototype.changeCurrentTagToken=function(e){var t;e.length?t=this.props.tagsById[e[0].value]:(t=null,0==window.location.pathname.indexOf("/tag/")&&(window.location.pathname="/")),this.props.changeSelectedTag(t)},t.prototype.getAllTagNames=function(){var e=this,t=[];return Object.keys(this.props.tagsById).forEach(function(n){var r=e.props.tagsById[+n];t.push({label:r.name,value:r.id})}),t},t.prototype.clearCreateColumnType=function(){this.setState({createColumnType:null})},t.prototype.createTask=function(e){null==this.state.createColumnType&&this.setState({createColumnType:e})},t.prototype.clearEditingTask=function(){this.setState({editingTask:null})},t.prototype.renderTypeChoice=function(e){var t="view-type-choice";e==this.props.view.type&&(t+=" -selected");var n={};return n[a.priority]="Priority",n[a.status]="Status",i.createElement("div",{className:t,key:e,onClick:this.changeViewType.bind(this,e)},n[e])},t.prototype.renderTypeSelector=function(){return i.createElement("div",{className:"view-type-selector"},this.renderTypeChoice(a.priority),this.renderTypeChoice(a.status))},t.prototype.renderHideClosedTasks=function(){if(this.props.view.type!=a.status)return i.createElement("div",{className:"hide-closed-tasks"},i.createElement("label",{htmlFor:"hide-closed"},"Hide closed?"),i.createElement("input",{id:"hide-closed",type:"checkbox",onChange:this.changeHideClosedTasks.bind(this),checked:this.props.view.shouldHideClosedTasks}))},t.prototype.renderOptions=function(){return i.createElement("div",{className:"task-board-options"},this.renderTypeSelector(),this.renderTagSelector(),this.renderHideClosedTasks())},t.prototype.renderTagSelector=function(){return i.createElement("div",{className:"task-board-tag-selector-container"},i.createElement("div",{className:"tag-selector-label"},"Filter Tag:"),i.createElement(p.TokenizerComponent,{onChange:this.changeCurrentTagToken.bind(this),initialValues:this.getCurrentTagToken(),possibleTokens:this.getAllTagNames(),tokenLimit:1}))},t.prototype.renderColumn=function(e,t,n){var r=this;return i.createElement("div",{className:"column-container",key:t,onDrop:this.onDrop.bind(this,n),onDragOver:this.onDragOver.bind(this),onClick:this.createTask.bind(this,n)},i.createElement("div",{className:"column-header"},t),e.map(function(e){return i.createElement("div",{key:e.id,className:"draggable-task",draggable:!0,onDragStart:r.onDragStart.bind(r,e),onDragEnd:r.onDragEnd.bind(r,e),onClick:r.onClick.bind(r,e.id)},i.createElement(l.TaskComponent,{task:e,viewType:r.props.view.type,tagsById:r.props.tagsById,eventsById:r.props.eventsById}))}))},t.prototype.renderColumns=function(){for(var e=[],t=0;t<this.state.columns.length;t++)e.push(this.renderColumn(this.state.columns[t],this.state.headers[t],this.state.columnTypes[t]));return i.createElement("div",{className:"full-column-container"},i.createElement("div",{className:"columns-container"},e))},t.prototype.renderEditingTask=function(){if(this.state.editingTask)return i.createElement(u.ModalComponent,{cancelFunc:this.clearEditingTask.bind(this)},i.createElement(c.EditTaskComponent,{meUser:this.props.meUser,task:this.state.editingTask,tagsById:this.props.tagsById,createMode:!1,createTask:function(e){},updateTask:this.props.updateTask,deleteTask:this.props.deleteTask}))},t.prototype.renderCreateTask=function(){if(null!=this.state.createColumnType){var e=null,t=null;this.props.view.type==a.priority&&(e=this.state.createColumnType,t=0),this.props.view.type==a.status&&(e=0,t=this.state.createColumnType);var n=[];return this.props.selectedTag&&n.push(this.props.selectedTag.id),i.createElement(u.ModalComponent,{cancelFunc:this.clearCreateColumnType.bind(this)},i.createElement(c.EditTaskComponent,{meUser:this.props.meUser,tagsById:this.props.tagsById,createMode:!0,createTask:this.props.createTask,initialPriority:e,initialState:t,initialTags:n,updateTask:function(e){},deleteTask:function(e){}}))}},t.prototype.render=function(){return i.createElement("div",{className:"task-board"},this.renderOptions(),this.renderColumns(),this.renderEditingTask(),this.renderCreateTask())},t}(i.Component);t.TaskBoardComponent=f},function(e,t,n){"use strict";var r=Object.prototype.propertyIsEnumerable;function a(e){var t=Object.getOwnPropertyNames(e);return Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(e))),t.filter(function(t){return r.call(e,t)})}e.exports=Object.assign||function(e,t){for(var n,r,i=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),o=1;o<arguments.length;o++){n=arguments[o],r=a(Object(n));for(var s=0;s<r.length;s++)i[r[s]]=n[r[s]]}return i}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),i=n(0),o=n(70),s=n(4),c=function(e){function t(t){var n=e.call(this,t)||this;return t.createMode?n.state={note:n._getEmptyNote(t)}:n.state={note:t.note},n}return r(t,e),t.prototype.componentWillReceiveProps=function(e){e.createMode?this.setState({note:this._getEmptyNote(e)}):this.setState({note:e.note})},t.prototype._getEmptyNote=function(e){return{id:0,title:"",content:"",authorId:e.meUser.id,creationTime:1e3*a().unix(),tagIds:[]}},t.prototype.submitForm=function(e){if("save"==e)this.props.updateNote(this.state.note);else if("delete"==e)this.props.deleteNote(this.state.note);else{if("create"!=e)throw Error("Unknown submit type!");this.props.createNote(this.state.note)}},t.prototype.onKeyDownCreate=function(e){"Enter"==e.key&&this.props.createMode&&this.submitForm("create")},t.prototype.updateAttr=function(e,t){this.state.note[e]=t.target.value,this.setState(this.state)},t.prototype.getCurrentTags=function(){var e=this,t=[];return this.state.note.tagIds.forEach(function(n){var r=e.props.tagsById[n];t.push({label:r.name,value:r.id})}),t},t.prototype.getAllTagNames=function(){var e=this,t=[];return Object.keys(this.props.tagsById).forEach(function(n){var r=e.props.tagsById[+n];t.push({label:r.name,value:r.id})}),t},t.prototype.retrieveTagNames=function(e){this.state.note.tagIds=e.map(function(e){return e.value}),this.setState(this.state)},t.prototype.renderFormTitle=function(){return this.props.createMode?i.createElement("h3",null,"Create Note"):i.createElement("h3",null,"Editing N",this.state.note.id)},t.prototype.renderButtons=function(){return this.props.createMode?i.createElement("div",{className:"edit-note-button-container"},i.createElement("input",{type:"button",value:"create",onClick:this.submitForm.bind(this,"create")})):i.createElement("div",{className:"edit-note-button-container"},i.createElement("input",{type:"button",value:"delete",onClick:this.submitForm.bind(this,"delete")}),i.createElement("input",{type:"button",value:"save",onClick:this.submitForm.bind(this,"save")}))},t.prototype.renderForm=function(){return i.createElement("div",null,i.createElement("div",{className:"title-container"},i.createElement("label",{htmlFor:"title"},"Title: "),i.createElement("input",{type:"text",name:"title",value:this.state.note.title,onKeyDown:this.onKeyDownCreate.bind(this),onChange:this.updateAttr.bind(this,"title")})),i.createElement("div",{className:"content-container"},i.createElement("label",{htmlFor:"content"},"Description: "),i.createElement(o.default,{type:"text",name:"content",value:this.state.note.content,onChange:this.updateAttr.bind(this,"content")})),i.createElement("div",{className:"tag-tokenizer-container"},i.createElement("label",null,"Tags:"),i.createElement(s.TokenizerComponent,{onChange:this.retrieveTagNames.bind(this),initialValues:this.getCurrentTags(),possibleTokens:this.getAllTagNames()})),this.renderButtons())},t.prototype.render=function(){return i.createElement("div",{className:"edit-note-container"},this.renderFormTitle(),this.renderForm())},t}(i.Component);t.EditNoteComponent=c},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=n(73),o=function(e){function t(t){var n=e.call(this,t)||this;return n.state={lastSaved:null},n}return r(t,e),t.prototype.componentWillReceiveProps=function(e){var t=null;for(var n in e.capturesById)this.props.capturesById[n]||(t=e.capturesById[n]);this.setState({lastSaved:t})},t.prototype.deleteCaptureById=function(e){this.props.deleteCapture(this.props.capturesById[e])},t.prototype.renderOptions=function(){return a.createElement("div",{className:"capture-list-options"})},t.prototype.renderCreateCapture=function(){return a.createElement("div",{className:"card"},a.createElement(i.CreateCaptureComponent,{meUser:this.props.meUser,createCapture:this.props.createCapture,lastSaved:this.state.lastSaved}))},t.prototype.renderDeleteButton=function(e){return a.createElement("div",{className:"capture-delete",onClick:this.deleteCaptureById.bind(this,e)},"Delete")},t.prototype.renderCapture=function(e){return a.createElement("div",{className:"capture-container card",key:e.id},a.createElement("div",{className:"capture-content"},e.content),a.createElement("div",{className:"capture-options-container"},this.renderDeleteButton(e.id)))},t.prototype.renderNoCaptures=function(){return a.createElement("div",{className:"captured-everything"},"You've captured everything! :)")},t.prototype.renderCaptures=function(){var e=this,t=Object.keys(this.props.capturesById).map(function(t){return e.props.capturesById[t]});return t.sort(function(e,t){return t.creationTime-e.creationTime}),0==t.length?this.renderNoCaptures():a.createElement("div",{className:"capture-list-scroll-container"},t.map(this.renderCapture.bind(this)))},t.prototype.render=function(){return a.createElement("div",{className:"capture-list-container"},this.renderOptions(),this.renderCreateCapture(),this.renderCaptures())},t}(a.Component);t.CaptureListComponent=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),a=function(){function e(){}return e.getTasksById=function(e){for(var t={},n=0,r=e;n<r.length;n++){var a=r[n];t[a.id]=a}return t},e.createTask=function(e,t){var n={title:e.title,description:e.description,authorId:e.authorId,ownerId:e.ownerId,tagIds:e.tagIds,priority:e.priority,state:e.state,eventIds:e.eventIds,expectedDurationSecs:e.expectedDurationSecs,dueTime:e.dueTime,stateUpdatedTime:e.stateUpdatedTime};return r.post("/api/1/task/create",n,function(e){t(JSON.parse(e))})},e.updateTask=function(e,t){var n={id:e.id,title:e.title,description:e.description,authorId:e.authorId,ownerId:e.ownerId,tagIds:e.tagIds,priority:e.priority,state:e.state,expectedDurationSecs:e.expectedDurationSecs,dueTime:e.dueTime,stateUpdatedTime:e.stateUpdatedTime};return r.post("/api/1/task/update",n,function(e){t(JSON.parse(e))})},e.deleteTask=function(e,t){return r.post("/api/1/task/delete",{id:e.id},function(n){if(JSON.parse(n).id!=e.id)throw Error("Deleted wrong task?");t(e)})},e.getTasksAfterEventChange=function(t,n,r){for(var a={},i=0,o=t;i<o.length;i++)for(var s=o[i],c=0,d=s.eventIds;c<d.length;c++){d[c]==n.id&&(a[s.id]=!0)}for(var l={},p=[],u=e.getTasksById(t),h=0,m=n.taskIds;h<m.length;h++){var f=m[h];if(!r)if(l[f]=!0,!a[f])(g=u[f]).eventIds.push(n.id),p.push(g)}for(var f in a){var g;if(!l[f])(g=u[f]).eventIds=g.eventIds.filter(function(e){return e!=n.id}),p.push(g)}return p},e.getEventsById=function(e){for(var t={},n=0,r=e;n<r.length;n++){var a=r[n];t[a.id]=a}return t},e.createEvent=function(e,t){var n={name:e.name,authorId:e.authorId,ownerId:e.ownerId,tagIds:e.tagIds,startTime:e.startTime,durationSecs:e.durationSecs,taskIds:e.taskIds};return r.post("/api/1/event/create",n,function(e){t(JSON.parse(e))})},e.updateEvent=function(e,t){return r.post("/api/1/event/update",e,function(e){t(JSON.parse(e))})},e.deleteEvent=function(e,t){return r.post("/api/1/event/delete",{id:e.id},function(n){if(JSON.parse(n).id!=e.id)throw Error("Deleted wrong event?");t(e)})},e.getTagsById=function(e){for(var t={},n=0,r=e;n<r.length;n++){var a=r[n];t[a.id]=a}return t},e.createTag=function(e,t){var n={name:e.name,ownerId:e.ownerId,childTagIds:e.childTagIds};return r.post("/api/1/tag/create",n,function(e){t(JSON.parse(e))})},e.updateTag=function(e,t){return r.post("/api/1/tag/update",e,function(e){t(JSON.parse(e))})},e.getNotesById=function(e){for(var t={},n=0,r=e;n<r.length;n++){var a=r[n];t[a.id]=a}return t},e.createNote=function(e,t){var n={title:e.title,content:e.content,creationTime:e.creationTime,authorId:e.authorId,tagIds:e.tagIds};return r.post("/api/1/note/create",n,function(e){t(JSON.parse(e))})},e.updateNote=function(e,t){return r.post("/api/1/note/update",e,function(e){t(JSON.parse(e))})},e.deleteNote=function(e,t){return r.post("/api/1/note/delete",{id:e.id},function(n){if(JSON.parse(n).id!=e.id)throw Error("Deleted wrong note?");t(e)})},e.getCapturesById=function(e){for(var t={},n=0,r=e;n<r.length;n++){var a=r[n];t[a.id]=a}return t},e.createCapture=function(e,t){var n={content:e.content,creationTime:e.creationTime,authorId:e.authorId};return r.post("/api/1/capture/create",n,function(e){t(JSON.parse(e))})},e.deleteCapture=function(e,t){return r.post("/api/1/capture/delete",{id:e.id},function(n){if(JSON.parse(n).id!=e.id)throw Error("Deleted wrong capture?");t(e)})},e}();t.API=a},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e};Object.defineProperty(t,"__esModule",{value:!0}),n(23);var a=n(0),i=n(11),o=n(3),s=n(15),c=n(74),d=function(){return function(e){i.render(a.createElement(s.App,r({},e)),document.getElementById("render-target"))}}();t.AppRenderer=d;var l=function(){return function(e){i.render(a.createElement(c.Capturer,r({},e)),document.getElementById("render-target"))}}();t.CaptureRenderer=l;var p=function(e){var t="";if(document.cookie&&""!=document.cookie)for(var n=document.cookie.split(";"),r=0;r<n.length;r++){var a=o.trim(n[r]);if(a.substring(0,e.length+1)==e+"="){t=decodeURIComponent(a.substring(e.length+1));break}}return t}("csrftoken");o.ajaxSetup({beforeSend:function(e,t){(function(e){return/^(GET|HEAD|OPTIONS|TRACE)$/.test(e)})(t.type)||this.crossDomain||e.setRequestHeader("X-CSRFToken",p)}}),window.StarterRenderers={AppRenderer:d,CaptureRenderer:l}},function(e,t,n){var r=n(24);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(14)(r,a);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(25);(e.exports=n(13)(!1)).push([e.i,'*{font-family:Open Sans,lucida grande,Segoe UI,arial,verdana,lucida sans unicode,tahoma,sans-serif!important;letter-spacing:.3px;color:#47525d;font-weight:100}@font-face{font-family:Open Sans;font-style:normal;font-weight:300;src:local("Open Sans Light"),local("OpenSans-Light"),url('+r(n(26))+') format("woff2"),url('+r(n(27))+') format("woff"),url('+r(n(28))+') format("truetype")}@font-face{font-family:Open Sans;font-style:normal;font-weight:400;src:local("Open Sans Regular"),local("OpenSans-Regular"),url('+r(n(29))+') format("woff2"),url('+r(n(30))+') format("woff"),url('+r(n(31))+') format("truetype")}@font-face{font-family:Open Sans;font-style:normal;font-weight:700;src:local("Open Sans Bold"),local("OpenSans-Bold"),url('+r(n(32))+') format("woff2"),url('+r(n(33))+') format("woff"),url('+r(n(34))+') format("truetype")}body{background:#f6f9fc;margin:0}input{border:1px solid rgba(0,0,0,.4);cursor:text;background-color:#fff;padding:1px 0}div.card{border:1px solid rgba(0,0,0,.04);box-shadow:0 1px 4px rgba(0,0,0,.03);margin:0 0 10px;padding:20px;border-radius:3px;background:#fff;-webkit-tap-highlight-color:transparent;box-sizing:border-box;display:block}div.header-container{display:flex;justify-content:space-between;flex-wrap:wrap;padding:1em 1em 0;background-color:#fff}h1.header-title{margin:0}div.header-container div.view-mode-selector{display:flex;width:100%;margin:.5em 0}div.header-container div.view-mode-selector a.view-mode-option{margin-right:1em;text-decoration:none}div.header-container div.view-mode-selector a.view-mode-option.-selected{text-decoration:underline}div.task-board{width:100%;height:calc(100vh - 97px);display:flex;flex-direction:column}div.task-board div.task-board-options{display:flex;background-color:#fff;padding:0 1em .5em;flex-shrink:0}div.task-board div.task-board-options div.view-type-selector{display:flex}div.task-board div.task-board-options div.view-type-selector div.view-type-choice{margin-right:.5em;cursor:pointer}div.task-board div.task-board-options div.view-type-selector div.view-type-choice.-selected{text-decoration:underline}div.task-board div.hide-closed-tasks{margin-left:.5em}div.task-board div.task-board-tag-selector-container{display:flex;margin-left:1em}div.task-board div.task-board-tag-selector-container div.tokenizer-container{margin-left:.5em}div.task-board div.full-column-container{height:100%}div.task-board div.full-column-container div.columns-container{display:flex;flex-direction:row;min-height:100%}div.task-board div.column-container{display:flex;flex-direction:column;width:25%;padding:.5em}div.task-board div.column-container.drop-container{background-color:rgba(0,0,0,.04)}div.task-board div.draggable-task.-hidden{display:none}.task-title,div.task-board .task{text-overflow:ellipsis;overflow:hidden}.task-id{font-weight:bolder;text-decoration:underline}.task-title{font-weight:700}.task .task-columns{display:flex}.task-columns .main-column{width:100%}.task-columns .task-color{width:3px;flex-shrink:0;margin:-20px 17px -20px -20px}.task-color.-p0{background-color:#8b4513}.task-color.-p500{background-color:#f0f}.task-color.-p400{background-color:red}.task-color.-p300{background-color:orange}.task-color.-p200{background-color:#228b22}.task-color.-p100{background-color:#6495ed}.task-color.-s0{background-color:#228b22}.task-color.-s500{background-color:#6495ed}.task-color.-s750{background-color:red}.task-color.-s1000{background-color:#8b4513}div.task-tags-container{display:flex}div.task-tags-container div.tag{margin-left:.25em;padding:.1em .25em}.task-due-date.-very-overdue{color:#f0f}.task-due-date.-overdue{color:red}.task-due-date.-due-today{color:orange}.task-due-date.-due-soon{color:#228b22}.task-due-date.-due-not-soon{color:#6495ed}div.detail-container{background-color:#fff;padding:.5em;overflow-wrap:break-word}div.detail-container div.title{font-weight:700}div.detail-container div.options-container{text-decoration:underline;display:flex;justify-content:space-between}div.detail-container div.options a{padding:0 .25em;cursor:pointer}div.detail-container div.time-info{padding-top:.25em}div.detail-container div.task-status{display:flex;padding-top:.25em}div.detail-container div.task-status div{margin-right:.5em}div.detail-container div.task-status div.info-container{display:flex}div.detail-container div.task-status div.task-color{height:22px;width:1em;margin-right:.25em;margin-left:-.25em}div.detail-container div.options-container.tag-options-container{text-decoration:none}div.detail-container div.options{text-decoration:underline}div.detail-container div.related-tag-names{display:flex;align-items:center}div.detail-container div.related-tag-names div.tag{padding:1px .25em;margin-left:.25em;margin-bottom:0}div.calendar{width:100%}div.calendar div.options{display:flex;background-color:#fff;padding:0 1em .5em}div.calendar div.options div.view-type-selector{display:flex;margin-left:.5em}div.calendar div.options div.view-type-selector div.view-type-choice{margin-right:.5em;cursor:pointer}div.calendar div.options div.view-type-selector div.view-type-choice.-selected{text-decoration:underline}div.calendar div.options div.pagination-container{display:flex;margin-left:.5em}div.calendar div.options div.pagination-container div.pagination-option{margin-right:.5em;cursor:pointer}div.calendar div.tag-selector-container{display:flex;margin-left:1em}div.calendar div.tag-selector-container div.tokenizer-container{margin-left:.5em}div.calendar div.full-column-container{display:flex;align-items:center;flex-direction:column;height:calc(100vh - 140px);padding:0 2em}div.calendar div.full-column-container div.header-and-content-container{overflow:hidden;height:100%;width:100%;display:flex;flex-direction:column}div.calendar div.column-header-container{display:flex;margin-top:.5em;margin-right:15px;text-align:center}div.calendar div.column-header{min-width:120px;flex-grow:1;height:22px}div.calendar div.column-header.-times{max-width:120px}div.calendar div.column-header.single-day{min-width:360px}div.calendar div.all-columns-container{display:flex;height:100%;overflow-x:hidden;overflow-y:auto;border-bottom:1px solid rgba(0,0,0,.2);border-top:1px solid rgba(0,0,0,.2)}div.calendar div.column-container{flex-grow:1;min-width:120px;position:relative}div.calendar div.column-container.-times{max-width:120px}div.calendar div.column-container table{width:100%}div.calendar div.column-container.single-day{min-width:360px}div.calendar div.column-container td{border-right:1px solid rgba(0,0,0,.2);border-bottom:1px solid rgba(0,0,0,.2);font-size:14px;min-width:120px;cursor:pointer}div.calendar div.column-container.single-day td{min-width:360px}div.calendar div.column-container tr:nth-child(odd) td{border-bottom-style:dashed}div.calendar div.column-container:first-child td{border-left:1px solid rgba(0,0,0,.2);cursor:default;vertical-align:top;text-align:right}div.calendar div.column-container table tbody tr:first-child td{border-top:1px solid rgba(0,0,0,.2)}div.calendar div.rendered-event-container{position:absolute;width:100%}div.calendar div.rendered-event-container div.card{padding:1px .25em;margin-left:1px;margin-right:2px;margin-bottom:0;overflow-y:auto;height:100%}div.calendar div.column-container div.current-time-cursor{position:absolute;height:3px;background-color:#dc322f;min-width:120px;width:100%;z-index:2}div.calendar div.column-container.single-day div.current-time-cursor{min-width:360px}div.calendar div.column-container tr td.-selected{background-color:rgba(0,0,0,.2);border:none}div.calendar div.rendered-event-container div.draggable-event-end{cursor:ns-resize;width:100%;height:7px;margin-top:-3px}div.calendar div.rendered-event-container div.tag.card{overflow-y:hidden}div.event-container{font-size:13px;display:flex;flex-wrap:wrap;align-content:space-between;overflow-x:hidden;height:100%}div.event-container div.name{flex-grow:1}div.event-card-container{align-self:flex-end;flex-grow:1;display:flex;justify-content:flex-end;padding-bottom:.25em}div.event-card-container div.card{margin:0 0 0 .25em;padding:.1em .25em}div.event-container div.task-id-card{cursor:pointer}.tag-graph{margin:1em}.tag-children-container,.tags-root-container{border:1px solid #000;margin-bottom:.25em}.tag-children-container{margin-left:.5em;margin-right:.5em}.tag-container{margin-left:.25em;font-weight:700}.tag-container .edit-tag-button{text-decoration:underline;cursor:pointer;font-weight:100}.tag-graph div.create-tag-button-container{text-decoration:underline;cursor:pointer;margin-top:.5em}div.tag.card{cursor:pointer;margin-bottom:0}div.tokenizer-container{display:flex}div.tokenizer-container div.pending-token-container{width:100%}div.tokens-container{display:flex;margin-right:.5em}div.rendered-token{display:flex;padding:.1em .25em;margin-top:-3px;margin-bottom:0}div.rendered-token div.remove-token{margin-left:.25em;cursor:pointer}div.tokenizer-container div.pending-state-container{width:100%}div.tokenizer-container div.autocomplete-token-container{position:absolute;background:#fff;border-radius:0 3px 3px;border:1px solid rgba(0,0,0,.2);border-top:none;z-index:3}div.tokenizer-container div.autocomplete-token-container div.autocomplete-token{padding:.5em;border-bottom:1px solid rgba(0,0,0,.2)}div.tokenizer-container div.autocomplete-token-container:last-child{border-bottom:none}div.tokenizer-container div.autocomplete-token-container div.autocomplete-token:hover{cursor:pointer;background-color:#f6f9fc}div.tokenizer-container div.autocomplete-token-container div.autocomplete-token.-selected{background-color:#f6f9fc}div.modal-container div.background{position:fixed;left:0;top:0;width:100%;height:100%;background-color:rgba(0,0,0,.2);z-index:4;display:flex;align-items:center;justify-content:center}div.modal.card{min-width:350px}div.modal h3{margin:0}div.modal-container div.cancel-button-container{cursor:pointer;float:right}div.modal label{display:block;padding-top:.5em}div.modal input,select,textarea{width:100%;background-color:#fff;border:1px solid rgba(0,0,0,.4);margin:0;padding:0}div.modal input[type=button]{margin-top:.5em;height:30px}div.modal div.rendered-token{margin-top:0}div.modal div.checkbox-container{display:flex;align-items:center}div.modal div.checkbox-container input{width:30px;height:15px;margin-top:7px}div.merged-container{display:flex}div.main-pane{max-width:67%;min-width:67%;height:calc(100vh - 97px);display:flex;flex-direction:column}div.merged-task-container{height:100%;overflow-y:auto}div.right-pane{max-width:33%;min-width:33%;height:calc(100vh - 97px)}div.main-pane div.task-board{height:100%}div.main-pane div.task-board div.full-column-container{overflow-y:scroll}div.right-pane div.calendar div.full-column-container{padding:0}div.right-pane div.calendar div.tag-selector-container{margin-left:0}div.right-pane div.calendar div.column-container,div.right-pane div.calendar div.column-container.single-day,div.right-pane div.calendar div.column-container.single-day div.current-time-cursor,div.right-pane div.calendar div.column-container.single-day td,div.right-pane div.calendar div.column-container td,div.right-pane div.calendar div.column-header,div.right-pane div.calendar div.column-header.single-day{min-width:0}div.right-pane div.calendar div.column-container.-times,div.right-pane div.calendar div.column-header.-times{max-width:70px}div.right-pane div.calendar div.options div.pending-token-container input{width:100%}div.right-pane div.calendar div.options div.tag-selector-label{flex-shrink:0}div.right-pane div.merged-capture-container{height:100%}div.right-pane div.merged-capture-container div.capture-list-container{height:100%;display:flex;flex-direction:column}div.right-pane div.merged-capture-container div.capture-list-container div.capture-list-scroll-container{overflow-y:auto}div.note.card{margin:10px 20px}div.note div.note-header{display:flex;justify-content:space-between}div.note div.note-header div.note-title{font-size:2em;margin-bottom:.25em}div.note div.note-content img{max-width:100%;max-height:480px}div.note div.note-content .checked{color:rgba(0,0,0,.5);text-decoration:line-through}div.note div.note-content h1,h2,h3,p{margin-top:0;margin-bottom:2px}div.note-tags-container{display:flex}div.note-tags-container div.card{margin-left:.25em;margin-bottom:0;padding:.1em .25em}div.note-header div.note-right-header{display:flex}div.note-header div.note-options{cursor:pointer;margin-right:.5em}div.edit-note-container textarea{font-family:Courier New,Courier,monospace!important;min-width:480px}div.create-capture-container input,select,textarea{width:100%;background-color:#fff;border:1px solid rgba(0,0,0,.4);margin:0;padding:0}div.create-capture-container input[type=button]{margin-top:.5em;height:30px}div.capturer-container div.create-capture-container textarea{min-height:200px;font-size:larger}div.capturer-container div.create-capture-container input[type=button]{height:2em;font-size:1.7em;-webkit-appearance:none}div.capturer-container{font-size:2em;line-height:2}div.capturer-container div.capture-list-container div.capture-list-options{padding:0}div.capture-list-container .card{margin:.5em}div.capture-list-container div.capture-list-options{background-color:#fff;padding:0 1em 2em}div.capture-container.card{display:flex;justify-content:space-between}div.capture-container.card .capture-content{overflow:auto}div.capture-container.card .capture-options-container{margin-left:.5em}div.capture-container.card .capture-options-container .capture-delete{font-weight:700;cursor:pointer}div.captured-everything{margin:auto;text-align:center}div#toast-container{position:fixed;left:2em;bottom:2em;z-index:8;background-color:#47525d;color:#f6f9fc;padding:1em}div#toast-container.hidden{display:none}',""])},function(e,t){e.exports=function(e){return"string"!=typeof e?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),/["'() \t\n]/.test(e)?'"'+e.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':e)}},function(e,t,n){e.exports=n.p+"/static/fonts/open-sans-v14-latin-300.woff2"},function(e,t,n){e.exports=n.p+"/static/fonts/open-sans-v14-latin-300.woff"},function(e,t,n){e.exports=n.p+"/static/fonts/open-sans-v14-latin-300.ttf"},function(e,t,n){e.exports=n.p+"/static/fonts/open-sans-v14-latin-regular.woff2"},function(e,t,n){e.exports=n.p+"/static/fonts/open-sans-v14-latin-regular.woff"},function(e,t,n){e.exports=n.p+"/static/fonts/open-sans-v14-latin-regular.ttf"},function(e,t,n){e.exports=n.p+"/static/fonts/open-sans-v14-latin-700.woff2"},function(e,t,n){e.exports=n.p+"/static/fonts/open-sans-v14-latin-700.woff"},function(e,t,n){e.exports=n.p+"/static/fonts/open-sans-v14-latin-700.ttf"},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var a,i=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?e:(a=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:r+i.replace(/^\.\//,""),"url("+JSON.stringify(a)+")")})}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=n(37),o=n(38),s=n(6),c=function(e){function t(t){var n=e.call(this,t)||this;return n.state=n.getState(t),n}return r(t,e),t.prototype.componentWillReceiveProps=function(e){this.setState(this.getState(e))},t.prototype.getState=function(e){var t=this.computeTagGraph(e.tagsById);return{tagGraph:t[0],rootTagIds:t[1],tagsById:e.tagsById,editingTag:null,creatingTag:!1}},t.prototype.computeTagGraph=function(e){var t={},n={};Object.keys(e).forEach(function(e){n[e]=!0}),Object.keys(e).forEach(function(r){for(var a=e[+r],i=[],o=0,s=a.childTagIds;o<s.length;o++){var c=s[o];i.push(c),n.hasOwnProperty(""+c)&&delete n[c]}t[a.id]=i});var r=[];return Object.keys(n).forEach(function(e){r.push(+e)}),[t,r]},t.prototype.onClick=function(e,t){this.setState({editingTag:e}),t.preventDefault(),t.stopPropagation()},t.prototype.clearEditingTag=function(){this.setState({editingTag:null})},t.prototype.toggleCreatingTag=function(){this.setState({creatingTag:!this.state.creatingTag})},t.prototype.renderTagById=function(e){var t=this,n=this.state.tagsById[e];return a.createElement("div",{className:"tag-container",key:n.id},n.name," -"," ",a.createElement("span",{className:"edit-tag-button",onClick:this.onClick.bind(this,n)},"edit"),function(){if(0!=n.childTagIds.length)return a.createElement("div",{className:"tag-children-container"},n.childTagIds.map(t.renderTagById.bind(t)))}())},t.prototype.renderFromRootTagId=function(e){return a.createElement("div",{className:"tags-root-container",key:e},this.renderTagById(e))},t.prototype.renderTags=function(){return a.createElement("div",{className:"tags-container"},this.state.rootTagIds.map(this.renderFromRootTagId.bind(this)))},t.prototype.renderEditingTag=function(){if(this.state.editingTag)return a.createElement(s.ModalComponent,{cancelFunc:this.clearEditingTag.bind(this)},a.createElement(i.EditTagComponent,{tag:this.state.editingTag,tagsById:this.state.tagsById,updateTag:this.props.updateTag,deleteTag:this.props.deleteTag}))},t.prototype.renderCreateTag=function(){return this.state.creatingTag?a.createElement(s.ModalComponent,{cancelFunc:this.toggleCreatingTag.bind(this)},a.createElement(o.CreateTagComponent,{meUser:this.props.meUser,createTag:this.props.createTag,tagsById:this.state.tagsById})):a.createElement("div",{className:"create-tag-button-container"},a.createElement("a",{onClick:this.toggleCreatingTag.bind(this)},"Create New"))},t.prototype.render=function(){return a.createElement("div",{className:"tag-graph"},this.renderTags(),this.renderEditingTag(),this.renderCreateTag())},t}(a.Component);t.TagGraphComponent=c},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=n(4),o=function(e){function t(t){var n=e.call(this,t)||this;return n.state={tag:t.tag,tagsById:t.tagsById},n}return r(t,e),t.prototype.componentWillReceiveProps=function(e){this.setState({tag:e.tag,tagsById:e.tagsById})},t.prototype.submitForm=function(e){"save"==e?this.props.updateTag(this.state.tag):this.props.deleteTag(this.state.tag)},t.prototype.updateName=function(e){this.state.tag.name=e.target.value,this.setState(this.state)},t.prototype.getCurrentChildren=function(){var e=this,t=[];return this.state.tag.childTagIds.forEach(function(n){var r=e.state.tagsById[n];t.push({label:r.name,value:r.id})}),t},t.prototype.getAllTagNames=function(){var e=this,t=[];return Object.keys(this.state.tagsById).forEach(function(n){var r=e.state.tagsById[+n];t.push({label:r.name,value:r.id})}),t},t.prototype.retrieveChildNames=function(e){this.state.tag.childTagIds=e.map(function(e){return e.value}),this.setState(this.state)},t.prototype.renderForm=function(){return a.createElement("div",null,a.createElement("div",{className:"name-container"},a.createElement("label",{htmlFor:"name"},"Name: "),a.createElement("input",{type:"text",name:"name",value:this.state.tag.name,onChange:this.updateName.bind(this)})),a.createElement("div",{className:"children-container"},a.createElement("label",{htmlFor:"children"},"Children: "),a.createElement(i.TokenizerComponent,{onChange:this.retrieveChildNames.bind(this),initialValues:this.getCurrentChildren(),possibleTokens:this.getAllTagNames()})),a.createElement("input",{type:"button",value:"delete",onClick:this.submitForm.bind(this,"delete")}),a.createElement("input",{type:"button",value:"save",onClick:this.submitForm.bind(this,"save")}))},t.prototype.render=function(){return a.createElement("div",{className:"edit-tag-container"},a.createElement("h3",null,"Tag Edit Form:"),this.renderForm())},t}(a.Component);t.EditTagComponent=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=function(e){function t(t){var n=e.call(this,t)||this;return n.state={tag:{id:0,name:"",childTagIds:[],ownerId:n.props.meUser.id}},n}return r(t,e),t.prototype.submitForm=function(){this.props.createTag(this.state.tag)},t.prototype.updateName=function(e){this.state.tag.name=e.target.value,this.setState(this.state)},t.prototype.renderForm=function(){return a.createElement("div",null,a.createElement("div",{className:"name-container"},a.createElement("label",{htmlFor:"name"},"Name: "),a.createElement("input",{type:"text",name:"name",value:this.state.tag.name,onChange:this.updateName.bind(this)})),a.createElement("input",{type:"button",value:"create",onClick:this.submitForm.bind(this)}))},t.prototype.render=function(){return a.createElement("div",{className:"create-tag-container"},a.createElement("h3",null,"Create Tag Form:"),this.renderForm())},t}(a.Component);t.CreateTagComponent=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0}),n(40);var a=n(0),i=n(4),o=n(42),s=n(1),c=function(e){function t(t){var n=e.call(this,t)||this;return t.createMode?n.state={task:n._getEmptyTask(t)}:n.state={task:t.task},n}return r(t,e),t.prototype.componentWillReceiveProps=function(e){e.createMode?this.setState({task:this._getEmptyTask(e)}):this.setState({task:e.task})},t.prototype._getEmptyTask=function(e){var t={id:0,title:"",description:"",authorId:e.meUser.id,ownerId:e.meUser.id,tagIds:[],priority:0,state:0,eventIds:[],expectedDurationSecs:0,dueTime:0,stateUpdatedTime:0};return e.initialPriority&&(t.priority=e.initialPriority),e.initialState&&(t.state=e.initialState),e.initialTags&&(t.tagIds=e.initialTags),t},t.prototype.submitForm=function(e){if("save"==e)this.props.updateTask(this.state.task);else if("delete"==e)this.props.deleteTask(this.state.task);else{if("create"!=e)throw Error("Unknown submit type!");this.props.createTask(this.state.task)}},t.prototype.onKeyDownCreate=function(e){"Enter"==e.key&&this.props.createMode&&this.submitForm("create")},t.prototype.updateAttr=function(e,t){"state"==e&&(this.state.task.stateUpdatedTime=1e3*s().unix()),this.state.task[e]=t.target.value,this.setState(this.state)},t.prototype.updateEstimate=function(e){var t=e.target.value;this.state.task.expectedDurationSecs=60*t,this.setState(this.state)},t.prototype.updateDueTime=function(e){var t=0;e&&(t=1e3*e.unix()),this.state.task.dueTime=t,this.setState(this.state)},t.prototype.getCurrentTags=function(){var e=this,t=[];return this.state.task.tagIds.forEach(function(n){var r=e.props.tagsById[n];t.push({label:r.name,value:r.id})}),t},t.prototype.getAllTagNames=function(){var e=this,t=[];return Object.keys(this.props.tagsById).forEach(function(n){var r=e.props.tagsById[+n];t.push({label:r.name,value:r.id})}),t},t.prototype.retrieveTagNames=function(e){this.state.task.tagIds=e.map(function(e){return e.value}),this.setState(this.state)},t.prototype.renderFormTitle=function(){return this.props.createMode?a.createElement("h3",null,"Create Task"):a.createElement("h3",null,"Editing T",this.state.task.id)},t.prototype.renderButtons=function(){return this.props.createMode?a.createElement("div",{className:"edit-task-button-container"},a.createElement("input",{type:"button",value:"create",onClick:this.submitForm.bind(this,"create")})):a.createElement("div",{className:"edit-task-button-container"},a.createElement("input",{type:"button",value:"delete",onClick:this.submitForm.bind(this,"delete")}),a.createElement("input",{type:"button",value:"save",onClick:this.submitForm.bind(this,"save")}))},t.prototype.renderDueTime=function(){if(this.state.task.dueTime>0){var e=s(this.state.task.dueTime).toDate();return a.createElement(o,{value:e,timeFormat:!1,closeOnSelect:!0,onChange:this.updateDueTime.bind(this)})}return a.createElement(o,{timeFormat:!1,closeOnSelect:!0,onChange:this.updateDueTime.bind(this)})},t.prototype.renderForm=function(){return a.createElement("div",null,a.createElement("div",{className:"title-container"},a.createElement("label",{htmlFor:"title"},"Title: "),a.createElement("input",{type:"text",name:"title",value:this.state.task.title,onKeyDown:this.onKeyDownCreate.bind(this),onChange:this.updateAttr.bind(this,"title")})),a.createElement("div",{className:"description-container"},a.createElement("label",{htmlFor:"description"},"Description: "),a.createElement("textarea",{name:"description",value:this.state.task.description,onChange:this.updateAttr.bind(this,"description")})),a.createElement("div",{className:"estimate-container"},a.createElement("label",{htmlFor:"estimate"},"Estimated Time (minutes): "),a.createElement("input",{type:"number",name:"estimate",value:Math.round(this.state.task.expectedDurationSecs/60),onChange:this.updateEstimate.bind(this)})),a.createElement("div",{className:"priority-selector"},a.createElement("label",{htmlFor:"priority"},"Priority: "),a.createElement("select",{name:"priority",value:this.state.task.priority,onChange:this.updateAttr.bind(this,"priority")},a.createElement("option",{value:"0"},"Unknown"),a.createElement("option",{value:"500"},"Highest"),a.createElement("option",{value:"400"},"High"),a.createElement("option",{value:"300"},"Normal"),a.createElement("option",{value:"200"},"Low"),a.createElement("option",{value:"100"},"Lowest"))),a.createElement("div",{className:"state-selector"},a.createElement("label",{htmlFor:"state"},"Status: "),a.createElement("select",{name:"state",value:this.state.task.state,onChange:this.updateAttr.bind(this,"state")},a.createElement("option",{value:"0"},"Open"),a.createElement("option",{value:"500"},"In Progress"),a.createElement("option",{value:"750"},"Blocked"),a.createElement("option",{value:"900"},"Project"),a.createElement("option",{value:"1000"},"Closed"))),a.createElement("div",{className:"due-time-selector"},a.createElement("label",{htmlFor:"dueTime"},"Due date:"),this.renderDueTime()),a.createElement("div",{className:"tag-tokenizer-container"},a.createElement("label",null,"Tags:"),a.createElement(i.TokenizerComponent,{onChange:this.retrieveTagNames.bind(this),initialValues:this.getCurrentTags(),possibleTokens:this.getAllTagNames()})),this.renderButtons())},t.prototype.render=function(){return a.createElement("div",{className:"edit-task-container"},this.renderFormTitle(),this.renderForm())},t}(a.Component);t.EditTaskComponent=c},function(e,t,n){var r=n(41);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(14)(r,a);r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(13)(!1)).push([e.i,'/*!\n * https://github.com/YouCanBookMe/react-datetime\n */.rdt{position:relative}.rdtPicker{display:none;position:absolute;width:250px;padding:4px;margin-top:1px;z-index:99999!important;background:#fff;box-shadow:0 1px 3px rgba(0,0,0,.1);border:1px solid #f9f9f9}.rdtOpen .rdtPicker{display:block}.rdtStatic .rdtPicker{box-shadow:none;position:static}.rdtPicker .rdtTimeToggle{text-align:center}.rdtPicker table{width:100%;margin:0}.rdtPicker td,.rdtPicker th{text-align:center;height:28px}.rdtPicker td{cursor:pointer}.rdtPicker .rdtTimeToggle:hover,.rdtPicker td.rdtDay:hover,.rdtPicker td.rdtHour:hover,.rdtPicker td.rdtMinute:hover,.rdtPicker td.rdtSecond:hover{background:#eee;cursor:pointer}.rdtPicker td.rdtNew,.rdtPicker td.rdtOld{color:#999}.rdtPicker td.rdtToday{position:relative}.rdtPicker td.rdtToday:before{content:"";display:inline-block;border-left:7px solid transparent;border-bottom:7px solid #428bca;border-top-color:rgba(0,0,0,.2);position:absolute;bottom:4px;right:4px}.rdtPicker td.rdtActive,.rdtPicker td.rdtActive:hover{background-color:#428bca;color:#fff;text-shadow:0 -1px 0 rgba(0,0,0,.25)}.rdtPicker td.rdtActive.rdtToday:before{border-bottom-color:#fff}.rdtPicker td.rdtDisabled,.rdtPicker td.rdtDisabled:hover{background:none;color:#999;cursor:not-allowed}.rdtPicker td span.rdtOld{color:#999}.rdtPicker td span.rdtDisabled,.rdtPicker td span.rdtDisabled:hover{background:none;color:#999;cursor:not-allowed}.rdtPicker th{border-bottom:1px solid #f9f9f9}.rdtPicker .dow{width:14.2857%;border-bottom:none;cursor:default}.rdtPicker th.rdtSwitch{width:100px}.rdtPicker th.rdtNext,.rdtPicker th.rdtPrev{font-size:21px;vertical-align:top}.rdtNext span,.rdtPrev span{display:block;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.rdtPicker th.rdtDisabled,.rdtPicker th.rdtDisabled:hover{background:none;color:#999;cursor:not-allowed}.rdtPicker thead tr:first-child th{cursor:pointer}.rdtPicker thead tr:first-child th:hover{background:#eee}.rdtPicker tfoot{border-top:1px solid #f9f9f9}.rdtPicker button{border:none;background:none;cursor:pointer}.rdtPicker button:hover{background-color:#eee}.rdtPicker thead button{width:100%;height:100%}td.rdtMonth,td.rdtYear{height:50px;width:25%;cursor:pointer}td.rdtMonth:hover,td.rdtYear:hover{background:#eee}.rdtCounters{display:inline-block}.rdtCounters>div{float:left}.rdtCounter{height:100px;width:40px}.rdtCounterSeparator{line-height:100px}.rdtCounter .rdtBtn{height:40%;line-height:40px;cursor:pointer;display:block;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.rdtCounter .rdtBtn:hover{background:#eee}.rdtCounter .rdtCount{height:20%;font-size:1.2em}.rdtMilli{vertical-align:middle;padding-left:8px;width:48px}.rdtMilli input{width:100%;font-size:1.2em;margin-top:37px}.rdtTime td{cursor:default}',""])},function(e,t,n){"use strict";var r=n(18),a=n(2),i=n(5),o=n(1),s=n(0),c=n(49),d=Object.freeze({YEARS:"years",MONTHS:"months",DAYS:"days",TIME:"time"}),l=a,p=i({propTypes:{onFocus:l.func,onBlur:l.func,onChange:l.func,onViewModeChange:l.func,locale:l.string,utc:l.bool,input:l.bool,inputProps:l.object,timeConstraints:l.object,viewMode:l.oneOf([d.YEARS,d.MONTHS,d.DAYS,d.TIME]),isValidDate:l.func,open:l.bool,strictParsing:l.bool,closeOnSelect:l.bool,closeOnTab:l.bool},getInitialState:function(){var e=this.getStateFromProps(this.props);return void 0===e.open&&(e.open=!this.props.input),e.currentView=this.props.dateFormat?this.props.viewMode||e.updateOn||d.DAYS:d.TIME,e},parseDate:function(e,t){var n;return e&&"string"==typeof e?n=this.localMoment(e,t.datetime):e&&(n=this.localMoment(e)),n&&!n.isValid()&&(n=null),n},getStateFromProps:function(e){var t,n,r,a,i=this.getFormats(e),o=e.value||e.defaultValue;return t=this.parseDate(o,i),n=this.parseDate(e.viewDate,i),n=t?t.clone().startOf("month"):n?n.clone().startOf("month"):this.localMoment().startOf("month"),r=this.getUpdateOn(i),a=t?t.format(i.datetime):o.isValid&&!o.isValid()?"":o||"",{updateOn:r,inputFormat:i.datetime,viewDate:n,selectedDate:t,inputValue:a,open:e.open}},getUpdateOn:function(e){return e.date.match(/[lLD]/)?d.DAYS:-1!==e.date.indexOf("M")?d.MONTHS:-1!==e.date.indexOf("Y")?d.YEARS:d.DAYS},getFormats:function(e){var t={date:e.dateFormat||"",time:e.timeFormat||""},n=this.localMoment(e.date,null,e).localeData();return!0===t.date?t.date=n.longDateFormat("L"):this.getUpdateOn(t)!==d.DAYS&&(t.time=""),!0===t.time&&(t.time=n.longDateFormat("LT")),t.datetime=t.date&&t.time?t.date+" "+t.time:t.date||t.time,t},componentWillReceiveProps:function(e){var t=this.getFormats(e),n={};if(e.value===this.props.value&&t.datetime===this.getFormats(this.props).datetime||(n=this.getStateFromProps(e)),void 0===n.open&&(void 0!==e.open?n.open=e.open:this.props.closeOnSelect&&this.state.currentView!==d.TIME?n.open=!1:n.open=this.state.open),e.viewMode!==this.props.viewMode&&(n.currentView=e.viewMode),e.locale!==this.props.locale){if(this.state.viewDate){var r=this.state.viewDate.clone().locale(e.locale);n.viewDate=r}if(this.state.selectedDate){var a=this.state.selectedDate.clone().locale(e.locale);n.selectedDate=a,n.inputValue=a.format(t.datetime)}}e.utc!==this.props.utc&&(e.utc?(this.state.viewDate&&(n.viewDate=this.state.viewDate.clone().utc()),this.state.selectedDate&&(n.selectedDate=this.state.selectedDate.clone().utc(),n.inputValue=n.selectedDate.format(t.datetime))):(this.state.viewDate&&(n.viewDate=this.state.viewDate.clone().local()),this.state.selectedDate&&(n.selectedDate=this.state.selectedDate.clone().local(),n.inputValue=n.selectedDate.format(t.datetime)))),e.viewDate!==this.props.viewDate&&(n.viewDate=o(e.viewDate)),this.setState(n)},onInputChange:function(e){var t=null===e.target?e:e.target.value,n=this.localMoment(t,this.state.inputFormat),r={inputValue:t};return n.isValid()&&!this.props.value?(r.selectedDate=n,r.viewDate=n.clone().startOf("month")):r.selectedDate=null,this.setState(r,function(){return this.props.onChange(n.isValid()?n:this.state.inputValue)})},onInputKey:function(e){9===e.which&&this.props.closeOnTab&&this.closeCalendar()},showView:function(e){var t=this;return function(){t.state.currentView!==e&&t.props.onViewModeChange(e),t.setState({currentView:e})}},setDate:function(e){var t=this,n={month:d.DAYS,year:d.MONTHS};return function(r){t.setState({viewDate:t.state.viewDate.clone()[e](parseInt(r.target.getAttribute("data-value"),10)).startOf(e),currentView:n[e]}),t.props.onViewModeChange(n[e])}},addTime:function(e,t,n){return this.updateTime("add",e,t,n)},subtractTime:function(e,t,n){return this.updateTime("subtract",e,t,n)},updateTime:function(e,t,n,r){var a=this;return function(){var i={},o=r?"selectedDate":"viewDate";i[o]=a.state[o].clone()[e](t,n),a.setState(i)}},allowedSetTime:["hours","minutes","seconds","milliseconds"],setTime:function(e,t){var n,r=this.allowedSetTime.indexOf(e)+1,a=this.state,i=(a.selectedDate||a.viewDate).clone();for(i[e](t);r<this.allowedSetTime.length;r++)i[n=this.allowedSetTime[r]](i[n]());this.props.value||this.setState({selectedDate:i,inputValue:i.format(a.inputFormat)}),this.props.onChange(i)},updateSelectedDate:function(e,t){var n,r=e.target,a=0,i=this.state.viewDate,o=this.state.selectedDate||i;if(-1!==r.className.indexOf("rdtDay")?(-1!==r.className.indexOf("rdtNew")?a=1:-1!==r.className.indexOf("rdtOld")&&(a=-1),n=i.clone().month(i.month()+a).date(parseInt(r.getAttribute("data-value"),10))):-1!==r.className.indexOf("rdtMonth")?n=i.clone().month(parseInt(r.getAttribute("data-value"),10)).date(o.date()):-1!==r.className.indexOf("rdtYear")&&(n=i.clone().month(o.month()).date(o.date()).year(parseInt(r.getAttribute("data-value"),10))),n.hours(o.hours()).minutes(o.minutes()).seconds(o.seconds()).milliseconds(o.milliseconds()),this.props.value)this.props.closeOnSelect&&t&&this.closeCalendar();else{var s=!(this.props.closeOnSelect&&t);s||this.props.onBlur(n),this.setState({selectedDate:n,viewDate:n.clone().startOf("month"),inputValue:n.format(this.state.inputFormat),open:s})}this.props.onChange(n)},openCalendar:function(e){this.state.open||this.setState({open:!0},function(){this.props.onFocus(e)})},closeCalendar:function(){this.setState({open:!1},function(){this.props.onBlur(this.state.selectedDate||this.state.inputValue)})},handleClickOutside:function(){this.props.input&&this.state.open&&!this.props.open&&!this.props.disableOnClickOutside&&this.setState({open:!1},function(){this.props.onBlur(this.state.selectedDate||this.state.inputValue)})},localMoment:function(e,t,n){var r=((n=n||this.props).utc?o.utc:o)(e,t,n.strictParsing);return n.locale&&r.locale(n.locale),r},componentProps:{fromProps:["value","isValidDate","renderDay","renderMonth","renderYear","timeConstraints"],fromState:["viewDate","selectedDate","updateOn"],fromThis:["setDate","setTime","showView","addTime","subtractTime","updateSelectedDate","localMoment","handleClickOutside"]},getComponentProps:function(){var e=this,t=this.getFormats(this.props),n={dateFormat:t.date,timeFormat:t.time};return this.componentProps.fromProps.forEach(function(t){n[t]=e.props[t]}),this.componentProps.fromState.forEach(function(t){n[t]=e.state[t]}),this.componentProps.fromThis.forEach(function(t){n[t]=e[t]}),n},render:function(){var e="rdt"+(this.props.className?Array.isArray(this.props.className)?" "+this.props.className.join(" "):" "+this.props.className:""),t=[];if(this.props.input){var n=r({type:"text",className:"form-control",onClick:this.openCalendar,onFocus:this.openCalendar,onChange:this.onInputChange,onKeyDown:this.onInputKey,value:this.state.inputValue},this.props.inputProps);t=this.props.renderInput?[s.createElement("div",{key:"i"},this.props.renderInput(n,this.openCalendar,this.closeCalendar))]:[s.createElement("input",r({key:"i"},n))]}else e+=" rdtStatic";return this.state.open&&(e+=" rdtOpen"),s.createElement("div",{className:e},t.concat(s.createElement("div",{key:"dt",className:"rdtPicker"},s.createElement(c,{view:this.state.currentView,viewProps:this.getComponentProps(),onClickOutside:this.handleClickOutside}))))}});p.defaultProps={className:"",defaultValue:"",inputProps:{},input:!0,onFocus:function(){},onBlur:function(){},onChange:function(){},onViewModeChange:function(){},timeFormat:!0,timeConstraints:{},dateFormat:!0,strictParsing:!0,closeOnSelect:!1,closeOnTab:!0,utc:!1},p.moment=o,e.exports=p},function(e,t,n){"use strict";var r=n(44);function a(){}e.exports=function(){function e(e,t,n,a,i,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=a,n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";var r=n(46),a=n(47),i=n(48),o="mixins";e.exports=function(e,t,n){var s=[],c={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",UNSAFE_componentWillMount:"DEFINE_MANY",UNSAFE_componentWillReceiveProps:"DEFINE_MANY",UNSAFE_componentWillUpdate:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},d={getDerivedStateFromProps:"DEFINE_MANY_MERGED"},l={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var n=0;n<t.length;n++)u(e,t[n])},childContextTypes:function(e,t){e.childContextTypes=r({},e.childContextTypes,t)},contextTypes:function(e,t){e.contextTypes=r({},e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=m(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,t){e.propTypes=r({},e.propTypes,t)},statics:function(e,t){!function(e,t){if(t)for(var n in t){var r=t[n];if(t.hasOwnProperty(n)){var a=n in l;i(!a,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',n);var o=n in e;if(o){var s=d.hasOwnProperty(n)?d[n]:null;return i("DEFINE_MANY_MERGED"===s,"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",n),void(e[n]=m(e[n],r))}e[n]=r}}}(e,t)},autobind:function(){}};function p(e,t){var n=c.hasOwnProperty(t)?c[t]:null;b.hasOwnProperty(t)&&i("OVERRIDE_BASE"===n,"ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",t),e&&i("DEFINE_MANY"===n||"DEFINE_MANY_MERGED"===n,"ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",t)}function u(e,n){if(n){i("function"!=typeof n,"ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),i(!t(n),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var r=e.prototype,a=r.__reactAutoBindPairs;for(var s in n.hasOwnProperty(o)&&l.mixins(e,n.mixins),n)if(n.hasOwnProperty(s)&&s!==o){var d=n[s],u=r.hasOwnProperty(s);if(p(u,s),l.hasOwnProperty(s))l[s](e,d);else{var h=c.hasOwnProperty(s);if("function"!=typeof d||h||u||!1===n.autobind)if(u){var g=c[s];i(h&&("DEFINE_MANY_MERGED"===g||"DEFINE_MANY"===g),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",g,s),"DEFINE_MANY_MERGED"===g?r[s]=m(r[s],d):"DEFINE_MANY"===g&&(r[s]=f(r[s],d))}else r[s]=d;else a.push(s,d),r[s]=d}}}}function h(e,t){for(var n in i(e&&t&&"object"==typeof e&&"object"==typeof t,"mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects."),t)t.hasOwnProperty(n)&&(i(void 0===e[n],"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",n),e[n]=t[n]);return e}function m(e,t){return function(){var n=e.apply(this,arguments),r=t.apply(this,arguments);if(null==n)return r;if(null==r)return n;var a={};return h(a,n),h(a,r),a}}function f(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function g(e,t){return t.bind(e)}var v={componentDidMount:function(){this.__isMounted=!0}},y={componentWillUnmount:function(){this.__isMounted=!1}},b={replaceState:function(e,t){this.updater.enqueueReplaceState(this,e,t)},isMounted:function(){return!!this.__isMounted}},k=function(){};return r(k.prototype,e.prototype,b),function(e){var t=function(e){return e}(function(e,r,o){this.__reactAutoBindPairs.length&&function(e){for(var t=e.__reactAutoBindPairs,n=0;n<t.length;n+=2){var r=t[n],a=t[n+1];e[r]=g(e,a)}}(this),this.props=e,this.context=r,this.refs=a,this.updater=o||n,this.state=null;var s=this.getInitialState?this.getInitialState():null;i("object"==typeof s&&!Array.isArray(s),"%s.getInitialState(): must return an object or null",t.displayName||"ReactCompositeComponent"),this.state=s});for(var r in t.prototype=new k,t.prototype.constructor=t,t.prototype.__reactAutoBindPairs=[],s.forEach(u.bind(null,t)),u(t,v),u(t,e),u(t,y),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),i(t.prototype.render,"createClass(...): Class specification must implement a `render` method."),c)t.prototype[r]||(t.prototype[r]=null);return t}}},function(e,t,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,o,s=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),c=1;c<arguments.length;c++){for(var d in n=Object(arguments[c]))a.call(n,d)&&(s[d]=n[d]);if(r){o=r(n);for(var l=0;l<o.length;l++)i.call(n,o[l])&&(s[o[l]]=n[o[l]])}}return s}},function(e,t,n){"use strict";e.exports={}},function(e,t,n){"use strict";var r=function(e){};e.exports=function(e,t,n,a,i,o,s,c){if(r(t),!e){var d;if(void 0===t)d=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,a,i,o,s,c],p=0;(d=new Error(t.replace(/%s/g,function(){return l[p++]}))).name="Invariant Violation"}throw d.framesToPop=1,d}}},function(e,t,n){"use strict";var r=n(0),a=n(5)({viewComponents:{days:n(50),months:n(51),years:n(52),time:n(53)},render:function(){return r.createElement(this.viewComponents[this.props.view],this.props.viewProps)}});e.exports=a},function(e,t,n){"use strict";var r=n(0),a=n(5),i=n(1),o=(0,n(8).default)(a({render:function(){var e,t=this.renderFooter(),n=this.props.viewDate,a=n.localeData();return e=[r.createElement("thead",{key:"th"},[r.createElement("tr",{key:"h"},[r.createElement("th",{key:"p",className:"rdtPrev",onClick:this.props.subtractTime(1,"months")},r.createElement("span",{},"")),r.createElement("th",{key:"s",className:"rdtSwitch",onClick:this.props.showView("months"),colSpan:5,"data-value":this.props.viewDate.month()},a.months(n)+" "+n.year()),r.createElement("th",{key:"n",className:"rdtNext",onClick:this.props.addTime(1,"months")},r.createElement("span",{},""))]),r.createElement("tr",{key:"d"},this.getDaysOfWeek(a).map(function(e,t){return r.createElement("th",{key:e+t,className:"dow"},e)}))]),r.createElement("tbody",{key:"tb"},this.renderDays())],t&&e.push(t),r.createElement("div",{className:"rdtDays"},r.createElement("table",{},e))},getDaysOfWeek:function(e){var t=e._weekdaysMin,n=e.firstDayOfWeek(),r=[],a=0;return t.forEach(function(e){r[(7+a++-n)%7]=e}),r},renderDays:function(){var e,t,n,a,o=this.props.viewDate,s=this.props.selectedDate&&this.props.selectedDate.clone(),c=o.clone().subtract(1,"months"),d=o.year(),l=o.month(),p=[],u=[],h=this.props.renderDay||this.renderDay,m=this.props.isValidDate||this.alwaysValidDate;c.date(c.daysInMonth()).startOf("week");for(var f=c.clone().add(42,"d");c.isBefore(f);)e="rdtDay",a=c.clone(),c.year()===d&&c.month()<l||c.year()<d?e+=" rdtOld":(c.year()===d&&c.month()>l||c.year()>d)&&(e+=" rdtNew"),s&&c.isSame(s,"day")&&(e+=" rdtActive"),c.isSame(i(),"day")&&(e+=" rdtToday"),(t=!m(a,s))&&(e+=" rdtDisabled"),n={key:c.format("M_D"),"data-value":c.date(),className:e},t||(n.onClick=this.updateSelectedDate),u.push(h(n,a,s)),7===u.length&&(p.push(r.createElement("tr",{key:c.format("M_D")},u)),u=[]),c.add(1,"d");return p},updateSelectedDate:function(e){this.props.updateSelectedDate(e,!0)},renderDay:function(e,t){return r.createElement("td",e,t.date())},renderFooter:function(){if(!this.props.timeFormat)return"";var e=this.props.selectedDate||this.props.viewDate;return r.createElement("tfoot",{key:"tf"},r.createElement("tr",{},r.createElement("td",{onClick:this.props.showView("time"),colSpan:7,className:"rdtTimeToggle"},e.format(this.props.timeFormat))))},alwaysValidDate:function(){return 1},handleClickOutside:function(){this.props.handleClickOutside()}}));e.exports=o},function(e,t,n){"use strict";var r=n(0),a=n(5),i=(0,n(8).default)(a({render:function(){return r.createElement("div",{className:"rdtMonths"},[r.createElement("table",{key:"a"},r.createElement("thead",{},r.createElement("tr",{},[r.createElement("th",{key:"prev",className:"rdtPrev",onClick:this.props.subtractTime(1,"years")},r.createElement("span",{},"")),r.createElement("th",{key:"year",className:"rdtSwitch",onClick:this.props.showView("years"),colSpan:2,"data-value":this.props.viewDate.year()},this.props.viewDate.year()),r.createElement("th",{key:"next",className:"rdtNext",onClick:this.props.addTime(1,"years")},r.createElement("span",{},""))]))),r.createElement("table",{key:"months"},r.createElement("tbody",{key:"b"},this.renderMonths()))])},renderMonths:function(){for(var e,t,n,a,i,o=this.props.selectedDate,s=this.props.viewDate.month(),c=this.props.viewDate.year(),d=[],l=0,p=[],u=this.props.renderMonth||this.renderMonth,h=this.props.isValidDate||this.alwaysValidDate;l<12;)e="rdtMonth",i=(n=this.props.viewDate.clone().set({year:c,month:l,date:1})).endOf("month").format("D"),(a=void 0===Array.from({length:i},function(e,t){return t+1}).find(function(e){var t=n.clone().set("date",e);return h(t)}))&&(e+=" rdtDisabled"),o&&l===o.month()&&c===o.year()&&(e+=" rdtActive"),t={key:l,"data-value":l,className:e},a||(t.onClick="months"===this.props.updateOn?this.updateSelectedMonth:this.props.setDate("month")),p.push(u(t,l,c,o&&o.clone())),4===p.length&&(d.push(r.createElement("tr",{key:s+"_"+d.length},p)),p=[]),l++;return d},updateSelectedMonth:function(e){this.props.updateSelectedDate(e)},renderMonth:function(e,t){var n=this.props.viewDate,a=n.localeData().monthsShort(n.month(t)).substring(0,3);return r.createElement("td",e,function(e){return e.charAt(0).toUpperCase()+e.slice(1)}(a))},alwaysValidDate:function(){return 1},handleClickOutside:function(){this.props.handleClickOutside()}}));e.exports=i},function(e,t,n){"use strict";var r=n(0),a=n(5),i=(0,n(8).default)(a({render:function(){var e=10*parseInt(this.props.viewDate.year()/10,10);return r.createElement("div",{className:"rdtYears"},[r.createElement("table",{key:"a"},r.createElement("thead",{},r.createElement("tr",{},[r.createElement("th",{key:"prev",className:"rdtPrev",onClick:this.props.subtractTime(10,"years")},r.createElement("span",{},"")),r.createElement("th",{key:"year",className:"rdtSwitch",onClick:this.props.showView("years"),colSpan:2},e+"-"+(e+9)),r.createElement("th",{key:"next",className:"rdtNext",onClick:this.props.addTime(10,"years")},r.createElement("span",{},""))]))),r.createElement("table",{key:"years"},r.createElement("tbody",{},this.renderYears(e)))])},renderYears:function(e){var t,n,a,i,o,s=[],c=-1,d=[],l=this.props.renderYear||this.renderYear,p=this.props.selectedDate,u=this.props.isValidDate||this.alwaysValidDate;for(e--;c<11;)t="rdtYear",o=(a=this.props.viewDate.clone().set({year:e,month:0,date:1})).endOf("year").format("DDD"),(i=void 0===Array.from({length:o},function(e,t){return t+1}).find(function(e){var t=a.clone().dayOfYear(e);return u(t)}))&&(t+=" rdtDisabled"),p&&p.year()===e&&(t+=" rdtActive"),n={key:e,"data-value":e,className:t},i||(n.onClick="years"===this.props.updateOn?this.updateSelectedYear:this.props.setDate("year")),s.push(l(n,e,p&&p.clone())),4===s.length&&(d.push(r.createElement("tr",{key:c},s)),s=[]),e++,c++;return d},updateSelectedYear:function(e){this.props.updateSelectedDate(e)},renderYear:function(e,t){return r.createElement("td",e,t)},alwaysValidDate:function(){return 1},handleClickOutside:function(){this.props.handleClickOutside()}}));e.exports=i},function(e,t,n){"use strict";var r=n(0),a=n(5),i=n(18),o=(0,n(8).default)(a({getInitialState:function(){return this.calculateState(this.props)},calculateState:function(e){var t=e.selectedDate||e.viewDate,n=e.timeFormat,r=[];-1!==n.toLowerCase().indexOf("h")&&(r.push("hours"),-1!==n.indexOf("m")&&(r.push("minutes"),-1!==n.indexOf("s")&&r.push("seconds")));var a=t.format("H"),i=!1;return null!==this.state&&-1!==this.props.timeFormat.toLowerCase().indexOf(" a")&&(i=-1!==this.props.timeFormat.indexOf(" A")?a>=12?"PM":"AM":a>=12?"pm":"am"),{hours:a,minutes:t.format("mm"),seconds:t.format("ss"),milliseconds:t.format("SSS"),daypart:i,counters:r}},renderCounter:function(e){if("daypart"!==e){var t=this.state[e];return"hours"===e&&-1!==this.props.timeFormat.toLowerCase().indexOf(" a")&&0===(t=(t-1)%12+1)&&(t=12),r.createElement("div",{key:e,className:"rdtCounter"},[r.createElement("span",{key:"up",className:"rdtBtn",onTouchStart:this.onStartClicking("increase",e),onMouseDown:this.onStartClicking("increase",e),onContextMenu:this.disableContextMenu},""),r.createElement("div",{key:"c",className:"rdtCount"},t),r.createElement("span",{key:"do",className:"rdtBtn",onTouchStart:this.onStartClicking("decrease",e),onMouseDown:this.onStartClicking("decrease",e),onContextMenu:this.disableContextMenu},"")])}return""},renderDayPart:function(){return r.createElement("div",{key:"dayPart",className:"rdtCounter"},[r.createElement("span",{key:"up",className:"rdtBtn",onTouchStart:this.onStartClicking("toggleDayPart","hours"),onMouseDown:this.onStartClicking("toggleDayPart","hours"),onContextMenu:this.disableContextMenu},""),r.createElement("div",{key:this.state.daypart,className:"rdtCount"},this.state.daypart),r.createElement("span",{key:"do",className:"rdtBtn",onTouchStart:this.onStartClicking("toggleDayPart","hours"),onMouseDown:this.onStartClicking("toggleDayPart","hours"),onContextMenu:this.disableContextMenu},"")])},render:function(){var e=this,t=[];return this.state.counters.forEach(function(n){t.length&&t.push(r.createElement("div",{key:"sep"+t.length,className:"rdtCounterSeparator"},":")),t.push(e.renderCounter(n))}),!1!==this.state.daypart&&t.push(e.renderDayPart()),3===this.state.counters.length&&-1!==this.props.timeFormat.indexOf("S")&&(t.push(r.createElement("div",{className:"rdtCounterSeparator",key:"sep5"},":")),t.push(r.createElement("div",{className:"rdtCounter rdtMilli",key:"m"},r.createElement("input",{value:this.state.milliseconds,type:"text",onChange:this.updateMilli})))),r.createElement("div",{className:"rdtTime"},r.createElement("table",{},[this.renderHeader(),r.createElement("tbody",{key:"b"},r.createElement("tr",{},r.createElement("td",{},r.createElement("div",{className:"rdtCounters"},t))))]))},componentWillMount:function(){var e=this;e.timeConstraints={hours:{min:0,max:23,step:1},minutes:{min:0,max:59,step:1},seconds:{min:0,max:59,step:1},milliseconds:{min:0,max:999,step:1}},["hours","minutes","seconds","milliseconds"].forEach(function(t){i(e.timeConstraints[t],e.props.timeConstraints[t])}),this.setState(this.calculateState(this.props))},componentWillReceiveProps:function(e){this.setState(this.calculateState(e))},updateMilli:function(e){var t=parseInt(e.target.value,10);t===e.target.value&&t>=0&&t<1e3&&(this.props.setTime("milliseconds",t),this.setState({milliseconds:t}))},renderHeader:function(){if(!this.props.dateFormat)return null;var e=this.props.selectedDate||this.props.viewDate;return r.createElement("thead",{key:"h"},r.createElement("tr",{},r.createElement("th",{className:"rdtSwitch",colSpan:4,onClick:this.props.showView("days")},e.format(this.props.dateFormat))))},onStartClicking:function(e,t){var n=this;return function(){var r={};r[t]=n[e](t),n.setState(r),n.timer=setTimeout(function(){n.increaseTimer=setInterval(function(){r[t]=n[e](t),n.setState(r)},70)},500),n.mouseUpListener=function(){clearTimeout(n.timer),clearInterval(n.increaseTimer),n.props.setTime(t,n.state[t]),document.body.removeEventListener("mouseup",n.mouseUpListener),document.body.removeEventListener("touchend",n.mouseUpListener)},document.body.addEventListener("mouseup",n.mouseUpListener),document.body.addEventListener("touchend",n.mouseUpListener)}},disableContextMenu:function(e){return e.preventDefault(),!1},padValues:{hours:1,minutes:2,seconds:2,milliseconds:3},toggleDayPart:function(e){var t=parseInt(this.state[e],10)+12;return t>this.timeConstraints[e].max&&(t=this.timeConstraints[e].min+(t-(this.timeConstraints[e].max+1))),this.pad(e,t)},increase:function(e){var t=parseInt(this.state[e],10)+this.timeConstraints[e].step;return t>this.timeConstraints[e].max&&(t=this.timeConstraints[e].min+(t-(this.timeConstraints[e].max+1))),this.pad(e,t)},decrease:function(e){var t=parseInt(this.state[e],10)-this.timeConstraints[e].step;return t<this.timeConstraints[e].min&&(t=this.timeConstraints[e].max+1-(this.timeConstraints[e].min-t)),this.pad(e,t)},pad:function(e,t){for(var n=t+"";n.length<this.padValues[e];)n="0"+n;return n},handleClickOutside:function(){this.props.handleClickOutside()}}));e.exports=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=n(1),o=n(12),s=n(17),c=n(9),d=n(7),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.renderTaskId=function(){return a.createElement("div",{className:"task-id"},"T",this.props.task.id)},t.prototype.renderPriority=function(){var e="task-color -p"+this.props.task.priority;return a.createElement("div",{className:e})},t.prototype.renderState=function(){if(this.props.viewType!=s.TaskBoardViewType.status){this.props.task.state;for(var e="",t=0,n=o.stateNameList;t<n.length;t++){var r=n[t],i=r[0];r[1]==this.props.task.state&&(e=i)}return a.createElement("div",{className:"task-state"},e)}},t.prototype.renderTag=function(e){var t=this.props.tagsById[e];return a.createElement(c.TagComponent,{tag:t,key:e})},t.prototype.renderTags=function(){if(this.props.task.tagIds.length)return a.createElement("div",{className:"task-tags-container"},this.props.task.tagIds.map(this.renderTag.bind(this)))},t.prototype.renderEstimate=function(){if(this.props.task.expectedDurationSecs)return a.createElement("div",{className:"estimate-container"},"Est: ",d.renderDuration(this.props.task.expectedDurationSecs,!0,!1))},t.prototype.computeTimeUntilTarget=function(e){var t=Math.round(e/1e3-i().unix());return t>0&&(t+=86399),[t,d.renderDuration(Math.abs(t),!0,!0)]},t.prototype.renderDueDate=function(){if(this.props.task.dueTime&&1e3!=this.props.task.state){var e=this.computeTimeUntilTarget(this.props.task.dueTime),t=e[0],n=e[1],r="",i="task-due-date";return"None"==n?(i+=" -due-today",r="Due today"):t<0?(i+=t<-259200?" -very-overdue":" -overdue",r="Due "+n+" ago"):(i+=t>259200?" -due-not-soon":" -due-soon",r="Due in "+n),a.createElement("div",{className:i},r)}},t.prototype.renderClosedDate=function(){if(1e3==this.props.task.state&&this.props.task.stateUpdatedTime){var e=this.computeTimeUntilTarget(this.props.task.stateUpdatedTime),t=e[0],n=e[1],r="Closed ";return r+="None"==n?"today":t<0?n+" ago":n+" from now",a.createElement("div",{className:"closed-time"},r)}},t.prototype.render=function(){return a.createElement("div",{className:"task card"},a.createElement("div",{className:"task-columns"},this.renderPriority(),a.createElement("div",{className:"main-column"},this.renderTaskId(),a.createElement("div",{className:"task-title"},this.props.task.title),this.renderTags(),this.renderState(),this.renderEstimate(),this.renderDueDate(),this.renderClosedDate())))},t}(a.Component);t.TaskComponent=l},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a,i=n(3),o=n(1),s=n(0),c=n(56),d=n(4),l=n(57),p=n(6),u=n(7);!function(e){e[e.week=0]="week",e[e.day=1]="day"}(a=t.CalendarViewType||(t.CalendarViewType={}));var h=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],m=function(e){function t(t){var n=e.call(this,t)||this;return n.refreshLoopId=0,n.state=n.getState(t),n}return r(t,e),t.prototype.componentWillReceiveProps=function(e){this.setState(this.getState(e))},t.prototype.getState=function(e){var n=t.divideAndSort(e.view,e.eventsById,e.selectedTag,e.tagsById),r=n[0],a=n[1];return{columns:r,showCreate:!!this.state&&this.state.showCreate,eventToRenderingInfo:a,editingEvent:null,createEventTimestamp:null,createEventDurationSecs:null,createEventTask:null,draggingStartTimestamp:null,draggingEndTimestamp:null,draggingEvent:null,endDraggingEvent:null}},t.getInitialView=function(e){return{type:e,startDayTimestamp:this.computeTodayStartTime(e),cellHeight:25,initial:!0}},t.prototype.componentDidMount=function(){var e=this,t=document.getElementsByClassName("current-time-cursor");if(t.length){var n=document.getElementsByClassName("all-columns-container")[0],r=i(t[0]).data("top");n.scrollTop=r-n.clientHeight/2}this.refreshLoopId=window.setInterval(function(){e.forceUpdate()},6e4)},t.prototype.componentWillUnmount=function(){this.refreshLoopId&&window.clearInterval(this.refreshLoopId)},t.computeTodayStartTime=function(e){return 1e3*(e==a.week?this.computeClosestMonday(o()):o().startOf("day")).unix()},t.computeClosestMonday=function(e){var t=o(e).startOf("week").add(1,"days");return t>o(e)&&(t=t.subtract(1,"week")),t},t.getEventKey=function(e,t){return e+"-"+t},t.divideAndSort=function(e,t,n,r){var i,s=this;i=e.type==a.week?[[],[],[],[],[],[],[]]:[[]];var c=o(e.startDayTimestamp),d={};n&&(d=u.getTagAndDescendantsRecursive(n.id,r));for(var l=function(e){if(n){var t=!1;if(e.tagIds.forEach(function(e){t=t||d[e]}),!t)return!0}return!1},p=0,m=Object.keys(t);p<m.length;p++){var f=m[p],g=t[f];if(!l(g)){var v=g.startTime,y=v+1e3*g.durationSecs;for(var b in h){var k=1e3*o(c).add(b,"days").unix();if(k<y&&(k>=v?i[b].push(parseInt(f)):k+864e5>v&&i[b].push(parseInt(f))),e.type==a.day)break}}}i.forEach(function(e){e.sort(function(e,n){var r=t[e],a=t[n],i=r.startTime-a.startTime;return 0!=i?i:a.durationSecs-r.durationSecs})});var E={};return i.forEach(function(n,r){var a=1e3*o(c).add(r,"days").unix(),i=1e3*o(c).add(r+1,"days").unix(),d=[];n.forEach(function(n){var o,c=null,l=t[n];if(l.startTime<a)c=0;else{var p=(l.startTime-a)/864e5;c=p*e.cellHeight*48}var u=(Math.min(l.startTime+1e3*l.durationSecs,i)-l.startTime)/1e3;if(l.startTime<a&&(u-=(a-l.startTime)/1e3),o=Math.max(Math.min(e.cellHeight,20),u/1800*e.cellHeight),!d.length)return d.push({id:l.id,height:o,top:c}),void(E[s.getEventKey(l.id,r)]={index:0,columnWidth:1,extraCols:0,height:o,top:c});var h=!1;if(d.forEach(function(e,t){e&&function(e,t){return t>=e.top+1e-7&&t<e.top+e.height-1e-7}(e,c)||(h?d[t]=null:(h=!0,d[t]={id:l.id,top:c,height:o},E[s.getEventKey(l.id,r)]={index:t,columnWidth:0,extraCols:0,height:o,top:c}))}),h){for(;d.length&&null==d[d.length-1];)d.pop();var m=0,f=d.length;d.forEach(function(e){e&&(m++,f=Math.max(f,E[s.getEventKey(e.id,r)].columnWidth))}),d.forEach(function(e){if(e){var t=s.getEventKey(e.id,r),n=Math.max(m,E[t].columnWidth);E[t].columnWidth=n,E[t].extraCols=f-n}})}else d.forEach(function(e){if(e){var t=s.getEventKey(e.id,r);E[t].columnWidth=d.length+1}}),E[s.getEventKey(l.id,r)]={columnWidth:d.length+1,index:d.length,extraCols:0,height:o,top:c},d.push({id:l.id,top:c,height:o})})}),[i,E]},t.prototype.onDoubleClick=function(e){this.setState({editingEvent:e})},t.prototype.computeTimestamp=function(e,t){var n=t;return this.props.view.type==a.week&&h.forEach(function(t,r){t==e&&(n+=86400*r)}),1e3*o(this.props.view.startDayTimestamp).add(n,"seconds").unix()},t.prototype.columnMouseDown=function(e,n){var r=1*n.target.dataset.index,a=this.computeTimestamp(e,r),i=this.state.draggingStartTimestamp;this.setState({draggingStartTimestamp:a,draggingEndTimestamp:i,createEventTimestamp:t.getCreateEventTimestamp(a,i)}),n.preventDefault()},t.prototype.columnMouseOver=function(e,n){if(this.state.draggingStartTimestamp){var r=1*n.target.dataset.index,a=this.computeTimestamp(e,r);this.setState({draggingEndTimestamp:a,createEventTimestamp:t.getCreateEventTimestamp(this.state.draggingStartTimestamp,a),createEventDurationSecs:t.getCreateEventDurationSecs(this.state.draggingStartTimestamp,a)})}},t.prototype.columnMouseUp=function(e,n){if(this.state.draggingStartTimestamp){var r=1*n.target.dataset.index,a=this.computeTimestamp(e,r);this.setState({draggingStartTimestamp:null,draggingEndTimestamp:null,createEventTimestamp:t.getCreateEventTimestamp(this.state.draggingStartTimestamp,a),createEventDurationSecs:t.getCreateEventDurationSecs(this.state.draggingStartTimestamp,a),showCreate:!0})}},t.getCreateEventTimestamp=function(e,t){return Math.min(e,t)},t.getCreateEventDurationSecs=function(e,t){var n=Math.abs(e-t);return n/=1e3,n+=1800},t.prototype.onDrop=function(e,t){if(this.state.draggingEvent){(n=this.state.draggingEvent).startTime=this.computeTimestamp(e,t),this.props.updateEvent(n),this.setState({draggingEvent:null})}else{if(!this.state.endDraggingEvent)return;var n,r=this.computeTimestamp(e,t)-this.state.endDraggingEvent.startTime;r=Math.max(Math.round(r/1e3)+1800,1800),(n=this.state.endDraggingEvent).durationSecs=r,this.props.updateEvent(n),this.setState({endDraggingEvent:null})}},t.prototype.getDayAndIndexUnderneathEvent=function(e,t){var n=e.clientX,r=e.clientY;i(e.currentTarget).hide();var a=i(document.elementFromPoint(n,r));if("TD"==a.prop("tagName")){var o=a.data();t(o.day,o.index)}i(e.currentTarget).show()},t.prototype.onDropPassThrough=function(e){this.getDayAndIndexUnderneathEvent(e,this.onDrop.bind(this)),e.preventDefault(),e.stopPropagation()},t.prototype.onDragOverPassThrough=function(e){this.getDayAndIndexUnderneathEvent(e,this.onDragOver.bind(this)),e.preventDefault(),e.stopPropagation()},t.prototype.onDragStart=function(e,t){if(this.state.endDraggingEvent||this.state.draggingEvent)throw Error("Already was dragging an event...");this.setState({draggingEvent:e}),t.dataTransfer.setData("text/html",null)},t.prototype.onDragEnd=function(e){this.state.draggingEvent==e&&this.setState({draggingStartTimestamp:null,draggingEndTimestamp:null,draggingEvent:null})},t.prototype.onEventEndDragStart=function(e,t){if(this.state.endDraggingEvent||this.state.draggingEvent)throw Error("Already dragging an event...");this.setState({endDraggingEvent:e}),t.dataTransfer.setData("text/html",null)},t.prototype.onEventEndDragEnd=function(e){this.state.endDraggingEvent==e&&this.setState({draggingStartTimestamp:null,draggingEndTimestamp:null,endDraggingEvent:null})},t.prototype.onDragOver=function(e,t,n){if(n&&n.preventDefault(),-1==t&&(t=1*n.target.dataset.index),this.state.draggingEvent){var r=(a=this.computeTimestamp(e,t))+1e3*Math.max(0,this.state.draggingEvent.durationSecs-1800);this.state.draggingStartTimestamp==a&&this.state.draggingEndTimestamp==r||this.setState({draggingStartTimestamp:a,draggingEndTimestamp:r})}else{if(!this.state.endDraggingEvent)return;var a=this.computeTimestamp(e,t);this.state.draggingStartTimestamp==this.state.endDraggingEvent.startTime&&this.state.draggingEndTimestamp==a||this.setState({draggingStartTimestamp:this.state.endDraggingEvent.startTime,draggingEndTimestamp:a})}},t.prototype.getCurrentTagToken=function(){return this.props.selectedTag?[{label:this.props.selectedTag.name,value:this.props.selectedTag.id}]:[]},t.prototype.changeCurrentTagToken=function(e){var t;t=e.length?this.props.tagsById[e[0].value]:null,this.props.changeSelectedTag(t)},t.prototype.getAllTagNames=function(){var e=this,t=[];return Object.keys(this.props.tagsById).forEach(function(n){var r=e.props.tagsById[+n];t.push({label:r.name,value:r.id})}),t},t.prototype.renderTagSelector=function(){return s.createElement("div",{className:"tag-selector-container"},s.createElement("div",{className:"tag-selector-label"},"Filter Tag:"),s.createElement(d.TokenizerComponent,{onChange:this.changeCurrentTagToken.bind(this),initialValues:this.getCurrentTagToken(),possibleTokens:this.getAllTagNames(),tokenLimit:1}))},t.prototype.changeCellHeight=function(e){var t=this.props.view;t.cellHeight=e.target.value,this.props.changeView(t)},t.prototype.renderCellSizeSlider=function(){if(!this.props.simpleOptions)return s.createElement("div",{className:"cell-size-slider"},s.createElement("input",{type:"range",min:"20",max:"100",value:this.props.view.cellHeight,onChange:this.changeCellHeight.bind(this)}))},t.prototype.changeViewType=function(e){if(this.props.view.type!=e){var n=this.props.view.startDayTimestamp;if(this.props.view.type==a.week&&e==a.day){var r=o(this.props.view.startDayTimestamp),i=o();i.unix()-r.unix()>0&&r.add(1,"week").unix()-i.unix()>0&&(n=t.computeTodayStartTime(e))}else{if(this.props.view.type!=a.day||e!=a.week)throw Error("Unknown view type transition");n=1e3*t.computeClosestMonday(o(this.props.view.startDayTimestamp)).unix()}var s=this.props.view;s.startDayTimestamp=n,s.type=e,this.props.changeView(s)}},t.prototype.renderViewChoice=function(e){var t="view-type-choice";e==this.props.view.type&&(t+=" -selected");var n={};return n[a.day]="Day",n[a.week]="Week",s.createElement("div",{className:t,key:e,onClick:this.changeViewType.bind(this,e)},n[e])},t.prototype.renderChangeViewType=function(){if(!this.props.simpleOptions)return s.createElement("div",{className:"view-type-selector"},this.renderViewChoice(a.week),this.renderViewChoice(a.day))},t.prototype.changePage=function(e){var n;this.props.view.type==a.week&&(e*=7),n=0==e?t.computeTodayStartTime(this.props.view.type):1e3*o(this.props.view.startDayTimestamp).add(e,"days").unix();var r=this.props.view;r.startDayTimestamp=n,this.props.changeView(r)},t.prototype.renderPagination=function(){return s.createElement("div",{className:"pagination-container"},s.createElement("div",{className:"pagination-option",onClick:this.changePage.bind(this,-1)},"Previous"),s.createElement("div",{className:"pagination-option",onClick:this.changePage.bind(this,1)},"Next"),s.createElement("div",{className:"pagination-option",onClick:this.changePage.bind(this,0)},"Today"))},t.prototype.renderOptions=function(){return s.createElement("div",{className:"options"},this.renderCellSizeSlider(),this.renderTagSelector(),this.renderChangeViewType(),this.renderPagination())},t.prototype.renderCells=function(e){for(var t=this,n=function(n){var r=""+n,a={height:t.props.view.cellHeight+"px"},i=t.computeTimestamp(e,n),c="";if(t.state.draggingStartTimestamp&&t.state.draggingEndTimestamp){var d=t.state.draggingStartTimestamp,l=t.state.draggingEndTimestamp;l<d&&(d=t.state.draggingEndTimestamp,l=t.state.draggingStartTimestamp),i>=d&&i<l+18e5&&(c="-selected")}if("times"==e){var p="";return n%3600==0&&(p=o(t.props.view.startDayTimestamp).add(n,"seconds").format("h:mm a")),s.createElement("tr",{key:r,style:a},s.createElement("td",null,p))}return s.createElement("tr",{key:r,style:a},s.createElement("td",{className:c,"data-day":e,"data-index":n,onDrop:t.onDrop.bind(t,e,n)}," "))},r=0,a=[];r<86400;r+=1800)a.push(n(r));return s.createElement("table",{cellPadding:"0",cellSpacing:"0",onMouseDown:this.columnMouseDown.bind(this,e),onMouseOver:u.debounce(this.columnMouseOver.bind(this,e),50),onMouseUp:this.columnMouseUp.bind(this,e),onDragOver:this.onDragOver.bind(this,e,-1)},s.createElement("tbody",null,a))},t.prototype.renderCurrentTimeCursor=function(e){var t=this.props.view.startDayTimestamp+864e5*e,n=1e3*o().unix();if(n>=t&&n<t+864e5){var r=(n-t)/864e5;r*=48*this.props.view.cellHeight;var a={top:(r-=2)+"px"};return s.createElement("div",{className:"current-time-cursor",style:a,"data-top":r,onDrop:this.onDropPassThrough.bind(this),onDragOver:this.onDragOverPassThrough.bind(this)})}},t.prototype.renderColumn=function(e,n,r){var a=this,i=h[e],o="column-container";return r&&(o+=" single-day"),s.createElement("div",{key:i,className:o},this.renderCells(i),this.renderCurrentTimeCursor(e),n.map(function(n){var r=a.state.eventToRenderingInfo[t.getEventKey(n,e)],i=r.columnWidth;r.extraCols&&(i+=r.extraCols);var o=100/i*(1+r.extraCols),c=o*r.index,d={height:r.height+"px",maxHeight:r.height+"px",top:r.top+"px",marginLeft:c+"%",width:o+"%"},p=a.props.eventsById[n];return s.createElement("div",{className:"rendered-event-container",key:n,style:d,onDrop:a.onDropPassThrough.bind(a),onDragOver:a.onDragOverPassThrough.bind(a)},s.createElement("div",{className:"rendered-event card",draggable:!0,onDragStart:a.onDragStart.bind(a,p),onDragEnd:a.onDragEnd.bind(a,p),onDoubleClick:a.onDoubleClick.bind(a,p)},s.createElement(l.EventComponent,{event:p,tagsById:a.props.tagsById})),s.createElement("div",{className:"draggable-event-end",draggable:!0,onDragStart:a.onEventEndDragStart.bind(a,p),onDragEnd:a.onEventEndDragEnd.bind(a,p)}))}))},t.prototype.renderWeekViewColumns=function(){var e=this;return s.createElement("div",{className:"full-column-container"},s.createElement("div",{className:"header-and-content-container"},s.createElement("div",{className:"column-header-container"},s.createElement("div",{className:"column-header -times"},"Time"),h.map(function(t,n){var r=o(e.props.view.startDayTimestamp).add(n,"days");return s.createElement("div",{key:t,className:"column-header"},r.format("ddd M/D"))})),s.createElement("div",{className:"all-columns-container"},s.createElement("div",{className:"column-container -times"},this.renderCells("times")),[0,1,2,3,4,5,6].map(function(t,n){return e.renderColumn(t,e.state.columns[n])}))))},t.prototype.renderTodayString=function(){return o(this.props.view.startDayTimestamp).format("dddd M/D")},t.prototype.renderDayViewColumns=function(){var e=this;return s.createElement("div",{className:"full-column-container"},s.createElement("div",{className:"header-and-content-container"},s.createElement("div",{className:"column-header-container"},s.createElement("div",{className:"column-header -times"},"Time"),s.createElement("div",{className:"column-header single-day"},this.renderTodayString())),s.createElement("div",{className:"all-columns-container"},s.createElement("div",{className:"column-container -times"},this.renderCells("times")),[0].map(function(t,n){return e.renderColumn(t,e.state.columns[n],!0)}))))},t.prototype.renderColumns=function(){return this.props.view.type==a.week?this.renderWeekViewColumns():this.props.view.type==a.day?this.renderDayViewColumns():void 0},t.prototype.clearEditingEvent=function(){this.setState({editingEvent:null})},t.prototype.renderEditingEvent=function(){if(this.state.editingEvent)return s.createElement(p.ModalComponent,{cancelFunc:this.clearEditingEvent.bind(this)},s.createElement(c.EditEventComponent,{meUser:this.props.meUser,event:this.state.editingEvent,eventsById:this.props.eventsById,tagsById:this.props.tagsById,createMode:!1,tasksById:this.props.tasksById,createEvent:function(e){},updateEvent:this.props.updateEvent,deleteEvent:this.props.deleteEvent}))},t.prototype.closeCreateEvent=function(){this.setState({showCreate:!1,createEventTimestamp:null,createEventDurationSecs:null,createEventTask:null})},t.prototype.createEvent=function(e){this.closeCreateEvent(),this.props.createEvent(e)},t.prototype.renderCreateEvent=function(){if(this.state.showCreate){var e=[];this.props.selectedTag&&e.push(this.props.selectedTag.id);var t=[];if(this.state.createEventTask){t.push(this.state.createEventTask.id);for(var n=0,r=this.state.createEventTask.tagIds;n<r.length;n++){var a=r[n];e.length&&a==e[0]||e.push(a)}}return s.createElement(p.ModalComponent,{cancelFunc:this.closeCreateEvent.bind(this)},s.createElement(c.EditEventComponent,{meUser:this.props.meUser,tagsById:this.props.tagsById,createMode:!0,eventsById:this.props.eventsById,tasksById:this.props.tasksById,initialCreationTime:this.state.createEventTimestamp,initialDurationSecs:this.state.createEventDurationSecs,initialTags:e,initialTasks:t,createEvent:this.createEvent.bind(this),updateEvent:function(e){},deleteEvent:function(e){}}))}},t.prototype.render=function(){return s.createElement("div",{className:"calendar"},this.renderOptions(),this.renderColumns(),this.renderEditingEvent(),this.renderCreateEvent())},t}(s.Component);t.CalendarComponent=m},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),i=n(0),o=n(4),s=function(e){function t(t){var n=e.call(this,t)||this,r=null;return r=t.createMode?n._getEmptyEvent(t.meUser,t.initialCreationTime,t.initialDurationSecs,t.initialTags,t.initialTasks):t.event,n.state={event:r,startNow:!1,startAfterLast:!1,endNow:!1,submitted:!1},n}return r(t,e),t.prototype.componentWillReceiveProps=function(e){var t=e.event;if(e.createMode){var n=this._getEmptyEvent(e.meUser,e.initialCreationTime,e.initialDurationSecs,e.initialTags,e.initialTasks);this.state&&!this.state.submitted&&(null==e.initialCreationTime&&(n.startTime=this.state.event.startTime),null==e.initialDurationSecs&&(n.durationSecs=this.state.event.durationSecs),e.initialTags&&e.initialTags.length||(n.tagIds=this.state.event.tagIds),e.initialTasks&&e.initialTasks.length||(n.taskIds=this.state.event.taskIds),n.name=this.state.event.name),t=n}this.setState({event:t})},t.prototype._getEmptyEvent=function(e,t,n,r,a){return{id:0,name:"",authorId:e.id,ownerId:e.id,tagIds:r||[],startTime:t||0,durationSecs:n||900,taskIds:a||[]}},t.prototype.toggleStartNow=function(){var e=!this.state.startNow,t=this.state.startAfterLast;e&&(t=!1),this.setState({startAfterLast:t,startNow:e})},t.prototype.toggleStartAfterLast=function(){var e=!this.state.startAfterLast,t=this.state.startNow;e&&(t=!1),this.setState({startAfterLast:e,startNow:t})},t.prototype.toggleEndNow=function(){this.setState({endNow:!this.state.endNow})},t.prototype.submitForm=function(e){var t=1e3*a().unix();if(this.state.startNow){var n=this.state.event.startTime+1e3*this.state.event.durationSecs;this.state.event.startTime=t,this.state.event.durationSecs=Math.floor((n-t)/1e3)}else if(this.state.startAfterLast){for(var r=0,i=0,o=Object.keys(this.props.eventsById);i<o.length;i++){var s=o[i],c=this.props.eventsById[s],d=c.startTime+1e3*c.durationSecs;d>r&&d<=this.state.event.startTime&&(r=d)}t-r>864e5&&(r=t),this.state.event.startTime=r}if(this.state.endNow&&t>this.state.event.startTime&&(this.state.event.durationSecs=Math.floor((t-this.state.event.startTime)/1e3)),this.state.event.name.trim().length||(this.state.event.name=this.autoFillName()),"save"==e)this.props.updateEvent(this.state.event);else if("delete"==e)this.props.deleteEvent(this.state.event);else{if("create"!=e)throw Error("Unknown submit type!");this.props.createEvent(this.state.event)}this.setState({submitted:!0})},t.prototype.autoFillName=function(){var e=this.state.event;if(1==e.taskIds.length)return"Working on T"+e.taskIds[0];if(e.tagIds.length>0){var t=this.getCurrentTags();if(2==e.tagIds.length)return t[0].label+" & "+t[1].label;if(1==e.tagIds.length)return""+t[0].label}return""},t.prototype.onKeyDownCreate=function(e){"Enter"==e.key&&this.props.createMode&&this.submitForm("create")},t.prototype.updateAttr=function(e,t){this.state.event[e]=t.target.value,this.setState(this.state)},t.prototype.getCurrentTags=function(){var e=this,t=[];return this.state.event.tagIds.forEach(function(n){var r=e.props.tagsById[n];t.push({label:r.name,value:r.id})}),t},t.prototype.getAllTagNames=function(){var e=this,t=[];return Object.keys(this.props.tagsById).forEach(function(n){var r=e.props.tagsById[+n];t.push({label:r.name,value:r.id})}),t},t.prototype.retrieveTagNames=function(e){this.state.event.tagIds=e.map(function(e){return e.value}),this.setState(this.state)},t.prototype.getCurrentTasks=function(){var e=this;return this.state.event.taskIds.map(function(t){return{label:"T"+t,subtext:e.props.tasksById[t].title,value:t}})},t.prototype.getAllTaskNames=function(){var e=[];for(var t in this.props.tasksById){var n=this.props.tasksById[t];e.push({label:"T"+t,subtext:n.title,value:t})}return e},t.prototype.retrieveTaskNames=function(e){for(var t={},n=0,r=this.state.event.taskIds;n<r.length;n++){var a=r[n];t[a]=!0}var i=[];this.state.event.taskIds=e.map(function(e){return t.hasOwnProperty(e.value)||i.push(e.value),e.value});for(var o={},s=0,c=this.state.event.tagIds;s<c.length;s++){o[h=c[s]]=!0}for(var d=0,l=i;d<l.length;d++){a=l[d];for(var p=0,u=this.props.tasksById[a].tagIds;p<u.length;p++){var h=u[p];o.hasOwnProperty(h+"")||this.state.event.tagIds.push(h)}}this.setState(this.state)},t.prototype.renderFormTitle=function(){return this.props.createMode?i.createElement("h3",null,"Create Event"):i.createElement("h3",null,"Editing E",this.state.event.id)},t.prototype.renderButtons=function(){return this.props.createMode?i.createElement("div",{className:"edit-event-button-container"},i.createElement("input",{type:"button",value:"create",onClick:this.submitForm.bind(this,"create")})):i.createElement("div",{className:"edit-event-button-container"},i.createElement("input",{type:"button",value:"delete",onClick:this.submitForm.bind(this,"delete")}),i.createElement("input",{type:"button",value:"save",onClick:this.submitForm.bind(this,"save")}))},t.prototype.renderForm=function(){return i.createElement("div",null,i.createElement("div",{className:"name-container"},i.createElement("label",{htmlFor:"name"},"Name: "),i.createElement("input",{id:"event-name",type:"text",name:"name",value:this.state.event.name,onKeyDown:this.onKeyDownCreate.bind(this),onChange:this.updateAttr.bind(this,"name")})),i.createElement("div",{className:"task-tokenizer-container"},i.createElement("label",null,"Tasks:"),i.createElement(o.TokenizerComponent,{onChange:this.retrieveTaskNames.bind(this),initialValues:this.getCurrentTasks(),possibleTokens:this.getAllTaskNames()})),i.createElement("div",{className:"tag-tokenizer-container"},i.createElement("label",null,"Tags:"),i.createElement(o.TokenizerComponent,{onChange:this.retrieveTagNames.bind(this),initialValues:this.getCurrentTags(),possibleTokens:this.getAllTagNames()})),i.createElement("div",{className:"start-now checkbox-container"},i.createElement("label",{onClick:this.toggleStartNow.bind(this)},"Start Now?"),i.createElement("input",{type:"checkbox",onChange:this.toggleStartNow.bind(this),checked:this.state.startNow})),i.createElement("div",{className:"start-now checkbox-container"},i.createElement("label",{onClick:this.toggleStartAfterLast.bind(this)},"After Last?"),i.createElement("input",{type:"checkbox",onChange:this.toggleStartAfterLast.bind(this),checked:this.state.startAfterLast})),i.createElement("div",{className:"end-now checkbox-container"},i.createElement("label",{onClick:this.toggleEndNow.bind(this)},"End Now?"),i.createElement("input",{type:"checkbox",onChange:this.toggleEndNow.bind(this),checked:this.state.endNow})),this.renderButtons())},t.prototype.render=function(){return i.createElement("div",{className:"edit-event-container"},this.renderFormTitle(),this.renderForm())},t}(i.Component);t.EditEventComponent=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=n(9),o=n(10),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.selectTask=function(e){var t=new CustomEvent(o.signalDisplayTaskInfo,{detail:e});document.dispatchEvent(t)},t.prototype.renderTag=function(e){var t=this.props.tagsById[e];return a.createElement(i.TagComponent,{tag:t,key:e})},t.prototype.renderName=function(){return a.createElement("div",{className:"name"},this.props.event.name)},t.prototype.renderTags=function(){if(this.props.event.tagIds.length)return this.props.event.tagIds.map(this.renderTag.bind(this))},t.prototype.renderTasks=function(){var e=this;if(this.props.event.taskIds.length)return this.props.event.taskIds.map(function(t){return a.createElement("div",{className:"task-id-card card",key:"T"+t,onClick:e.selectTask.bind(e,t)},"T"+t)})},t.prototype.render=function(){return a.createElement("div",{className:"event-container"},this.renderName(),a.createElement("div",{className:"event-card-container"},this.renderTags(),this.renderTasks()))},t}(a.Component);t.EventComponent=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=n(16),o=n(15),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.renderAccountInfo=function(){return a.createElement("div",{className:"profile-container"},this.props.meUser.username+" | ",a.createElement("a",{href:"/auth/logout"},"Logout"))},t.prototype.renderViewModeSelector=function(){var e=this,t={};t[o.AppViewMode.mergedView]="Home",t[o.AppViewMode.planView]="Plan",t[o.AppViewMode.taskView]="Task Board",t[o.AppViewMode.eventView]="Calendar",t[o.AppViewMode.tagView]="Tag Graph",t[o.AppViewMode.noteView]="Notes";var n={};return n[o.AppViewMode.mergedView]="/",n[o.AppViewMode.planView]="/plan",n[o.AppViewMode.taskView]="/tasks",n[o.AppViewMode.eventView]="/cal",n[o.AppViewMode.tagView]="/tags",n[o.AppViewMode.noteView]="/notes",a.createElement("div",{className:"view-mode-selector"},Object.keys(o.AppViewMode).map(function(r){if(t.hasOwnProperty(r)){var o="view-mode-option";return+r==e.props.viewMode&&(o+=" -selected"),a.createElement(i.Link,{key:r,className:o,to:n[+r]},t[+r])}}))},t.prototype.render=function(){return a.createElement("div",{className:"header-container"},a.createElement("h1",{className:"header-title"},"Starter"),this.renderAccountInfo(),this.renderViewModeSelector())},t}(a.Component);t.AppHeader=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=n(1),o=n(12),s=n(60),c=n(7),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.refreshLoopId=0,t}return r(t,e),t.prototype.componentDidMount=function(){var e=this;this.refreshLoopId=window.setInterval(function(){e.forceUpdate()},1e4)},t.prototype.componentWillUnmount=function(){this.refreshLoopId&&window.clearInterval(this.refreshLoopId)},t.prototype.computeTotalTimeScheduled=function(){var e=this,t=0;return this.props.task.eventIds.forEach(function(n){var r=e.props.eventsById[n];t+=r.durationSecs}),t},t.prototype.computeTotalTimeSpent=function(){var e=this,t=1e3*i().unix(),n=0;return this.props.task.eventIds.forEach(function(r){var a=e.props.eventsById[r];a.startTime>t||(n+=Math.min((t-a.startTime)/1e3,a.durationSecs))}),n},t.prototype.renderOptions=function(){return a.createElement("div",{className:"options"},a.createElement("a",{className:"edit-button",onClick:this.props.editCallback},"Edit"),a.createElement("a",{className:"close-button",onClick:this.props.closeCallback},"Close"))},t.prototype.renderHeader=function(){return a.createElement("div",{className:"task-detail-header"},a.createElement("div",{className:"options-container"},"T",this.props.task.id,this.renderOptions()),a.createElement("div",{className:"title"},this.props.task.title))},t.prototype.renderDescription=function(){var e=this.props.task.description.split("\n");return a.createElement(s.Linkify,{className:"task-description"},e.map(function(t,n){return a.createElement("span",{key:n},t,n<e.length-1?a.createElement("br",null):"")}))},t.prototype.renderCurrentStatus=function(){var e=this,t="";o.priorityNameList.forEach(function(n){var r=n[0],a=n[1];e.props.task.priority==a&&(t=r)});var n="";return o.stateNameList.forEach(function(t){var r=t[0],a=t[1];e.props.task.state==a&&(n=r)}),a.createElement("div",{className:"task-status"},a.createElement("div",{className:"info-container"},a.createElement("div",{className:"task-color -p"+this.props.task.priority}),a.createElement("div",null,t)),a.createElement("div",{className:"info-container"},a.createElement("div",{className:"task-color -s"+this.props.task.state}),a.createElement("div",null,n)))},t.prototype.renderEstimatedTime=function(){var e=this.props.task.expectedDurationSecs;if(0!=e)return a.createElement("div",{className:"time-estimate"},"Estimated: ",c.renderDuration(e,!1,!1))},t.prototype.renderProgress=function(e){if(e&&this.props.task.expectedDurationSecs){var t=Math.round(e/this.props.task.expectedDurationSecs*100);return a.createElement("div",{className:"progress"},"Estimated Time Spent: ",t,"%")}},t.prototype.renderTimeInfo=function(){var e=this.computeTotalTimeScheduled(),t=this.computeTotalTimeSpent();return 0==e?a.createElement("div",{className:"time-info"},this.renderEstimatedTime()):e==t?a.createElement("div",{className:"time-info"},this.renderEstimatedTime(),"Scheduled and Spent: ",c.renderDuration(e,!1,!1),this.renderProgress(t)):a.createElement("div",{className:"time-info"},this.renderEstimatedTime(),"Scheduled: ",c.renderDuration(e,!1,!1),a.createElement("br",null),"Spent: ",c.renderDuration(t,!1,!1),this.renderProgress(t))},t.prototype.render=function(){return a.createElement("div",{className:"detail-container"},this.renderHeader(),this.renderDescription(),this.renderCurrentStatus(),this.renderTimeInfo())},t}(a.Component);t.TaskDetailComponent=d},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=n(61),o=n(67),s=new i;s.tlds(o);var c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.parseCounter=0,t}return r(t,e),t.prototype.getMatches=function(e){return s.match(e)},t.prototype.parseString=function(e){var n=this,r=[];if(""===e)return r;var i=this.getMatches(e);if(!i)return e;var o=0;return i.forEach(function(i,s){i.index>o&&r.push(e.substring(o,i.index));var c={href:i.url,key:"parse"+n.parseCounter+"match"+s};for(var d in n.props.properties){var l=n.props.properties[d];l===t.MATCH&&(l=i.url),c[d]=l}r.push(a.createElement(n.props.component,c,i.text)),o=i.lastIndex}),o<e.length&&r.push(e.substring(o)),1===r.length?r[0]:r},t.prototype.parse=function(e){var t=this,n=e;if("string"==typeof e)n=this.parseString(e);else if(a.isValidElement(e)&&"a"!==e.type&&"button"!==e.type){var r=e;n=a.cloneElement(r,{key:"parse"+ ++this.parseCounter},this.parse(r.props.children))}else e instanceof Array&&(n=e.map(function(e){return t.parse(e)}));return n},t.prototype.render=function(){this.parseCounter=0;var e=this.parse(this.props.children);return a.createElement("span",{className:this.props.className},e)},t.MATCH="LINKIFY_MATCH",t.defaultProps={className:"Linkify",component:"a",properties:{}},t}(a.Component);t.Linkify=c},function(e,t,n){"use strict";function r(e){return Array.prototype.slice.call(arguments,1).forEach(function(t){t&&Object.keys(t).forEach(function(n){e[n]=t[n]})}),e}function a(e){return Object.prototype.toString.call(e)}function i(e){return"[object Function]"===a(e)}function o(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var s={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};var c={"http:":{validate:function(e,t,n){var r=e.slice(t);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){var r=e.slice(t);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?t>=3&&":"===e[t-3]?0:t>=3&&"/"===e[t-3]?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,n){var r=e.slice(t);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},d="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",l="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function p(e){var t=e.re=n(62)(e.__opts__),r=e.__tlds__.slice();function s(e){return e.replace("%TLDS%",t.src_tlds)}e.onCompile(),e.__tlds_replaced__||r.push(d),r.push(t.src_xn),t.src_tlds=r.join("|"),t.email_fuzzy=RegExp(s(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(s(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(s(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(s(t.tpl_host_fuzzy_test),"i");var c=[];function l(e,t){throw new Error('(LinkifyIt) Invalid schema "'+e+'": '+t)}e.__compiled__={},Object.keys(e.__schemas__).forEach(function(t){var n=e.__schemas__[t];if(null!==n){var r={validate:null,link:null};if(e.__compiled__[t]=r,function(e){return"[object Object]"===a(e)}(n))return!function(e){return"[object RegExp]"===a(e)}(n.validate)?i(n.validate)?r.validate=n.validate:l(t,n):r.validate=function(e){return function(t,n){var r=t.slice(n);return e.test(r)?r.match(e)[0].length:0}}(n.validate),void(i(n.normalize)?r.normalize=n.normalize:n.normalize?l(t,n):r.normalize=function(e,t){t.normalize(e)});!function(e){return"[object String]"===a(e)}(n)?l(t,n):c.push(t)}}),c.forEach(function(t){e.__compiled__[e.__schemas__[t]]&&(e.__compiled__[t].validate=e.__compiled__[e.__schemas__[t]].validate,e.__compiled__[t].normalize=e.__compiled__[e.__schemas__[t]].normalize)}),e.__compiled__[""]={validate:null,normalize:function(e,t){t.normalize(e)}};var p=Object.keys(e.__compiled__).filter(function(t){return t.length>0&&e.__compiled__[t]}).map(o).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+p+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+p+")","ig"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),function(e){e.__index__=-1,e.__text_cache__=""}(e)}function u(e,t){var n=new function(e,t){var n=e.__index__,r=e.__last_index__,a=e.__text_cache__.slice(n,r);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=r+t,this.raw=a,this.text=a,this.url=a}(e,t);return e.__compiled__[n.schema].normalize(n,e),n}function h(e,t){if(!(this instanceof h))return new h(e,t);t||function(e){return Object.keys(e||{}).reduce(function(e,t){return e||s.hasOwnProperty(t)},!1)}(e)&&(t=e,e={}),this.__opts__=r({},s,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=r({},c,e),this.__compiled__={},this.__tlds__=l,this.__tlds_replaced__=!1,this.re={},p(this)}h.prototype.add=function(e,t){return this.__schemas__[e]=t,p(this),this},h.prototype.set=function(e){return this.__opts__=r(this.__opts__,e),this},h.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;var t,n,r,a,i,o,s,c;if(this.re.schema_test.test(e))for((s=this.re.schema_search).lastIndex=0;null!==(t=s.exec(e));)if(a=this.testSchemaAt(e,t[2],s.lastIndex)){this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+a;break}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(c=e.search(this.re.host_fuzzy_test))>=0&&(this.__index__<0||c<this.__index__)&&null!==(n=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))&&(i=n.index+n[1].length,(this.__index__<0||i<this.__index__)&&(this.__schema__="",this.__index__=i,this.__last_index__=n.index+n[0].length)),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&e.indexOf("@")>=0&&null!==(r=e.match(this.re.email_fuzzy))&&(i=r.index+r[1].length,o=r.index+r[0].length,(this.__index__<0||i<this.__index__||i===this.__index__&&o>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=i,this.__last_index__=o)),this.__index__>=0},h.prototype.pretest=function(e){return this.re.pretest.test(e)},h.prototype.testSchemaAt=function(e,t,n){return this.__compiled__[t.toLowerCase()]?this.__compiled__[t.toLowerCase()].validate(e,n,this):0},h.prototype.match=function(e){var t=0,n=[];this.__index__>=0&&this.__text_cache__===e&&(n.push(u(this,t)),t=this.__last_index__);for(var r=t?e.slice(t):e;this.test(r);)n.push(u(this,t)),r=r.slice(this.__last_index__),t+=this.__last_index__;return n.length?n:null},h.prototype.tlds=function(e,t){return e=Array.isArray(e)?e:[e],t?(this.__tlds__=this.__tlds__.concat(e).sort().filter(function(e,t,n){return e!==n[t-1]}).reverse(),p(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,p(this),this)},h.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),"mailto:"!==e.schema||/^mailto:/i.test(e.url)||(e.url="mailto:"+e.url)},h.prototype.onCompile=function(){},e.exports=h},function(e,t,n){"use strict";e.exports=function(e){var t={};t.src_Any=n(63).source,t.src_Cc=n(64).source,t.src_Z=n(65).source,t.src_P=n(66).source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");return t.src_pseudo_letter="(?:(?![><]|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|[><]|"+t.src_ZPCc+")(?!-|_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|[><]|[()[\\]{}.,\"'?!\\-]).|\\[(?:(?!"+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+'|["]).)+\\"|\\\'(?:(?!'+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-]).|\\.{2,3}[a-zA-Z0-9%/]|\\.(?!"+t.src_ZCc+"|[.]).|"+(e&&e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+"\\,(?!"+t.src_ZCc+").|\\!(?!"+t.src_ZCc+"|[!]).|\\?(?!"+t.src_ZCc+"|[?]).)+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]+',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-(?!-)|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy="(^|[><]|\\(|"+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}},function(e,t){e.exports=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/},function(e,t){e.exports=/[\0-\x1F\x7F-\x9F]/},function(e,t){e.exports=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/},function(e,t){e.exports=/[!-#%-\*,-/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E49\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/},function(e,t){e.exports=["aaa","aarp","abarth","abb","abbott","abbvie","abc","able","abogado","abudhabi","ac","academy","accenture","accountant","accountants","aco","active","actor","ad","adac","ads","adult","ae","aeg","aero","aetna","af","afamilycompany","afl","africa","ag","agakhan","agency","ai","aig","aigo","airbus","airforce","airtel","akdn","al","alfaromeo","alibaba","alipay","allfinanz","allstate","ally","alsace","alstom","am","americanexpress","americanfamily","amex","amfam","amica","amsterdam","analytics","android","anquan","anz","ao","aol","apartments","app","apple","aq","aquarelle","ar","arab","aramco","archi","army","arpa","art","arte","as","asda","asia","associates","at","athleta","attorney","au","auction","audi","audible","audio","auspost","author","auto","autos","avianca","aw","aws","ax","axa","az","azure","ba","baby","baidu","banamex","bananarepublic","band","bank","bar","barcelona","barclaycard","barclays","barefoot","bargains","baseball","basketball","bauhaus","bayern","bb","bbc","bbt","bbva","bcg","bcn","bd","be","beats","beauty","beer","bentley","berlin","best","bestbuy","bet","bf","bg","bh","bharti","bi","bible","bid","bike","bing","bingo","bio","biz","bj","black","blackfriday","blanco","blockbuster","blog","bloomberg","blue","bm","bms","bmw","bn","bnl","bnpparibas","bo","boats","boehringer","bofa","bom","bond","boo","book","booking","bosch","bostik","boston","bot","boutique","box","br","bradesco","bridgestone","broadway","broker","brother","brussels","bs","bt","budapest","bugatti","build","builders","business","buy","buzz","bv","bw","by","bz","bzh","ca","cab","cafe","cal","call","calvinklein","cam","camera","camp","cancerresearch","canon","capetown","capital","capitalone","car","caravan","cards","care","career","careers","cars","cartier","casa","case","caseih","cash","casino","cat","catering","catholic","cba","cbn","cbre","cbs","cc","cd","ceb","center","ceo","cern","cf","cfa","cfd","cg","ch","chanel","channel","chase","chat","cheap","chintai","christmas","chrome","chrysler","church","ci","cipriani","circle","cisco","citadel","citi","citic","city","cityeats","ck","cl","claims","cleaning","click","clinic","clinique","clothing","cloud","club","clubmed","cm","cn","co","coach","codes","coffee","college","cologne","com","comcast","commbank","community","company","compare","computer","comsec","condos","construction","consulting","contact","contractors","cooking","cookingchannel","cool","coop","corsica","country","coupon","coupons","courses","cr","credit","creditcard","creditunion","cricket","crown","crs","cruise","cruises","csc","cu","cuisinella","cv","cw","cx","cy","cymru","cyou","cz","dabur","dad","dance","data","date","dating","datsun","day","dclk","dds","de","deal","dealer","deals","degree","delivery","dell","deloitte","delta","democrat","dental","dentist","desi","design","dev","dhl","diamonds","diet","digital","direct","directory","discount","discover","dish","diy","dj","dk","dm","dnp","do","docs","doctor","dodge","dog","doha","domains","dot","download","drive","dtv","dubai","duck","dunlop","duns","dupont","durban","dvag","dvr","dz","earth","eat","ec","eco","edeka","edu","education","ee","eg","email","emerck","energy","engineer","engineering","enterprises","epost","epson","equipment","er","ericsson","erni","es","esq","estate","esurance","et","etisalat","eu","eurovision","eus","events","everbank","exchange","expert","exposed","express","extraspace","fage","fail","fairwinds","faith","family","fan","fans","farm","farmers","fashion","fast","fedex","feedback","ferrari","ferrero","fi","fiat","fidelity","fido","film","final","finance","financial","fire","firestone","firmdale","fish","fishing","fit","fitness","fj","fk","flickr","flights","flir","florist","flowers","fly","fm","fo","foo","food","foodnetwork","football","ford","forex","forsale","forum","foundation","fox","fr","free","fresenius","frl","frogans","frontdoor","frontier","ftr","fujitsu","fujixerox","fun","fund","furniture","futbol","fyi","ga","gal","gallery","gallo","gallup","game","games","gap","garden","gb","gbiz","gd","gdn","ge","gea","gent","genting","george","gf","gg","ggee","gh","gi","gift","gifts","gives","giving","gl","glade","glass","gle","global","globo","gm","gmail","gmbh","gmo","gmx","gn","godaddy","gold","goldpoint","golf","goo","goodhands","goodyear","goog","google","gop","got","gov","gp","gq","gr","grainger","graphics","gratis","green","gripe","grocery","group","gs","gt","gu","guardian","gucci","guge","guide","guitars","guru","gw","gy","hair","hamburg","hangout","haus","hbo","hdfc","hdfcbank","health","healthcare","help","helsinki","here","hermes","hgtv","hiphop","hisamitsu","hitachi","hiv","hk","hkt","hm","hn","hockey","holdings","holiday","homedepot","homegoods","homes","homesense","honda","honeywell","horse","hospital","host","hosting","hot","hoteles","hotels","hotmail","house","how","hr","hsbc","ht","hu","hughes","hyatt","hyundai","ibm","icbc","ice","icu","id","ie","ieee","ifm","ikano","il","im","imamat","imdb","immo","immobilien","in","industries","infiniti","info","ing","ink","institute","insurance","insure","int","intel","international","intuit","investments","io","ipiranga","iq","ir","irish","is","iselect","ismaili","ist","istanbul","it","itau","itv","iveco","iwc","jaguar","java","jcb","jcp","je","jeep","jetzt","jewelry","jio","jlc","jll","jm","jmp","jnj","jo","jobs","joburg","jot","joy","jp","jpmorgan","jprs","juegos","juniper","kaufen","kddi","ke","kerryhotels","kerrylogistics","kerryproperties","kfh","kg","kh","ki","kia","kim","kinder","kindle","kitchen","kiwi","km","kn","koeln","komatsu","kosher","kp","kpmg","kpn","kr","krd","kred","kuokgroup","kw","ky","kyoto","kz","la","lacaixa","ladbrokes","lamborghini","lamer","lancaster","lancia","lancome","land","landrover","lanxess","lasalle","lat","latino","latrobe","law","lawyer","lb","lc","lds","lease","leclerc","lefrak","legal","lego","lexus","lgbt","li","liaison","lidl","life","lifeinsurance","lifestyle","lighting","like","lilly","limited","limo","lincoln","linde","link","lipsy","live","living","lixil","lk","llc","loan","loans","locker","locus","loft","lol","london","lotte","lotto","love","lpl","lplfinancial","lr","ls","lt","ltd","ltda","lu","lundbeck","lupin","luxe","luxury","lv","ly","ma","macys","madrid","maif","maison","makeup","man","management","mango","map","market","marketing","markets","marriott","marshalls","maserati","mattel","mba","mc","mckinsey","md","me","med","media","meet","melbourne","meme","memorial","men","menu","meo","merckmsd","metlife","mg","mh","miami","microsoft","mil","mini","mint","mit","mitsubishi","mk","ml","mlb","mls","mm","mma","mn","mo","mobi","mobile","mobily","moda","moe","moi","mom","monash","money","monster","mopar","mormon","mortgage","moscow","moto","motorcycles","mov","movie","movistar","mp","mq","mr","ms","msd","mt","mtn","mtr","mu","museum","mutual","mv","mw","mx","my","mz","na","nab","nadex","nagoya","name","nationwide","natura","navy","nba","nc","ne","nec","net","netbank","netflix","network","neustar","new","newholland","news","next","nextdirect","nexus","nf","nfl","ng","ngo","nhk","ni","nico","nike","nikon","ninja","nissan","nissay","nl","no","nokia","northwesternmutual","norton","now","nowruz","nowtv","np","nr","nra","nrw","ntt","nu","nyc","nz","obi","observer","off","office","okinawa","olayan","olayangroup","oldnavy","ollo","om","omega","one","ong","onl","online","onyourside","ooo","open","oracle","orange","org","organic","origins","osaka","otsuka","ott","ovh","pa","page","panasonic","panerai","paris","pars","partners","parts","party","passagens","pay","pccw","pe","pet","pf","pfizer","pg","ph","pharmacy","phd","philips","phone","photo","photography","photos","physio","piaget","pics","pictet","pictures","pid","pin","ping","pink","pioneer","pizza","pk","pl","place","play","playstation","plumbing","plus","pm","pn","pnc","pohl","poker","politie","porn","post","pr","pramerica","praxi","press","prime","pro","prod","productions","prof","progressive","promo","properties","property","protection","pru","prudential","ps","pt","pub","pw","pwc","py","qa","qpon","quebec","quest","qvc","racing","radio","raid","re","read","realestate","realtor","realty","recipes","red","redstone","redumbrella","rehab","reise","reisen","reit","reliance","ren","rent","rentals","repair","report","republican","rest","restaurant","review","reviews","rexroth","rich","richardli","ricoh","rightathome","ril","rio","rip","rmit","ro","rocher","rocks","rodeo","rogers","room","rs","rsvp","ru","rugby","ruhr","run","rw","rwe","ryukyu","sa","saarland","safe","safety","sakura","sale","salon","samsclub","samsung","sandvik","sandvikcoromant","sanofi","sap","sapo","sarl","sas","save","saxo","sb","sbi","sbs","sc","sca","scb","schaeffler","schmidt","scholarships","school","schule","schwarz","science","scjohnson","scor","scot","sd","se","search","seat","secure","security","seek","select","sener","services","ses","seven","sew","sex","sexy","sfr","sg","sh","shangrila","sharp","shaw","shell","shia","shiksha","shoes","shop","shopping","shouji","show","showtime","shriram","si","silk","sina","singles","site","sj","sk","ski","skin","sky","skype","sl","sling","sm","smart","smile","sn","sncf","so","soccer","social","softbank","software","sohu","solar","solutions","song","sony","soy","space","spiegel","sport","spot","spreadbetting","sr","srl","srt","st","stada","staples","star","starhub","statebank","statefarm","statoil","stc","stcgroup","stockholm","storage","store","stream","studio","study","style","su","sucks","supplies","supply","support","surf","surgery","suzuki","sv","swatch","swiftcover","swiss","sx","sy","sydney","symantec","systems","sz","tab","taipei","talk","taobao","target","tatamotors","tatar","tattoo","tax","taxi","tc","tci","td","tdk","team","tech","technology","tel","telecity","telefonica","temasek","tennis","teva","tf","tg","th","thd","theater","theatre","tiaa","tickets","tienda","tiffany","tips","tires","tirol","tj","tjmaxx","tjx","tk","tkmaxx","tl","tm","tmall","tn","to","today","tokyo","tools","top","toray","toshiba","total","tours","town","toyota","toys","tr","trade","trading","training","travel","travelchannel","travelers","travelersinsurance","trust","trv","tt","tube","tui","tunes","tushu","tv","tvs","tw","tz","ua","ubank","ubs","uconnect","ug","uk","unicom","university","uno","uol","ups","us","uy","uz","va","vacations","vana","vanguard","vc","ve","vegas","ventures","verisign","versicherung","vet","vg","vi","viajes","video","vig","viking","villas","vin","vip","virgin","visa","vision","vista","vistaprint","viva","vivo","vlaanderen","vn","vodka","volkswagen","volvo","vote","voting","voto","voyage","vu","vuelos","wales","walmart","walter","wang","wanggou","warman","watch","watches","weather","weatherchannel","webcam","weber","website","wed","wedding","weibo","weir","wf","whoswho","wien","wiki","williamhill","win","windows","wine","winners","wme","wolterskluwer","woodside","work","works","world","wow","ws","wtc","wtf","xbox","xerox","xfinity","xihuan","xin","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","vermgensberater","vermgensberatung","","","","","","","","","","","","","","xperia","xxx","xyz","yachts","yahoo","yamaxun","yandex","ye","yodobashi","yoga","yokohama","you","youtube","yt","yun","za","zappos","zara","zero","zip","zippo","zm","zone","zuerich","zw"]},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),i=n(0),o=n(7),s=n(9),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.refreshLoopId=0,t}return r(t,e),t.prototype.componentDidMount=function(){var e=this;this.refreshLoopId=window.setInterval(function(){e.forceUpdate()},1e4)},t.prototype.componentWillUnmount=function(){this.refreshLoopId&&window.clearInterval(this.refreshLoopId)},t.prototype.computeAllRelevantEvents=function(){for(var e=o.getTagAndDescendantsRecursive(this.props.tag.id,this.props.tagsById),t=[],n=0,r=Object.keys(this.props.eventsById);n<r.length;n++)for(var a=r[n],i=this.props.eventsById[a],s=0,c=i.tagIds;s<c.length;s++){if(e[c[s]]){t.push(i.id);break}}return t},t.prototype.computeStartMonday=function(){var e=a().startOf("week").add(1,"days");return e>a()&&(e=e.subtract(1,"week")),e},t.prototype.computeStartTimes=function(){var e=this.computeStartMonday();return[a().startOf("day"),e,a(e).subtract(1,"week"),a().startOf("month")].map(function(e){return 1e3*e.unix()})},t.prototype.computeDurationOfEventBetweenTimestamps=function(e,t,n){if(n<=t)return 0;var r=0,a=e.startTime+1e3*e.durationSecs;if(t<a)if(t>=e.startTime){var i=e.durationSecs-(t-e.startTime)/1e3;r=a<=n?i:i-(a-n)/1e3}else n>e.startTime&&(r=a<=n?e.durationSecs:e.durationSecs-(a-n)/1e3);return r},t.prototype.computeSpentTimes=function(e){for(var t=0,n=0,r=0,i=0,o=this.computeStartTimes(),s=o[0],c=o[1],d=o[2],l=o[3],p=1e3*a().unix(),u=0,h=e;u<h.length;u++){var m=h[u],f=this.props.eventsById[m];i+=this.computeDurationOfEventBetweenTimestamps(f,s,p),n+=this.computeDurationOfEventBetweenTimestamps(f,c,p),r+=this.computeDurationOfEventBetweenTimestamps(f,d,c),t+=this.computeDurationOfEventBetweenTimestamps(f,l,p)}return[i,n,r,t]},t.prototype.renderOptions=function(){return i.createElement("div",{className:"options"},i.createElement("a",{className:"close-button",onClick:this.props.closeCallback},"Close"))},t.prototype.renderHeader=function(){return i.createElement("div",{className:"tag-detail-header"},i.createElement("div",{className:"options-container tag-options-container"},i.createElement("div",{className:"title"},this.props.tag.name),this.renderOptions()))},t.prototype.renderParentTags=function(){var e=this,t=o.getTagParentIds(this.props.tag.id,this.props.tagsById);if(0!=t.length)return i.createElement("div",{className:"related-tag-names"},"Parents:",t.map(function(t){var n=e.props.tagsById[t];return i.createElement(s.TagComponent,{key:n.id,tag:n})}))},t.prototype.renderDescendantTags=function(){var e=this,t=o.getTagAndDescendantsRecursive(this.props.tag.id,this.props.tagsById);if(!(Object.keys(t).length<=1))return i.createElement("div",{className:"related-tag-names"},"Descendants:",Object.keys(t).map(function(t){if(parseInt(t)!=e.props.tag.id){var n=e.props.tagsById[t];return i.createElement(s.TagComponent,{key:n.id,tag:n})}}))},t.prototype.renderDurationWithName=function(e,t){if(t)return i.createElement("div",{className:"tag-time-duration"},e,": ",o.renderDuration(t,!1,!1))},t.prototype.renderTimeInfo=function(){var e=this.computeAllRelevantEvents(),t=this.computeSpentTimes(e),n=t[0],r=t[1],a=t[2],o=t[3];return i.createElement("div",{className:"time-info"},this.renderDurationWithName("Spent today",n),this.renderDurationWithName("Spent this week",r),this.renderDurationWithName("Spent last week",a),this.renderDurationWithName("Spent this month",o))},t.prototype.render=function(){return i.createElement("div",{className:"detail-container"},this.renderHeader(),this.renderParentTags(),this.renderDescendantTags(),this.renderTimeInfo())},t}(i.Component);t.TagDetailComponent=c},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=n(6),o=n(19),s=n(71),c=function(e){function t(t){var n=e.call(this,t)||this;return n.state=n.getState(t),n}return r(t,e),t.prototype.componentWillReceiveProps=function(e){this.setState(this.getState(e))},t.prototype.getState=function(e){return{sortedNotes:this.getSortedNotes(e),creatingNote:!1}},t.prototype.getSortedNotes=function(e){for(var t=[],n=0,r=Object.keys(e.notesById);n<r.length;n++){var a=r[n];t.push(e.notesById[a])}return t.sort(function(e,t){return t.creationTime-e.creationTime}),t},t.prototype.toggleCreateNote=function(){this.setState({creatingNote:!this.state.creatingNote})},t.prototype.renderNote=function(e){return a.createElement("div",{key:e.id,className:"note-container"},a.createElement(s.NoteComponent,{meUser:this.props.meUser,note:e,tagsById:this.props.tagsById,updateNote:this.props.updateNote,deleteNote:this.props.deleteNote}))},t.prototype.renderNotes=function(){return a.createElement("div",{className:"notes-container"},this.state.sortedNotes.map(this.renderNote.bind(this)))},t.prototype.renderCreateNote=function(){return this.state.creatingNote?a.createElement(i.ModalComponent,{cancelFunc:this.toggleCreateNote.bind(this)},a.createElement(o.EditNoteComponent,{meUser:this.props.meUser,tagsById:this.props.tagsById,createMode:!0,createNote:this.props.createNote,updateNote:function(e){},deleteNote:function(e){}})):a.createElement("div",{className:"create-note-button-container"},a.createElement("a",{onClick:this.toggleCreateNote.bind(this)},"Create New"))},t.prototype.render=function(){return a.createElement("div",{className:"note-board"},this.renderCreateNote(),this.renderNotes())},t}(a.Component);t.NoteBoardComponent=c},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(2),o=n.n(i);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e};"object"==typeof Reflect&&Reflect.construct;var d="undefined"!=typeof window&&"undefined"!=typeof document,l=!!d&&!!document.documentElement.currentStyle,p={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},u=["letter-spacing","line-height","font-family","font-weight","font-size","font-style","tab-size","text-rendering","text-transform","width","text-indent","padding-top","padding-right","padding-bottom","padding-left","border-top-width","border-right-width","border-bottom-width","border-left-width","box-sizing"],h={},m=d&&document.createElement("textarea"),f=function(e){Object.keys(p).forEach(function(t){e.style.setProperty(t,p[t],"important")})};function g(e,t,n,r,a){void 0===n&&(n=!1),void 0===r&&(r=null),void 0===a&&(a=null),null===m.parentNode&&document.body.appendChild(m);var i=function(e,t,n){void 0===n&&(n=!1);if(n&&h[t])return h[t];var r=window.getComputedStyle(e);if(null===r)return null;var a=u.reduce(function(e,t){return e[t]=r.getPropertyValue(t),e},{}),i=a["box-sizing"];if(""===i)return null;l&&"border-box"===i&&(a.width=parseFloat(a.width)+parseFloat(r["border-right-width"])+parseFloat(r["border-left-width"])+parseFloat(r["padding-right"])+parseFloat(r["padding-left"])+"px");var o=parseFloat(a["padding-bottom"])+parseFloat(a["padding-top"]),s=parseFloat(a["border-bottom-width"])+parseFloat(a["border-top-width"]),c={sizingStyle:a,paddingSize:o,borderSize:s,boxSizing:i};n&&(h[t]=c);return c}(e,t,n);if(null===i)return null;var o=i.paddingSize,s=i.borderSize,c=i.boxSizing,d=i.sizingStyle;Object.keys(d).forEach(function(e){m.style[e]=d[e]}),f(m),m.value=e.value||e.placeholder||"x";var p=-1/0,g=1/0,v=m.scrollHeight;"border-box"===c?v+=s:"content-box"===c&&(v-=o),m.value="x";var y=m.scrollHeight-o;return null===r&&null===a||(null!==r&&(p=y*r,"border-box"===c&&(p=p+o+s),v=Math.max(p,v)),null!==a&&(g=y*a,"border-box"===c&&(g=g+o+s),v=Math.min(g,v))),{height:v,minHeight:p,maxHeight:g,rowCount:Math.floor(v/y)}}d&&f(m);var v=function(e){return void 0===e&&(e=0),function(){return++e}}(),y=function(){},b=d&&window.requestAnimationFrame?[window.requestAnimationFrame,window.cancelAnimationFrame]:[setTimeout,clearTimeout],k=b[0],E=b[1],_=function(e){function t(t){var n;return(n=e.call(this,t)||this)._resizeLock=!1,n._onRootDOMNode=function(e){n._rootDOMNode=e,n.props.inputRef(e)},n._onChange=function(e){n._controlled||n._resizeComponent(),n.props.onChange(e)},n._resizeComponent=function(e){if(void 0===e&&(e=y),void 0!==n._rootDOMNode){var t=g(n._rootDOMNode,n._uid,n.props.useCacheForDOMMeasurements,n.props.minRows,n.props.maxRows);if(null!==t){var r=t.height,a=t.minHeight,i=t.maxHeight,o=t.rowCount;n.rowCount=o,n.state.height===r&&n.state.minHeight===a&&n.state.maxHeight===i?e():n.setState({height:r,minHeight:a,maxHeight:i},e)}else e()}else e()},n.state={height:t.style&&t.style.height||0,minHeight:-1/0,maxHeight:1/0},n._uid=v(),n._controlled="string"==typeof t.value,n}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=(e.inputRef,e.maxRows,e.minRows,e.onHeightChange,e.useCacheForDOMMeasurements,function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,["inputRef","maxRows","minRows","onHeightChange","useCacheForDOMMeasurements"]));return t.style=s({},t.style,{height:this.state.height}),Math.max(t.style.maxHeight||1/0,this.state.maxHeight)<this.state.height&&(t.style.overflow="hidden"),a.a.createElement("textarea",s({},t,{onChange:this._onChange,ref:this._onRootDOMNode}))},n.componentDidMount=function(){var e=this;this._resizeComponent(),this._resizeListener=function(){e._resizeLock||(e._resizeLock=!0,e._resizeComponent(function(){return e._resizeLock=!1}))},window.addEventListener("resize",this._resizeListener)},n.componentDidUpdate=function(e,t){var n=this;e!==this.props&&(this._clearNextFrame(),this._onNextFrameActionId=k(function(){return n._resizeComponent()})),this.state.height!==t.height&&this.props.onHeightChange(this.state.height,this)},n.componentWillUnmount=function(){this._clearNextFrame(),window.removeEventListener("resize",this._resizeListener),function(e){delete h[e]}(this._uid)},n._clearNextFrame=function(){E(this._onNextFrameActionId)},t}(a.a.Component);_.propTypes={inputRef:o.a.func,maxRows:o.a.number,minRows:o.a.number,onChange:o.a.func,onHeightChange:o.a.func,useCacheForDOMMeasurements:o.a.bool,value:o.a.string},_.defaultProps={inputRef:y,onChange:y,onHeightChange:y,useCacheForDOMMeasurements:!1},t.default=_},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=n(72),o=n(9),s=n(19),c=n(6),d=function(e){function t(t){var n=e.call(this,t)||this;return n.state={editing:!1},n}return r(t,e),t.prototype.componentWillReceiveProps=function(e){this.state={editing:!1}},t.prototype.toggleEditing=function(){this.setState({editing:!this.state.editing})},t.prototype.renderNoteId=function(){return a.createElement("div",{className:"note-id"},"N",this.props.note.id)},t.prototype.renderTag=function(e){var t=this.props.tagsById[e];return a.createElement(o.TagComponent,{tag:t,key:e})},t.prototype.renderTags=function(){if(this.props.note.tagIds.length)return a.createElement("div",{className:"note-tags-container"},"Tags:",this.props.note.tagIds.map(this.renderTag.bind(this)))},t.prototype.renderOptions=function(){return a.createElement("div",{className:"note-options"},a.createElement("div",{className:"Edit",onClick:this.toggleEditing.bind(this)},"Edit"))},t.prototype.renderNoteHeader=function(){return a.createElement("div",{className:"note-header"},a.createElement("div",{className:"note-title"},this.props.note.title),a.createElement("div",{className:"note-right-header"},this.renderOptions(),this.renderNoteId()))},t.prototype.renderEditingNote=function(){if(this.state.editing)return a.createElement(c.ModalComponent,{cancelFunc:this.toggleEditing.bind(this)},a.createElement(s.EditNoteComponent,{meUser:this.props.meUser,note:this.props.note,tagsById:this.props.tagsById,createMode:!1,createNote:function(e){},updateNote:this.props.updateNote,deleteNote:this.props.deleteNote}))},t.prototype.renderNote=function(){if(!this.state.editing)return a.createElement("div",{className:"note-content"},a.createElement(i,{source:this.props.note.content,escapeHtml:!0,sourcePos:!0}),this.renderTags())},t.prototype.render=function(){return a.createElement("div",{className:"note card"},this.renderNoteHeader(),this.renderNote(),this.renderEditingNote())},t}(a.Component);t.NoteComponent=d},function(e,t){e.exports=reactMarkdown},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),i=n(0),o=function(e){function t(t){var n=e.call(this,t)||this;return n.state={capture:n._getEmptyCapture(t)},n}return r(t,e),t.prototype.componentWillReceiveProps=function(e){null!=e.lastSaved&&e.lastSaved.content==this.state.capture.content&&this.setState({capture:this._getEmptyCapture(e)})},t.prototype._getEmptyCapture=function(e){return{id:0,content:"",authorId:e.meUser.id,creationTime:1e3*a().unix()}},t.prototype.submitForm=function(e){if("create"!=e)throw Error("Unknown submit type!");this.props.createCapture(this.state.capture)},t.prototype.updateAttr=function(e,t){this.state.capture[e]=t.target.value,this.setState(this.state)},t.prototype.renderButtons=function(){return i.createElement("div",{className:"create-capture-button-container"},i.createElement("input",{type:"button",value:"Create",onClick:this.submitForm.bind(this,"create")}))},t.prototype.renderForm=function(){return i.createElement("div",null,i.createElement("div",{className:"content-container"},i.createElement("textarea",{name:"content",value:this.state.capture.content,onChange:this.updateAttr.bind(this,"content")})),this.renderButtons())},t.prototype.render=function(){return i.createElement("div",{className:"create-capture-container"},i.createElement("h1",null,"Capture Something..."),this.renderForm())},t}(i.Component);t.CreateCaptureComponent=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=n(20),o=n(21),s=function(e){function t(t){var n=e.call(this,t)||this;return n.state={captures:t.captures,capturesById:o.API.getCapturesById(t.captures)},n}return r(t,e),t.prototype.updateStateWithCaptures=function(e){this.setState({captures:e,capturesById:o.API.getCapturesById(e)})},t.prototype.componentWillReceiveProps=function(e){this.updateStateWithCaptures(e.captures)},t.prototype.createCapture=function(e){var t=this;o.API.createCapture(e,function(e){var n=t.state.captures.concat(e);t.updateStateWithCaptures(n)})},t.prototype.deleteCapture=function(e){var t=this;o.API.deleteCapture(e,function(e){var n=t.state.captures.filter(function(t){return t.id!=e.id});t.updateStateWithCaptures(n)})},t.prototype.render=function(){return a.createElement("div",{className:"capturer-container"},a.createElement(i.CaptureListComponent,{meUser:this.props.meUser,capturesById:this.state.capturesById,createCapture:this.createCapture.bind(this),deleteCapture:this.deleteCapture.bind(this)}))},t}(a.Component);t.Capturer=s}]);