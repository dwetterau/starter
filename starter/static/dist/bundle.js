!function(t){var e={};function n(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(r,a,function(e){return t[e]}.bind(null,a));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/static/dist/",n(n.s=22)}([function(t,e){t.exports=React},function(t,e){t.exports=moment},function(t,e,n){t.exports=n(43)()},function(t,e){t.exports=jQuery},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),i=function(t){function e(e){var n=t.call(this,e)||this;return n.state=n.getState(e),n}return r(e,t),e.prototype.componentWillReceiveProps=function(t){this.setState(this.getState(t))},e.prototype.getState=function(t){var e=this,n={tokens:[],pendingToken:"",autoCompleteTokens:[],selectedTokenIndex:-1};return t.initialValues&&t.initialValues.forEach(function(t){e.props.tokenLimit&&n.tokens.length>=e.props.tokenLimit||n.tokens.push(t)}),n},e.prototype.updateAutoComplete=function(t){var e=this;if(t=t.toLowerCase(),!this.props.possibleTokens||0==t.length)return[];var n=[];return this.props.possibleTokens.forEach(function(r){var a=r.label.toLowerCase().indexOf(t);a>=0&&(e.tokenAlreadyAdded(r)||n.push([a,r]))}),n.sort(function(t,e){var n=t[0],r=t[1],a=e[0],i=e[1];return n!=a?n-a:r.label<i.label?-1:r.label==i.label?0:1}),(n=n.slice(0,5)).map(function(t){return t[1]})},e.prototype.updatePendingToken=function(t){var e=t.target.value.trim(),n=this.updateAutoComplete(t.target.value),r=this.state.selectedTokenIndex;null==this.state.selectedTokenIndex?r=-1:this.state.selectedTokenIndex>=this.state.autoCompleteTokens.length&&(r=this.state.autoCompleteTokens.length-1),this.setState({pendingToken:e,autoCompleteTokens:n,selectedTokenIndex:r})},e.prototype.tokenAlreadyAdded=function(t){var e=!1;return this.state.tokens.forEach(function(n){t.value==n.value&&(e=!0)}),e},e.prototype.appendToken=function(t){var e=this.state.tokens.concat([{label:t.label,subtext:t.subtext,value:t.value}]);this.setState({tokens:e,pendingToken:"",autoCompleteTokens:[],selectedTokenIndex:-1}),this.props.onChange(e)},e.prototype.onClick=function(t,e){e.preventDefault(),this.appendToken(t)},e.prototype.onKeyPress=function(t){if("Enter"==t.key){if(this.props.tokenLimit&&this.state.tokens.length>=this.props.tokenLimit)return;if(this.state.selectedTokenIndex>=0)return void this.appendToken(this.state.autoCompleteTokens[this.state.selectedTokenIndex]);var e=this.state.pendingToken,n=!1,r={label:e,value:e};this.props.possibleTokens?this.props.possibleTokens.forEach(function(t){t.label.toLowerCase()==e.toLowerCase()&&(n=!0,r=t)}):n=!0,n&&!this.tokenAlreadyAdded(r)&&this.appendToken(r)}},e.prototype.onKeyDown=function(t){if("ArrowDown"==t.key){if(!this.state.autoCompleteTokens.length)return;this.setState({selectedTokenIndex:Math.min(this.state.selectedTokenIndex+1,this.state.autoCompleteTokens.length-1)})}else if("ArrowUp"==t.key){if(!this.state.autoCompleteTokens.length)return;this.setState({selectedTokenIndex:Math.max(this.state.selectedTokenIndex-1,0)})}},e.prototype.removeToken=function(t){var e=this.state.tokens.filter(function(e){return t.label!=e.label});this.setState({tokens:e}),this.props.onChange(e)},e.prototype.renderToken=function(t,e){return a.createElement("div",{className:"card rendered-token",key:e},t.label,a.createElement("div",{className:"remove-token",onClick:this.removeToken.bind(this,t)},"x"))},e.prototype.renderTokens=function(){if(this.state.tokens.length)return a.createElement("div",{className:"tokens-container"},this.state.tokens.map(this.renderToken.bind(this)))},e.prototype.shouldHidePendingToken=function(){return this.props.tokenLimit&&this.state.tokens.length>=this.props.tokenLimit},e.prototype.renderPendingToken=function(){if(!this.shouldHidePendingToken())return a.createElement("div",{className:"pending-token-container"},a.createElement("input",{type:"text",value:this.state.pendingToken,onChange:this.updatePendingToken.bind(this),onKeyPress:this.onKeyPress.bind(this),onKeyDown:this.onKeyDown.bind(this)}))},e.prototype.renderTokenSubtext=function(t){if(t.subtext)return a.createElement("div",{className:"token-subtext"},t.subtext)},e.prototype.renderAutoComplete=function(){var t=this;if(!this.shouldHidePendingToken()&&this.state.autoCompleteTokens.length)return a.createElement("div",{className:"autocomplete-token-container"},this.state.autoCompleteTokens.map(function(e,n){var r="autocomplete-token";return n==t.state.selectedTokenIndex&&(r+=" -selected"),a.createElement("div",{className:r,key:e.value,onClick:t.onClick.bind(t,e)},e.label,t.renderTokenSubtext(e))}))},e.prototype.render=function(){return a.createElement("div",{className:"tokenizer-container"},this.renderTokens(),a.createElement("div",{className:"pending-state-container"},this.renderPendingToken(),this.renderAutoComplete()))},e}(a.Component);e.TokenizerComponent=i},function(t,e,n){"use strict";var r=n(0),a=n(45);if(void 0===r)throw Error("create-react-class could not find the React object. If you are using script tags, make sure that React is being loaded before create-react-class.");var i=(new r.Component).updater;t.exports=a(r.Component,r.isValidElement,i)},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var a=n(3),i=n(0),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.componentDidMount=function(){var t=this,e=document.getElementsByClassName("modal");if(e.length>0){var n=e[0].getElementsByTagName("input");n.length>0&&n[0].focus()}a(document).bind("keyup.modalComponent",function(e){27==e.which&&t.props.cancelFunc()})},e.prototype.componentWillUnmount=function(){a(document).unbind("keyup.modalComponent")},e.prototype.renderCancelButton=function(){return i.createElement("div",{className:"cancel-button-container",onClick:this.props.cancelFunc},"x")},e.prototype.render=function(){return i.createElement("div",{className:"modal-container"},i.createElement("div",{className:"background"},i.createElement("div",{className:"modal card"},this.renderCancelButton(),this.props.children)))},e}(i.Component);e.ModalComponent=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.debounce=function(t,e){var n=null;return function(){var r=arguments,a=!n;n||(n=setTimeout(function(){n=null},e)),a&&t.apply(this,r)}},e.renderDuration=function(t,e,n){var r="",a=function(e,n,a){if(!(t<n)){r.length&&(r+=", ");var i=Math.floor(t/n);r+=i+" "+e,1!=i&&a&&(r+="s"),t-=i*n}};return n?(a(e?"w":"week",604800,!e),a(e?"d":"day",86400,!e)):(a(e?"hr":"hour",3600,!0),a(e?"min":"minute",60,!0),e||a("second",1,!0)),r.length?r:"None"},e.getTagAndDescendantsRecursive=function(t,e){for(var n={},r=[t];r.length;){var a=r.pop();n[a]=!0;for(var i=0,o=e[a].childTagIds;i<o.length;i++){var s=o[i];n[s]||r.push(s)}}return n},e.getTagParentIds=function(t,e){for(var n=[],r=0,a=Object.keys(e);r<a.length;r++)for(var i=e[a[r]],o=0,s=i.childTagIds;o<s.length;o++)if(s[o]==t){n.push(i.id);break}return n}},function(t,e,n){"use strict";n.r(e),n.d(e,"IGNORE_CLASS_NAME",function(){return p});var r=n(0),a=n(11);function i(t,e,n){return t===e||(t.correspondingElement?t.correspondingElement.classList.contains(n):t.classList.contains(n))}var o=function(){if("undefined"!=typeof window&&"function"==typeof window.addEventListener){var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}}),n=function(){};return window.addEventListener("testPassiveEventSupport",n,e),window.removeEventListener("testPassiveEventSupport",n,e),t}};var s,c=function(t){return void 0===t&&(t=0),function(){return++t}}(),d={},l={},u=["touchstart","touchmove"],p="ignore-react-onclickoutside";function h(t,e){var n=null;return-1!==u.indexOf(e)&&s&&(n={passive:!t.props.preventDefault}),n}e.default=function(t,e){var n,u;return u=n=function(n){function u(t){var e;return(e=n.call(this,t)||this).__outsideClickHandler=function(t){if("function"!=typeof e.__clickOutsideHandlerProp){var n=e.getInstance();if("function"!=typeof n.props.handleClickOutside){if("function"!=typeof n.handleClickOutside)throw new Error("WrappedComponent lacks a handleClickOutside(event) function for processing outside click events.");n.handleClickOutside(t)}else n.props.handleClickOutside(t)}else e.__clickOutsideHandlerProp(t)},e.enableOnClickOutside=function(){if("undefined"!=typeof document&&!l[e._uid]){void 0===s&&(s=o()),l[e._uid]=!0;var t=e.props.eventTypes;t.forEach||(t=[t]),d[e._uid]=function(t){e.props.disableOnClickOutside||null!==e.componentNode&&(e.props.preventDefault&&t.preventDefault(),e.props.stopPropagation&&t.stopPropagation(),e.props.excludeScrollbar&&function(t){return document.documentElement.clientWidth<=t.clientX||document.documentElement.clientHeight<=t.clientY}(t)||function(t,e,n){if(t===e)return!0;for(;t.parentNode;){if(i(t,e,n))return!0;t=t.parentNode}return t}(t.target,e.componentNode,e.props.outsideClickIgnoreClass)===document&&e.__outsideClickHandler(t))},t.forEach(function(t){document.addEventListener(t,d[e._uid],h(e,t))})}},e.disableOnClickOutside=function(){delete l[e._uid];var t=d[e._uid];if(t&&"undefined"!=typeof document){var n=e.props.eventTypes;n.forEach||(n=[n]),n.forEach(function(n){return document.removeEventListener(n,t,h(e,n))}),delete d[e._uid]}},e.getRef=function(t){return e.instanceRef=t},e._uid=c(),e}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(u,n);var p=u.prototype;return p.getInstance=function(){if(!t.prototype.isReactComponent)return this;var e=this.instanceRef;return e.getInstance?e.getInstance():e},p.componentDidMount=function(){if("undefined"!=typeof document&&document.createElement){var t=this.getInstance();if(e&&"function"==typeof e.handleClickOutside&&(this.__clickOutsideHandlerProp=e.handleClickOutside(t),"function"!=typeof this.__clickOutsideHandlerProp))throw new Error("WrappedComponent lacks a function for processing outside click events specified by the handleClickOutside config option.");this.componentNode=Object(a.findDOMNode)(this.getInstance()),this.enableOnClickOutside()}},p.componentDidUpdate=function(){this.componentNode=Object(a.findDOMNode)(this.getInstance())},p.componentWillUnmount=function(){this.disableOnClickOutside()},p.render=function(){var e=this.props,n=(e.excludeScrollbar,function(t,e){if(null==t)return{};var n,r,a={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(a[n]=t[n]);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}(e,["excludeScrollbar"]));return t.prototype.isReactComponent?n.ref=this.getRef:n.wrappedRef=this.getRef,n.disableOnClickOutside=this.disableOnClickOutside,n.enableOnClickOutside=this.enableOnClickOutside,Object(r.createElement)(t,n)},u}(r.Component),n.displayName="OnClickOutside("+(t.displayName||t.name||"Component")+")",n.defaultProps={eventTypes:["mousedown","touchstart"],excludeScrollbar:e&&e.excludeScrollbar||!1,outsideClickIgnoreClass:p,preventDefault:!1,stopPropagation:!1},n.getClass=function(){return t.getClass?t.getClass():t},u}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),i=n(10),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.selectTag=function(t){t.stopPropagation();var e=new CustomEvent(i.signalDisplayTagInfo,{detail:this.props.tag.id});document.dispatchEvent(e)},e.prototype.render=function(){return a.createElement("div",{className:"tag card",onClick:this.selectTag.bind(this)},this.props.tag.name)},e}(a.Component);e.TagComponent=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.signalDisplayTaskInfo="signalDisplayTaskInfo",e.signalBeginEditingTask="signalBeginEditingTask",e.signalDisplayTagInfo="signalDisplayTagInfo"},function(t,e){t.exports=ReactDOM},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return function(){}}();e.User=r;var a=function(){return function(){}}();e.Task=a,e.priorityNameList=[["Unknown",0],["Highest",500],["High",400],["Normal",300],["Low",200],["Lowest",100]],e.stateNameList=[["Open",0],["In Progress",500],["Blocked",750],["Project",900],["Closed",1e3]];var i=function(){return function(){}}();e.Event=i;var o=function(){return function(){}}();e.Tag=o;var s=function(){return function(){}}();e.Note=s;var c=function(){return function(){}}();e.Capture=c},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var a=function(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}(r),i=r.sources.map(function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"});return[n].concat(i).concat([a]).join("\n")}return[n].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},a=0;a<this.length;a++){var i=this[a][0];"number"==typeof i&&(r[i]=!0)}for(a=0;a<t.length;a++){var o=t[a];"number"==typeof o[0]&&r[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),e.push(o))}},e}},function(t,e,n){var r={},a=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}}(function(){return window&&document&&document.all&&!window.atob}),i=function(t){var e={};return function(t){if("function"==typeof t)return t();if(void 0===e[t]){var n=function(t){return document.querySelector(t)}.call(this,t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}}(),o=null,s=0,c=[],d=n(35);function l(t,e){for(var n=0;n<t.length;n++){var a=t[n],i=r[a.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](a.parts[o]);for(;o<a.parts.length;o++)i.parts.push(g(a.parts[o],e))}else{var s=[];for(o=0;o<a.parts.length;o++)s.push(g(a.parts[o],e));r[a.id]={id:a.id,refs:1,parts:s}}}}function u(t,e){for(var n=[],r={},a=0;a<t.length;a++){var i=t[a],o=e.base?i[0]+e.base:i[0],s={css:i[1],media:i[2],sourceMap:i[3]};r[o]?r[o].parts.push(s):n.push(r[o]={id:o,parts:[s]})}return n}function p(t,e){var n=i(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=c[c.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),c.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var a=i(t.insertInto+" "+t.insertAt.before);n.insertBefore(e,a)}}function h(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=c.indexOf(t);e>=0&&c.splice(e,1)}function m(t){var e=document.createElement("style");return void 0===t.attrs.type&&(t.attrs.type="text/css"),f(e,t.attrs),p(t,e),e}function f(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function g(t,e){var n,r,a,i;if(e.transform&&t.css){if(!(i=e.transform(t.css)))return function(){};t.css=i}if(e.singleton){var c=s++;n=o||(o=m(e)),r=y.bind(null,n,c,!1),a=y.bind(null,n,c,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",f(e,t.attrs),p(t,e),e}(e),r=function(t,e,n){var r=n.css,a=n.sourceMap,i=void 0===e.convertToAbsoluteUrls&&a;(e.convertToAbsoluteUrls||i)&&(r=d(r));a&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */");var o=new Blob([r],{type:"text/css"}),s=t.href;t.href=URL.createObjectURL(o),s&&URL.revokeObjectURL(s)}.bind(null,n,e),a=function(){h(n),n.href&&URL.revokeObjectURL(n.href)}):(n=m(e),r=function(t,e){var n=e.css,r=e.media;r&&t.setAttribute("media",r);if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),a=function(){h(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else a()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=a()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=u(t,e);return l(n,e),function(t){for(var a=[],i=0;i<n.length;i++){var o=n[i];(s=r[o.id]).refs--,a.push(s)}t&&l(u(t,e),e);for(i=0;i<a.length;i++){var s;if(0===(s=a[i]).refs){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete r[s.id]}}}};var v=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}();function y(t,e,n,r){var a=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=v(e,a);else{var i=document.createTextNode(a),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(i,o[e]):t.appendChild(i)}}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var a,i=n(3),o=n(0),s=n(16),c=n(36),d=n(17),l=n(55),u=n(58),p=n(10),h=n(59),m=n(68),f=n(69),g=n(20),v=n(21);!function(t){t[t.mergedView=0]="mergedView",t[t.planView=1]="planView",t[t.taskView=2]="taskView",t[t.eventView=3]="eventView",t[t.tagView=4]="tagView",t[t.noteView=5]="noteView"}(a=e.AppViewMode||(e.AppViewMode={}));var y=function(t){function e(e){var n=t.call(this,e)||this;return n._handleDisplayTaskInfo=null,n._handleDisplayTagInfo=null,n._apiError=null,n.state={tasks:e.tasks,events:e.events,tags:e.tags,notes:e.notes,captures:e.captures,tagsById:v.API.getTagsById(e.tags),eventsById:v.API.getEventsById(e.events),tasksById:v.API.getTasksById(e.tasks),notesById:v.API.getNotesById(e.notes),capturesById:v.API.getCapturesById(e.captures),detailInfo:{},taskBoardView:{type:d.TaskBoardViewType.status,shouldHideClosedTasks:!1}},n}return r(e,t),e.prototype.componentDidMount=function(){this._handleDisplayTaskInfo=this.handleDisplayTaskInfo.bind(this),document.addEventListener(p.signalDisplayTaskInfo,this._handleDisplayTaskInfo),this._handleDisplayTagInfo=this.handleDisplayTagInfo.bind(this),document.addEventListener(p.signalDisplayTagInfo,this._handleDisplayTagInfo)},e.prototype.componentWillUnmount=function(){document.removeEventListener(p.signalDisplayTaskInfo,this._handleDisplayTaskInfo),this._handleDisplayTaskInfo=null,document.removeEventListener(p.signalDisplayTagInfo,this._handleDisplayTagInfo),this._handleDisplayTagInfo=null},e.prototype.handleDisplayTaskInfo=function(t){this.setState({detailInfo:{taskId:t.detail,tagId:null}})},e.prototype.handleDisplayTagInfo=function(t){var e=t.detail;this.setState({detailInfo:{taskId:null,tagId:e}})},e.prototype.handleApiError=function(t){var e=this;this._apiError=t,setTimeout(function(){e._apiError&&t.responseText==e._apiError.responseText&&(e._apiError=null,i("#toast-container").addClass("hidden"))},4e3),i("#toast-container").html(this._apiError.status+" - "+this._apiError.responseText).removeClass("hidden")},e.prototype.updateStateWithTasks=function(t){this.setState({tasks:t,tasksById:v.API.getTasksById(t)})},e.prototype.createTask=function(t){var e=this;v.API.createTask(t,function(t){e.updateStateWithTasks(e.state.tasks.concat([t]))}).fail(this.handleApiError.bind(this))},e.prototype.updateTask=function(t){var e=this;v.API.updateTask(t,function(t){var n=e.state.tasks.map(function(e){return e.id==t.id?t:e});e.updateStateWithTasks(n)}).fail(this.handleApiError.bind(this))},e.prototype.deleteTask=function(t){var e=this;v.API.deleteTask(t,function(t){e.updateStateWithTasks(e.state.tasks.filter(function(e){return e.id!=t.id}))}).fail(this.handleApiError.bind(this))},e.prototype.updateStateWithEvents=function(t,e,n){var r=v.API.getTasksAfterEventChange(this.state.tasks,t,e);0==r.length&&this.setState({events:n,eventsById:v.API.getEventsById(n)});var a=v.API.getTasksById(r),i=this.state.tasks.map(function(t){return a.hasOwnProperty(t.id)?a[t.id]:t});this.setState({events:n,eventsById:v.API.getEventsById(n),tasks:i,tasksById:v.API.getTasksById(i)})},e.prototype.createEvent=function(t){var e=this;v.API.createEvent(t,function(t){e.updateStateWithEvents(t,!1,e.state.events.concat([t]))}).fail(this.handleApiError.bind(this))},e.prototype.updateEvent=function(t){var e=this;v.API.updateEvent(t,function(t){var n=e.state.events.map(function(e){return e.id==t.id?t:e});e.updateStateWithEvents(t,!1,n)}).fail(this.handleApiError.bind(this))},e.prototype.deleteEvent=function(t){var e=this;v.API.deleteEvent(t,function(t){var n=e.state.events.filter(function(e){return e.id!=t.id});e.updateStateWithEvents(t,!0,n)}).fail(this.handleApiError.bind(this))},e.prototype.updateStateWithTags=function(t){this.setState({tags:t,tagsById:v.API.getTagsById(t)})},e.prototype.createTag=function(t){var e=this;v.API.createTag(t,function(t){e.updateStateWithTags(e.state.tags.concat([t]))}).fail(this.handleApiError.bind(this))},e.prototype.updateTag=function(t){var e=this;v.API.updateTag(t,function(t){var n=e.state.tags.map(function(e){return e.id==t.id?t:e});e.updateStateWithTags(n)}).fail(this.handleApiError.bind(this))},e.prototype.deleteTag=function(t){},e.prototype.updateStateWithNotes=function(t){this.setState({notes:t,notesById:v.API.getNotesById(t)})},e.prototype.createNote=function(t){var e=this;v.API.createNote(t,function(t){e.updateStateWithNotes(e.state.notes.concat([t]))}).fail(this.handleApiError.bind(this))},e.prototype.updateNote=function(t){var e=this;v.API.updateNote(t,function(t){var n=e.state.notes.map(function(e){return e.id==t.id?t:e});e.updateStateWithNotes(n)}).fail(this.handleApiError.bind(this))},e.prototype.deleteNote=function(t){var e=this;v.API.deleteNote(t,function(t){e.updateStateWithNotes(e.state.notes.filter(function(e){return e.id!=t.id}))}).fail(this.handleApiError.bind(this))},e.prototype.updateStateWithCaptures=function(t){this.setState({captures:t,capturesById:v.API.getCapturesById(t)})},e.prototype.createCapture=function(t){var e=this;v.API.createCapture(t,function(t){e.updateStateWithCaptures(e.state.captures.concat([t]))}).fail(this.handleApiError.bind(this))},e.prototype.deleteCapture=function(t){var e=this;v.API.deleteCapture(t,function(t){e.updateStateWithCaptures(e.state.captures.filter(function(e){return e.id!=t.id}))}).fail(this.handleApiError.bind(this))},e.prototype.beginEditingSelectedTask=function(){if(this.state.detailInfo.taskId){var t=new CustomEvent(p.signalBeginEditingTask,{detail:this.state.detailInfo.taskId});document.dispatchEvent(t)}},e.prototype.closeDetail=function(){this.setState({detailInfo:{}})},e.prototype.changeTaskBoardView=function(t){this.setState({taskBoardView:t})},e.prototype.getSelectedTag=function(t){var e=null;if(!t)return e;for(var n=t.toLowerCase(),r=0,a=Object.keys(this.state.tagsById);r<a.length;r++){var i=a[r];this.state.tagsById[i].name.toLowerCase()==n&&(e=this.state.tagsById[i])}return e},e.prototype.changeSelectedTag=function(t){t&&("/plan"==window.location.pathname||"/tag"==window.location.pathname||"/tasks"==window.location.pathname?window.location.href+="/"+t.name:"/"==window.location.pathname?window.location.href="/tag/"+t.name:window.location.href="../"+t.name)},e.prototype.renderDetail=function(){if(this.state.detailInfo.taskId){var t=this.state.tasksById[this.state.detailInfo.taskId];return t?o.createElement(h.TaskDetailComponent,{task:t,eventsById:this.state.eventsById,closeCallback:this.closeDetail.bind(this),editCallback:this.beginEditingSelectedTask.bind(this)}):void console.error("Task not found to show detail for...")}if(this.state.detailInfo.tagId){var e=this.state.tagsById[this.state.detailInfo.tagId];return e?o.createElement(m.TagDetailComponent,{tag:e,eventsById:this.state.eventsById,tagsById:this.state.tagsById,closeCallback:this.closeDetail.bind(this)}):void console.error("Tag not found to show detail for...")}},e.prototype.renderToasts=function(){return o.createElement("div",{id:"toast-container",className:"hidden"})},e.prototype.renderMergedView=function(t){return o.createElement("div",{className:"merged-container"},o.createElement("div",{className:"main-pane"},o.createElement("div",{className:"merged-task-container"},this.renderTaskBoard(t)),this.renderDetail()),o.createElement("div",{className:"right-pane"},o.createElement("div",{className:"merged-capture-container"},this.renderCaptures())))},e.prototype.renderPlanView=function(t){return o.createElement("div",{className:"merged-container"},o.createElement("div",{className:"main-pane"},o.createElement("div",{className:"merged-task-container"},this.renderTaskBoard(t)),this.renderDetail()),o.createElement("div",{className:"right-pane"},o.createElement("div",{className:"merged-calendar-container"},this.renderCalendar(l.CalendarViewType.day,!0))))},e.prototype.renderTaskBoard=function(t){return o.createElement(d.TaskBoardComponent,{meUser:this.props.meUser,tasksById:this.state.tasksById,tagsById:this.state.tagsById,eventsById:this.state.eventsById,createTask:this.createTask.bind(this),updateTask:this.updateTask.bind(this),deleteTask:this.deleteTask.bind(this),selectedTag:this.getSelectedTag(t),changeSelectedTag:this.changeSelectedTag.bind(this),view:this.state.taskBoardView,changeView:this.changeTaskBoardView.bind(this)})},e.prototype.renderCalendar=function(t,e){return o.createElement(l.CalendarComponent,{meUser:this.props.meUser,eventsById:this.state.eventsById,tagsById:this.state.tagsById,tasksById:this.state.tasksById,initialViewType:t,simpleOptions:e,createEvent:this.createEvent.bind(this),updateEvent:this.updateEvent.bind(this),deleteEvent:this.deleteEvent.bind(this)})},e.prototype.renderCaptures=function(){return o.createElement(g.CaptureListComponent,{meUser:this.props.meUser,capturesById:this.state.capturesById,createCapture:this.createCapture.bind(this),deleteCapture:this.deleteCapture.bind(this)})},e.prototype.renderTagGraph=function(){return o.createElement(c.TagGraphComponent,{meUser:this.props.meUser,tagsById:this.state.tagsById,createTag:this.createTag.bind(this),updateTag:this.updateTag.bind(this),deleteTag:this.deleteTag.bind(this)})},e.prototype.renderNotes=function(){return o.createElement(f.NoteBoardComponent,{meUser:this.props.meUser,notesById:this.state.notesById,tagsById:this.state.tagsById,createNote:this.createNote.bind(this),updateNote:this.updateNote.bind(this),deleteNote:this.deleteNote.bind(this)})},e.prototype.renderPageContainer=function(t,e){return o.createElement("div",null,o.createElement(u.AppHeader,{meUser:this.props.meUser,viewMode:t}),o.createElement("div",{className:"board-container"},e()),this.renderToasts())},e.prototype.render=function(){var t=this,e=function(e){return t.renderPageContainer(a.eventView,t.renderCalendar.bind(t,e,!1))};return o.createElement("div",null,o.createElement(s.BrowserRouter,null,o.createElement("div",null,o.createElement(s.Route,{exact:!0,path:"/",component:function(){return t.renderPageContainer(a.mergedView,t.renderMergedView.bind(t))}}),o.createElement(s.Route,{exact:!0,path:"/plan",component:function(){return t.renderPageContainer(a.planView,t.renderPlanView.bind(t))}}),o.createElement(s.Route,{path:"/plan/:tagName",component:function(e){return t.renderPageContainer(a.planView,t.renderPlanView.bind(t,e.match.params.tagName))}}),o.createElement(s.Route,{path:"/tasks",component:function(){return t.renderPageContainer(a.taskView,t.renderTaskBoard.bind(t))}}),o.createElement(s.Route,{exact:!0,path:"/cal",component:e.bind(this,l.CalendarViewType.week)}),o.createElement(s.Route,{path:"/cal/week",component:e.bind(this,l.CalendarViewType.week)}),o.createElement(s.Route,{path:"/cal/day",component:e.bind(this,l.CalendarViewType.day)}),o.createElement(s.Route,{path:"/tag/:tagName",component:function(e){return t.renderPageContainer(a.mergedView,t.renderMergedView.bind(t,e.match.params.tagName))}}),o.createElement(s.Route,{path:"/tags",component:function(){return t.renderPageContainer(a.tagView,t.renderTagGraph.bind(t))}}),o.createElement(s.Route,{path:"/notes",component:function(){return t.renderPageContainer(a.noteView,t.renderNotes.bind(t))}}))))},e}(o.Component);e.App=y},function(t,e){t.exports=ReactRouterDOM},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var a,i=n(0),o=n(3),s=n(1),c=n(39),d=n(12),l=n(54),u=n(4),p=n(6),h=n(10),m=n(7);!function(t){t[t.status=0]="status",t[t.priority=1]="priority"}(a=e.TaskBoardViewType||(e.TaskBoardViewType={}));var f=function(t){function e(e){var n=t.call(this,e)||this;return n._handleBeginEditingTask=null,n._dragTargetElement=null,n.state=n.getState(e),n}return r(e,t),e.prototype.componentWillReceiveProps=function(t){this.setState(this.getState(t))},e.prototype.componentDidMount=function(){this._handleBeginEditingTask=this.handleBeginEditingTask.bind(this),document.addEventListener(h.signalBeginEditingTask,this._handleBeginEditingTask)},e.prototype.componentWillUnmount=function(){document.removeEventListener(h.signalBeginEditingTask,this._handleBeginEditingTask),this._handleBeginEditingTask=null},e.prototype.handleBeginEditingTask=function(t){if(!this.state.editingTask){var e=t.detail;this.setState({editingTask:this.props.tasksById[e]})}},e.prototype.getState=function(t){var e=this.divideByType(t.tasksById,t.view.type,t.selectedTag,t.view.shouldHideClosedTasks),n=e[0],r=e[1];return{columns:e[2],headers:n,columnTypes:r,createColumnType:null,draggingTask:null,editingTask:null}},e.prototype.divideByType=function(t,e,n,r){var i=this,o={},s=[],c=[],l=[],u={};if(u[a.status]={attr:"state",orderedNameAndValue:d.stateNameList,sortFunc:function(t,e){if(1e3==t.state&&1e3==e.state)return e.stateUpdatedTime-t.stateUpdatedTime;var n=0==t.priority?1e3:t.priority,r=0==e.priority?1e3:e.priority;return n!=r?r-n:(0==t.dueTime?Number.MAX_VALUE:t.dueTime)-(0==e.dueTime?Number.MAX_VALUE:e.dueTime)}},u[a.priority]={attr:"priority",orderedNameAndValue:d.priorityNameList,sortFunc:function(t,e){return t.state-e.state}},!u[e])throw Error("Split type not implemented: "+e);var p=u[e],h=p.attr,f=p.orderedNameAndValue,g=p.sortFunc,v={};n&&(v=m.getTagAndDescendantsRecursive(n.id,this.props.tagsById));for(var y=function(t){if(n){var o=!1;if(t.tagIds.forEach(function(t){o=o||v[t]}),!o)return!0}return!!i.state&&!(1e3!=t.state||e!=a.priority||!r)},b=0,k=Object.keys(t);b<k.length;b++){var E=t[k[b]];y(E)||(o[E[h]]?o[E[h]].push(E):o[E[h]]=[E])}return f.forEach(function(t){var e=t[0],n=t[1];(o[n]||[]).sort(g),s.push(o[n]||[]),c.push(e),l.push(n)}),[c,l,s]},e.prototype.onDragStart=function(t,e){if(this.state.draggingTask)throw Error("Already was dragging a task...");this.setState({draggingTask:t}),e.dataTransfer.setData("id",t.id.toString()),e.dataTransfer.effectAllowed="move",this._dragTargetElement=o(e.target)},e.prototype.onDragEnd=function(t){this.state.draggingTask==t&&(this.setState({draggingTask:null}),this._dragTargetElement.show())},e.prototype.onDrop=function(t,e){if(this.state.draggingTask){e.dataTransfer.dropEffect="move",e.preventDefault();var n=this.state.draggingTask;if(this.props.view.type==a.status){var r=n.state;n.state=t,r!=t&&(n.stateUpdatedTime=1e3*s().unix())}else{if(this.props.view.type!=a.priority)throw Error("Haven't implement drag and drop for this view type yet");n.priority=t}this.props.updateTask(n),o(e.target).removeClass("drop-container"),this.setState({draggingTask:null}),this._dragTargetElement.show()}},e.prototype.markColumnAsDraggable=function(t){var e=o(".drop-container");1==e.length&&e[0]!=t&&e.removeClass("drop-container"),o(t).addClass("drop-container")},e.prototype.onDragOver=function(t){t.preventDefault(),this.state.draggingTask&&(this._dragTargetElement.hide(),o(t.target).hasClass("column-container")?this.markColumnAsDraggable(t.target):this.markColumnAsDraggable(o(t.target).parents(".column-container")[0]))},e.prototype.onClick=function(t,e){e.stopPropagation();var n=new CustomEvent(h.signalDisplayTaskInfo,{detail:t});return document.dispatchEvent(n),!1},e.prototype.changeViewType=function(t){this.props.changeView({type:t,shouldHideClosedTasks:this.props.view.shouldHideClosedTasks})},e.prototype.changeHideClosedTasks=function(){this.props.changeView({type:this.props.view.type,shouldHideClosedTasks:!this.props.view.shouldHideClosedTasks})},e.prototype.getCurrentTagToken=function(){return this.props.selectedTag?[{label:this.props.selectedTag.name,value:this.props.selectedTag.id}]:[]},e.prototype.changeCurrentTagToken=function(t){var e;t.length?e=this.props.tagsById[t[0].value]:(e=null,0==window.location.pathname.indexOf("/tag/")&&(window.location.pathname="/")),this.props.changeSelectedTag(e)},e.prototype.getAllTagNames=function(){var t=this,e=[];return Object.keys(this.props.tagsById).forEach(function(n){var r=t.props.tagsById[+n];e.push({label:r.name,value:r.id})}),e},e.prototype.clearCreateColumnType=function(){this.setState({createColumnType:null})},e.prototype.createTask=function(t){null==this.state.createColumnType&&this.setState({createColumnType:t})},e.prototype.clearEditingTask=function(){this.setState({editingTask:null})},e.prototype.renderTypeChoice=function(t){var e="view-type-choice";t==this.props.view.type&&(e+=" -selected");var n={};return n[a.priority]="Priority",n[a.status]="Status",i.createElement("div",{className:e,key:t,onClick:this.changeViewType.bind(this,t)},n[t])},e.prototype.renderTypeSelector=function(){return i.createElement("div",{className:"view-type-selector"},this.renderTypeChoice(a.priority),this.renderTypeChoice(a.status))},e.prototype.renderHideClosedTasks=function(){if(this.props.view.type!=a.status)return i.createElement("div",{className:"hide-closed-tasks"},i.createElement("label",{htmlFor:"hide-closed"},"Hide closed?"),i.createElement("input",{id:"hide-closed",type:"checkbox",onChange:this.changeHideClosedTasks.bind(this),checked:this.props.view.shouldHideClosedTasks}))},e.prototype.renderOptions=function(){return i.createElement("div",{className:"task-board-options"},this.renderTypeSelector(),this.renderTagSelector(),this.renderHideClosedTasks())},e.prototype.renderTagSelector=function(){return i.createElement("div",{className:"task-board-tag-selector-container"},i.createElement("div",{className:"tag-selector-label"},"Filter Tag:"),i.createElement(u.TokenizerComponent,{onChange:this.changeCurrentTagToken.bind(this),initialValues:this.getCurrentTagToken(),possibleTokens:this.getAllTagNames(),tokenLimit:1}))},e.prototype.renderColumn=function(t,e,n){var r=this;return i.createElement("div",{className:"column-container",key:e,onDrop:this.onDrop.bind(this,n),onDragOver:this.onDragOver.bind(this),onClick:this.createTask.bind(this,n)},i.createElement("div",{className:"column-header"},e),t.map(function(t){return i.createElement("div",{key:t.id,className:"draggable-task",draggable:!0,onDragStart:r.onDragStart.bind(r,t),onDragEnd:r.onDragEnd.bind(r,t),onClick:r.onClick.bind(r,t.id)},i.createElement(l.TaskComponent,{task:t,viewType:r.props.view.type,tagsById:r.props.tagsById,eventsById:r.props.eventsById}))}))},e.prototype.renderColumns=function(){for(var t=[],e=0;e<this.state.columns.length;e++)t.push(this.renderColumn(this.state.columns[e],this.state.headers[e],this.state.columnTypes[e]));return i.createElement("div",{className:"full-column-container"},i.createElement("div",{className:"columns-container"},t))},e.prototype.renderEditingTask=function(){if(this.state.editingTask)return i.createElement(p.ModalComponent,{cancelFunc:this.clearEditingTask.bind(this)},i.createElement(c.EditTaskComponent,{meUser:this.props.meUser,task:this.state.editingTask,tagsById:this.props.tagsById,createMode:!1,createTask:function(t){},updateTask:this.props.updateTask,deleteTask:this.props.deleteTask}))},e.prototype.renderCreateTask=function(){if(null!=this.state.createColumnType){var t=null,e=null;this.props.view.type==a.priority&&(t=this.state.createColumnType,e=0),this.props.view.type==a.status&&(t=0,e=this.state.createColumnType);var n=[];return this.props.selectedTag&&n.push(this.props.selectedTag.id),i.createElement(p.ModalComponent,{cancelFunc:this.clearCreateColumnType.bind(this)},i.createElement(c.EditTaskComponent,{meUser:this.props.meUser,tagsById:this.props.tagsById,createMode:!0,createTask:this.props.createTask,initialPriority:t,initialState:e,initialTags:n,updateTask:function(t){},deleteTask:function(t){}}))}},e.prototype.render=function(){return i.createElement("div",{className:"task-board"},this.renderOptions(),this.renderColumns(),this.renderEditingTask(),this.renderCreateTask())},e}(i.Component);e.TaskBoardComponent=f},function(t,e,n){"use strict";var r=Object.prototype.propertyIsEnumerable;function a(t){var e=Object.getOwnPropertyNames(t);return Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(t))),e.filter(function(e){return r.call(t,e)})}t.exports=Object.assign||function(t,e){for(var n,r,i=function(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),o=1;o<arguments.length;o++){n=arguments[o],r=a(Object(n));for(var s=0;s<r.length;s++)i[r[s]]=n[r[s]]}return i}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),i=n(0),o=n(70),s=n(4),c=function(t){function e(e){var n=t.call(this,e)||this;return e.createMode?n.state={note:n._getEmptyNote(e)}:n.state={note:e.note},n}return r(e,t),e.prototype.componentWillReceiveProps=function(t){t.createMode?this.setState({note:this._getEmptyNote(t)}):this.setState({note:t.note})},e.prototype._getEmptyNote=function(t){return{id:0,title:"",content:"",authorId:t.meUser.id,creationTime:1e3*a().unix(),tagIds:[]}},e.prototype.submitForm=function(t){if("save"==t)this.props.updateNote(this.state.note);else if("delete"==t)this.props.deleteNote(this.state.note);else{if("create"!=t)throw Error("Unknown submit type!");this.props.createNote(this.state.note)}},e.prototype.onKeyDownCreate=function(t){"Enter"==t.key&&this.props.createMode&&this.submitForm("create")},e.prototype.updateAttr=function(t,e){this.state.note[t]=e.target.value,this.setState(this.state)},e.prototype.getCurrentTags=function(){var t=this,e=[];return this.state.note.tagIds.forEach(function(n){var r=t.props.tagsById[n];e.push({label:r.name,value:r.id})}),e},e.prototype.getAllTagNames=function(){var t=this,e=[];return Object.keys(this.props.tagsById).forEach(function(n){var r=t.props.tagsById[+n];e.push({label:r.name,value:r.id})}),e},e.prototype.retrieveTagNames=function(t){this.state.note.tagIds=t.map(function(t){return t.value}),this.setState(this.state)},e.prototype.renderFormTitle=function(){return this.props.createMode?i.createElement("h3",null,"Create Note"):i.createElement("h3",null,"Editing N",this.state.note.id)},e.prototype.renderButtons=function(){return this.props.createMode?i.createElement("div",{className:"edit-note-button-container"},i.createElement("input",{type:"button",value:"create",onClick:this.submitForm.bind(this,"create")})):i.createElement("div",{className:"edit-note-button-container"},i.createElement("input",{type:"button",value:"delete",onClick:this.submitForm.bind(this,"delete")}),i.createElement("input",{type:"button",value:"save",onClick:this.submitForm.bind(this,"save")}))},e.prototype.renderForm=function(){return i.createElement("div",null,i.createElement("div",{className:"title-container"},i.createElement("label",{htmlFor:"title"},"Title: "),i.createElement("input",{type:"text",name:"title",value:this.state.note.title,onKeyDown:this.onKeyDownCreate.bind(this),onChange:this.updateAttr.bind(this,"title")})),i.createElement("div",{className:"content-container"},i.createElement("label",{htmlFor:"content"},"Description: "),i.createElement(o.default,{type:"text",name:"content",value:this.state.note.content,onChange:this.updateAttr.bind(this,"content")})),i.createElement("div",{className:"tag-tokenizer-container"},i.createElement("label",null,"Tags:"),i.createElement(s.TokenizerComponent,{onChange:this.retrieveTagNames.bind(this),initialValues:this.getCurrentTags(),possibleTokens:this.getAllTagNames()})),this.renderButtons())},e.prototype.render=function(){return i.createElement("div",{className:"edit-note-container"},this.renderFormTitle(),this.renderForm())},e}(i.Component);e.EditNoteComponent=c},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),i=n(73),o=function(t){function e(e){var n=t.call(this,e)||this;return n.state={lastSaved:null},n}return r(e,t),e.prototype.componentWillReceiveProps=function(t){var e=null;for(var n in t.capturesById)this.props.capturesById[n]||(e=t.capturesById[n]);this.setState({lastSaved:e})},e.prototype.deleteCaptureById=function(t){this.props.deleteCapture(this.props.capturesById[t])},e.prototype.renderOptions=function(){return a.createElement("div",{className:"capture-list-options"})},e.prototype.renderCreateCapture=function(){return a.createElement("div",{className:"card"},a.createElement(i.CreateCaptureComponent,{meUser:this.props.meUser,createCapture:this.props.createCapture,lastSaved:this.state.lastSaved}))},e.prototype.renderDeleteButton=function(t){return a.createElement("div",{className:"capture-delete",onClick:this.deleteCaptureById.bind(this,t)},"Delete")},e.prototype.renderCapture=function(t){return a.createElement("div",{className:"capture-container card",key:t.id},a.createElement("div",{className:"capture-content"},t.content),a.createElement("div",{className:"capture-options-container"},this.renderDeleteButton(t.id)))},e.prototype.renderNoCaptures=function(){return a.createElement("div",{className:"captured-everything"},"You've captured everything! :)")},e.prototype.renderCaptures=function(){var t=this,e=Object.keys(this.props.capturesById).map(function(e){return t.props.capturesById[e]});return e.sort(function(t,e){return e.creationTime-t.creationTime}),0==e.length?this.renderNoCaptures():a.createElement("div",{className:"capture-list-scroll-container"},e.map(this.renderCapture.bind(this)))},e.prototype.render=function(){return a.createElement("div",{className:"capture-list-container"},this.renderOptions(),this.renderCreateCapture(),this.renderCaptures())},e}(a.Component);e.CaptureListComponent=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=function(){function t(){}return t.getTasksById=function(t){for(var e={},n=0,r=t;n<r.length;n++){var a=r[n];e[a.id]=a}return e},t.createTask=function(t,e){var n={title:t.title,description:t.description,authorId:t.authorId,ownerId:t.ownerId,tagIds:t.tagIds,priority:t.priority,state:t.state,eventIds:t.eventIds,expectedDurationSecs:t.expectedDurationSecs,dueTime:t.dueTime,stateUpdatedTime:t.stateUpdatedTime};return r.post("/api/1/task/create",n,function(t){e(JSON.parse(t))})},t.updateTask=function(t,e){var n={id:t.id,title:t.title,description:t.description,authorId:t.authorId,ownerId:t.ownerId,tagIds:t.tagIds,priority:t.priority,state:t.state,expectedDurationSecs:t.expectedDurationSecs,dueTime:t.dueTime,stateUpdatedTime:t.stateUpdatedTime};return r.post("/api/1/task/update",n,function(t){e(JSON.parse(t))})},t.deleteTask=function(t,e){return r.post("/api/1/task/delete",{id:t.id},function(n){if(JSON.parse(n).id!=t.id)throw Error("Deleted wrong task?");e(t)})},t.getTasksAfterEventChange=function(e,n,r){for(var a={},i=0,o=e;i<o.length;i++)for(var s=o[i],c=0,d=s.eventIds;c<d.length;c++){d[c]==n.id&&(a[s.id]=!0)}for(var l={},u=[],p=t.getTasksById(e),h=0,m=n.taskIds;h<m.length;h++){var f=m[h];if(!r)if(l[f]=!0,!a[f])(g=p[f]).eventIds.push(n.id),u.push(g)}for(var f in a){var g;if(!l[f])(g=p[f]).eventIds=g.eventIds.filter(function(t){return t!=n.id}),u.push(g)}return u},t.getEventsById=function(t){for(var e={},n=0,r=t;n<r.length;n++){var a=r[n];e[a.id]=a}return e},t.createEvent=function(t,e){var n={name:t.name,authorId:t.authorId,ownerId:t.ownerId,tagIds:t.tagIds,startTime:t.startTime,durationSecs:t.durationSecs,taskIds:t.taskIds};return r.post("/api/1/event/create",n,function(t){e(JSON.parse(t))})},t.updateEvent=function(t,e){return r.post("/api/1/event/update",t,function(t){e(JSON.parse(t))})},t.deleteEvent=function(t,e){return r.post("/api/1/event/delete",{id:t.id},function(n){if(JSON.parse(n).id!=t.id)throw Error("Deleted wrong event?");e(t)})},t.getTagsById=function(t){for(var e={},n=0,r=t;n<r.length;n++){var a=r[n];e[a.id]=a}return e},t.createTag=function(t,e){var n={name:t.name,ownerId:t.ownerId,childTagIds:t.childTagIds};return r.post("/api/1/tag/create",n,function(t){e(JSON.parse(t))})},t.updateTag=function(t,e){return r.post("/api/1/tag/update",t,function(t){e(JSON.parse(t))})},t.getNotesById=function(t){for(var e={},n=0,r=t;n<r.length;n++){var a=r[n];e[a.id]=a}return e},t.createNote=function(t,e){var n={title:t.title,content:t.content,creationtime:t.creationTime,authorId:t.authorId,tagIds:t.tagIds};return r.post("/api/1/note/create",n,function(t){e(JSON.parse(t))})},t.updateNote=function(t,e){return r.post("/api/1/note/update",t,function(t){e(JSON.parse(t))})},t.deleteNote=function(t,e){return r.post("/api/1/note/delete",{id:t.id},function(n){if(JSON.parse(n).id!=t.id)throw Error("Deleted wrong note?");e(t)})},t.getCapturesById=function(t){for(var e={},n=0,r=t;n<r.length;n++){var a=r[n];e[a.id]=a}return e},t.createCapture=function(t,e){var n={content:t.content,creationTime:t.creationTime,authorId:t.authorId};return r.post("/api/1/capture/create",n,function(t){e(JSON.parse(t))})},t.deleteCapture=function(t,e){return r.post("/api/1/capture/delete",{id:t.id},function(n){if(JSON.parse(n).id!=t.id)throw Error("Deleted wrong capture?");e(t)})},t}();e.API=a},function(t,e,n){"use strict";var r=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t};Object.defineProperty(e,"__esModule",{value:!0}),n(23);var a=n(0),i=n(11),o=n(3),s=n(15),c=n(74),d=function(){return function(t){i.render(a.createElement(s.App,r({},t)),document.getElementById("render-target"))}}();e.AppRenderer=d;var l=function(){return function(t){i.render(a.createElement(c.Capturer,r({},t)),document.getElementById("render-target"))}}();e.CaptureRenderer=l;var u=function(t){var e="";if(document.cookie&&""!=document.cookie)for(var n=document.cookie.split(";"),r=0;r<n.length;r++){var a=o.trim(n[r]);if(a.substring(0,t.length+1)==t+"="){e=decodeURIComponent(a.substring(t.length+1));break}}return e}("csrftoken");o.ajaxSetup({beforeSend:function(t,e){(function(t){return/^(GET|HEAD|OPTIONS|TRACE)$/.test(t)})(e.type)||this.crossDomain||t.setRequestHeader("X-CSRFToken",u)}}),window.StarterRenderers={AppRenderer:d,CaptureRenderer:l}},function(t,e,n){var r=n(24);"string"==typeof r&&(r=[[t.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(14)(r,a);r.locals&&(t.exports=r.locals)},function(t,e,n){var r=n(25);(t.exports=n(13)(!1)).push([t.i,'*{font-family:Open Sans,lucida grande,Segoe UI,arial,verdana,lucida sans unicode,tahoma,sans-serif!important;letter-spacing:.3px;color:#47525d;font-weight:100}@font-face{font-family:Open Sans;font-style:normal;font-weight:300;src:local("Open Sans Light"),local("OpenSans-Light"),url('+r(n(26))+') format("woff2"),url('+r(n(27))+') format("woff"),url('+r(n(28))+') format("truetype")}@font-face{font-family:Open Sans;font-style:normal;font-weight:400;src:local("Open Sans Regular"),local("OpenSans-Regular"),url('+r(n(29))+') format("woff2"),url('+r(n(30))+') format("woff"),url('+r(n(31))+') format("truetype")}@font-face{font-family:Open Sans;font-style:normal;font-weight:700;src:local("Open Sans Bold"),local("OpenSans-Bold"),url('+r(n(32))+') format("woff2"),url('+r(n(33))+') format("woff"),url('+r(n(34))+') format("truetype")}body{background:#f6f9fc;margin:0}div.card{border:1px solid rgba(0,0,0,.04);box-shadow:0 1px 4px rgba(0,0,0,.03);margin:0 0 10px;padding:20px;border-radius:3px;background:#fff;-webkit-tap-highlight-color:transparent;box-sizing:border-box;display:block}div.header-container{display:flex;justify-content:space-between;flex-wrap:wrap;padding:1em 1em 0;background-color:#fff}h1.header-title{margin:0}div.header-container div.view-mode-selector{display:flex;width:100%;margin:.5em 0}div.header-container div.view-mode-selector a.view-mode-option{margin-right:1em;text-decoration:none}div.header-container div.view-mode-selector a.view-mode-option.-selected{text-decoration:underline}div.task-board{width:100%;height:calc(100vh - 97px);display:flex;flex-direction:column}div.task-board div.task-board-options{display:flex;background-color:#fff;padding:0 1em .5em;flex-shrink:0}div.task-board div.task-board-options div.view-type-selector{display:flex}div.task-board div.task-board-options div.view-type-selector div.view-type-choice{margin-right:.5em;cursor:pointer}div.task-board div.task-board-options div.view-type-selector div.view-type-choice.-selected{text-decoration:underline}div.task-board div.hide-closed-tasks{margin-left:.5em}div.task-board div.task-board-tag-selector-container{display:flex;margin-left:1em}div.task-board div.task-board-tag-selector-container div.tokenizer-container{margin-left:.5em}div.task-board div.full-column-container{height:100%}div.task-board div.full-column-container div.columns-container{display:flex;flex-direction:row;min-height:100%}div.task-board div.column-container{display:flex;flex-direction:column;width:25%;padding:.5em}div.task-board div.column-container.drop-container{background-color:rgba(0,0,0,.04)}div.task-board div.draggable-task.-hidden{display:none}.task-title,div.task-board .task{text-overflow:ellipsis;overflow:hidden}.task-id{font-weight:bolder;text-decoration:underline}.task-title{font-weight:700}.task .task-columns{display:flex}.task-columns .main-column{width:100%}.task-columns .task-color{width:3px;flex-shrink:0;margin:-20px 17px -20px -20px}.task-color.-p0{background-color:#8b4513}.task-color.-p500{background-color:#f0f}.task-color.-p400{background-color:red}.task-color.-p300{background-color:orange}.task-color.-p200{background-color:#228b22}.task-color.-p100{background-color:#6495ed}.task-color.-s0{background-color:#228b22}.task-color.-s500{background-color:#6495ed}.task-color.-s750{background-color:red}.task-color.-s1000{background-color:#8b4513}div.task-tags-container{display:flex}div.task-tags-container div.tag{margin-left:.25em;padding:.1em .25em}.task-due-date.-very-overdue{color:#f0f}.task-due-date.-overdue{color:red}.task-due-date.-due-today{color:orange}.task-due-date.-due-soon{color:#228b22}.task-due-date.-due-not-soon{color:#6495ed}div.detail-container{background-color:#fff;padding:.5em;overflow-wrap:break-word}div.detail-container div.title{font-weight:700}div.detail-container div.options-container{text-decoration:underline;display:flex;justify-content:space-between}div.detail-container div.options a{padding:0 .25em;cursor:pointer}div.detail-container div.time-info{padding-top:.25em}div.detail-container div.task-status{display:flex;padding-top:.25em}div.detail-container div.task-status div{margin-right:.5em}div.detail-container div.task-status div.info-container{display:flex}div.detail-container div.task-status div.task-color{height:22px;width:1em;margin-right:.25em;margin-left:-.25em}div.detail-container div.options-container.tag-options-container{text-decoration:none}div.detail-container div.options{text-decoration:underline}div.detail-container div.related-tag-names{display:flex;align-items:center}div.detail-container div.related-tag-names div.tag{padding:1px .25em;margin-left:.25em;margin-bottom:0}div.calendar{width:100%}div.calendar div.options{display:flex;background-color:#fff;padding:0 1em .5em}div.calendar div.options div.view-type-selector{display:flex;margin-left:.5em}div.calendar div.options div.view-type-selector div.view-type-choice{margin-right:.5em;cursor:pointer}div.calendar div.options div.view-type-selector div.view-type-choice.-selected{text-decoration:underline}div.calendar div.options div.pagination-container{display:flex;margin-left:.5em}div.calendar div.options div.pagination-container div.pagination-option{margin-right:.5em;cursor:pointer}div.calendar div.tag-selector-container{display:flex;margin-left:1em}div.calendar div.tag-selector-container div.tokenizer-container{margin-left:.5em}div.calendar div.full-column-container{display:flex;align-items:center;flex-direction:column;height:calc(100vh - 140px);padding:0 2em}div.calendar div.full-column-container div.header-and-content-container{overflow:hidden;height:100%;width:100%;display:flex;flex-direction:column}div.calendar div.column-header-container{display:flex;margin-top:.5em;margin-right:15px;text-align:center}div.calendar div.column-header{min-width:120px;flex-grow:1;height:22px}div.calendar div.column-header.-times{max-width:120px}div.calendar div.column-header.single-day{min-width:360px}div.calendar div.all-columns-container{display:flex;height:100%;overflow-x:hidden;overflow-y:auto;border-bottom:1px solid rgba(0,0,0,.2);border-top:1px solid rgba(0,0,0,.2)}div.calendar div.column-container{flex-grow:1;min-width:120px;position:relative}div.calendar div.column-container.-times{max-width:120px}div.calendar div.column-container table{width:100%}div.calendar div.column-container.single-day{min-width:360px}div.calendar div.column-container td{border-right:1px solid rgba(0,0,0,.2);border-bottom:1px solid rgba(0,0,0,.2);font-size:14px;min-width:120px;cursor:pointer}div.calendar div.column-container.single-day td{min-width:360px}div.calendar div.column-container tr:nth-child(odd) td{border-bottom-style:dashed}div.calendar div.column-container:first-child td{border-left:1px solid rgba(0,0,0,.2);cursor:default;vertical-align:top;text-align:right}div.calendar div.column-container table tbody tr:first-child td{border-top:1px solid rgba(0,0,0,.2)}div.calendar div.rendered-event-container{position:absolute;width:100%}div.calendar div.rendered-event-container div.card{padding:1px .25em;margin-left:1px;margin-right:2px;margin-bottom:0;overflow-y:auto;height:100%}div.calendar div.column-container div.current-time-cursor{position:absolute;height:3px;background-color:#dc322f;min-width:120px;width:100%;z-index:2}div.calendar div.column-container.single-day div.current-time-cursor{min-width:360px}div.calendar div.column-container tr td.-selected{background-color:rgba(0,0,0,.2);border:none}div.calendar div.rendered-event-container div.draggable-event-end{cursor:ns-resize;width:100%;height:7px;margin-top:-3px}div.calendar div.rendered-event-container div.tag.card{overflow-y:hidden}div.event-container{font-size:13px;display:flex;flex-wrap:wrap;align-content:space-between;overflow-x:hidden;height:100%}div.event-container div.name{flex-grow:1}div.event-card-container{align-self:flex-end;flex-grow:1;display:flex;justify-content:flex-end;padding-bottom:.25em}div.event-card-container div.card{margin:0 0 0 .25em;padding:.1em .25em}div.event-container div.task-id-card{cursor:pointer}.tag-graph{margin:1em}.tag-children-container,.tags-root-container{border:1px solid #000;margin-bottom:.25em}.tag-children-container{margin-left:.5em;margin-right:.5em}.tag-container{margin-left:.25em;font-weight:700}.tag-container .edit-tag-button{text-decoration:underline;cursor:pointer;font-weight:100}.tag-graph div.create-tag-button-container{text-decoration:underline;cursor:pointer;margin-top:.5em}div.tag.card{cursor:pointer;margin-bottom:0}div.tokenizer-container{display:flex}div.tokenizer-container div.pending-token-container{width:100%}div.tokens-container{display:flex;margin-right:.5em}div.rendered-token{display:flex;padding:.1em .25em;margin-top:-3px;margin-bottom:0}div.rendered-token div.remove-token{margin-left:.25em;cursor:pointer}div.tokenizer-container div.pending-state-container{width:100%}div.tokenizer-container div.autocomplete-token-container{position:absolute;background:#fff;border-radius:0 3px 3px;border:1px solid rgba(0,0,0,.2);border-top:none;z-index:3}div.tokenizer-container div.autocomplete-token-container div.autocomplete-token{padding:.5em;border-bottom:1px solid rgba(0,0,0,.2)}div.tokenizer-container div.autocomplete-token-container:last-child{border-bottom:none}div.tokenizer-container div.autocomplete-token-container div.autocomplete-token:hover{cursor:pointer;background-color:#f6f9fc}div.tokenizer-container div.autocomplete-token-container div.autocomplete-token.-selected{background-color:#f6f9fc}div.modal-container div.background{position:fixed;left:0;top:0;width:100%;height:100%;background-color:rgba(0,0,0,.2);z-index:4;display:flex;align-items:center;justify-content:center}div.modal.card{min-width:350px}div.modal h3{margin:0}div.modal-container div.cancel-button-container{cursor:pointer;float:right}div.modal label{display:block;padding-top:.5em}div.modal input,select,textarea{width:100%;background-color:#fff;border:1px solid rgba(0,0,0,.4);margin:0;padding:0}div.modal input[type=button]{margin-top:.5em;height:30px}div.modal div.rendered-token{margin-top:0}div.modal div.checkbox-container{display:flex;align-items:center}div.modal div.checkbox-container input{width:30px;height:15px;margin-top:7px}div.merged-container{display:flex}div.main-pane{max-width:67%;min-width:67%;height:calc(100vh - 97px);display:flex;flex-direction:column}div.merged-task-container{display:flex;flex-grow:1}div.right-pane{max-width:33%;min-width:33%;height:calc(100vh - 97px)}div.main-pane div.task-board div.full-column-container{overflow-y:auto}div.right-pane div.calendar div.full-column-container{padding:0}div.right-pane div.calendar div.tag-selector-container{margin-left:0}div.right-pane div.calendar div.column-container,div.right-pane div.calendar div.column-container.single-day,div.right-pane div.calendar div.column-container.single-day div.current-time-cursor,div.right-pane div.calendar div.column-container.single-day td,div.right-pane div.calendar div.column-container td,div.right-pane div.calendar div.column-header,div.right-pane div.calendar div.column-header.single-day{min-width:0}div.right-pane div.calendar div.column-container.-times,div.right-pane div.calendar div.column-header.-times{max-width:70px}div.right-pane div.calendar div.options div.pending-token-container input{width:100%}div.right-pane div.calendar div.options div.tag-selector-label{flex-shrink:0}div.right-pane div.merged-capture-container{height:100%}div.right-pane div.merged-capture-container div.capture-list-container{height:100%;display:flex;flex-direction:column}div.right-pane div.merged-capture-container div.capture-list-container div.capture-list-scroll-container{overflow-y:auto}div.note.card{margin:10px 20px}div.note div.note-header{display:flex;justify-content:space-between}div.note div.note-header div.note-title{font-size:2em;margin-bottom:.25em}div.note div.note-content img{max-width:100%;max-height:480px}div.note div.note-content .checked{color:rgba(0,0,0,.5);text-decoration:line-through}div.note div.note-content h1,h2,h3,p{margin-top:0;margin-bottom:2px}div.note-tags-container{display:flex}div.note-tags-container div.card{margin-left:.25em;margin-bottom:0;padding:.1em .25em}div.note-header div.note-right-header{display:flex}div.note-header div.note-options{cursor:pointer;margin-right:.5em}div.edit-note-container textarea{font-family:Courier New,Courier,monospace!important;min-width:480px}div.create-capture-container input,select,textarea{width:100%;background-color:#fff;border:1px solid rgba(0,0,0,.4);margin:0;padding:0}div.create-capture-container input[type=button]{margin-top:.5em;height:30px}div.capturer-container div.create-capture-container textarea{min-height:200px;font-size:larger}div.capturer-container div.create-capture-container input[type=button]{height:2em;font-size:1.7em;-webkit-appearance:none}div.capturer-container{font-size:2em;line-height:2}div.capturer-container div.capture-list-container div.capture-list-options{padding:0}div.capture-list-container .card{margin:.5em}div.capture-list-container div.capture-list-options{background-color:#fff;padding:0 1em 2em}div.capture-container.card{display:flex;justify-content:space-between}div.capture-container.card .capture-content{overflow:auto}div.capture-container.card .capture-options-container{margin-left:.5em}div.capture-container.card .capture-options-container .capture-delete{font-weight:700;cursor:pointer}div.captured-everything{margin:auto;text-align:center}div#toast-container{position:fixed;left:2em;bottom:2em;z-index:8;background-color:#47525d;color:#f6f9fc;padding:1em}div#toast-container.hidden{display:none}',""])},function(t,e){t.exports=function(t){return"string"!=typeof t?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),/["'() \t\n]/.test(t)?'"'+t.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':t)}},function(t,e,n){t.exports=n.p+"/static/fonts/open-sans-v14-latin-300.woff2"},function(t,e,n){t.exports=n.p+"/static/fonts/open-sans-v14-latin-300.woff"},function(t,e,n){t.exports=n.p+"/static/fonts/open-sans-v14-latin-300.ttf"},function(t,e,n){t.exports=n.p+"/static/fonts/open-sans-v14-latin-regular.woff2"},function(t,e,n){t.exports=n.p+"/static/fonts/open-sans-v14-latin-regular.woff"},function(t,e,n){t.exports=n.p+"/static/fonts/open-sans-v14-latin-regular.ttf"},function(t,e,n){t.exports=n.p+"/static/fonts/open-sans-v14-latin-700.woff2"},function(t,e,n){t.exports=n.p+"/static/fonts/open-sans-v14-latin-700.woff"},function(t,e,n){t.exports=n.p+"/static/fonts/open-sans-v14-latin-700.ttf"},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,r=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var a,i=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?t:(a=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:r+i.replace(/^\.\//,""),"url("+JSON.stringify(a)+")")})}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),i=n(37),o=n(38),s=n(6),c=function(t){function e(e){var n=t.call(this,e)||this;return n.state=n.getState(e),n}return r(e,t),e.prototype.componentWillReceiveProps=function(t){this.setState(this.getState(t))},e.prototype.getState=function(t){var e=this.computeTagGraph(t.tagsById);return{tagGraph:e[0],rootTagIds:e[1],tagsById:t.tagsById,editingTag:null,creatingTag:!1}},e.prototype.computeTagGraph=function(t){var e={},n={};Object.keys(t).forEach(function(t){n[t]=!0}),Object.keys(t).forEach(function(r){for(var a=t[+r],i=[],o=0,s=a.childTagIds;o<s.length;o++){var c=s[o];i.push(c),n.hasOwnProperty(""+c)&&delete n[c]}e[a.id]=i});var r=[];return Object.keys(n).forEach(function(t){r.push(+t)}),[e,r]},e.prototype.onClick=function(t,e){this.setState({editingTag:t}),e.preventDefault(),e.stopPropagation()},e.prototype.clearEditingTag=function(){this.setState({editingTag:null})},e.prototype.toggleCreatingTag=function(){this.setState({creatingTag:!this.state.creatingTag})},e.prototype.renderTagById=function(t){var e=this,n=this.state.tagsById[t];return a.createElement("div",{className:"tag-container",key:n.id},n.name," -"," ",a.createElement("span",{className:"edit-tag-button",onClick:this.onClick.bind(this,n)},"edit"),function(){if(0!=n.childTagIds.length)return a.createElement("div",{className:"tag-children-container"},n.childTagIds.map(e.renderTagById.bind(e)))}())},e.prototype.renderFromRootTagId=function(t){return a.createElement("div",{className:"tags-root-container",key:t},this.renderTagById(t))},e.prototype.renderTags=function(){return a.createElement("div",{className:"tags-container"},this.state.rootTagIds.map(this.renderFromRootTagId.bind(this)))},e.prototype.renderEditingTag=function(){if(this.state.editingTag)return a.createElement(s.ModalComponent,{cancelFunc:this.clearEditingTag.bind(this)},a.createElement(i.EditTagComponent,{tag:this.state.editingTag,tagsById:this.state.tagsById,updateTag:this.props.updateTag,deleteTag:this.props.deleteTag}))},e.prototype.renderCreateTag=function(){return this.state.creatingTag?a.createElement(s.ModalComponent,{cancelFunc:this.toggleCreatingTag.bind(this)},a.createElement(o.CreateTagComponent,{meUser:this.props.meUser,createTag:this.props.createTag,tagsById:this.state.tagsById})):a.createElement("div",{className:"create-tag-button-container"},a.createElement("a",{onClick:this.toggleCreatingTag.bind(this)},"Create New"))},e.prototype.render=function(){return a.createElement("div",{className:"tag-graph"},this.renderTags(),this.renderEditingTag(),this.renderCreateTag())},e}(a.Component);e.TagGraphComponent=c},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),i=n(4),o=function(t){function e(e){var n=t.call(this,e)||this;return n.state={tag:e.tag,tagsById:e.tagsById},n}return r(e,t),e.prototype.componentWillReceiveProps=function(t){this.setState({tag:t.tag,tagsById:t.tagsById})},e.prototype.submitForm=function(t){"save"==t?this.props.updateTag(this.state.tag):this.props.deleteTag(this.state.tag)},e.prototype.updateName=function(t){this.state.tag.name=t.target.value,this.setState(this.state)},e.prototype.getCurrentChildren=function(){var t=this,e=[];return this.state.tag.childTagIds.forEach(function(n){var r=t.state.tagsById[n];e.push({label:r.name,value:r.id})}),e},e.prototype.getAllTagNames=function(){var t=this,e=[];return Object.keys(this.state.tagsById).forEach(function(n){var r=t.state.tagsById[+n];e.push({label:r.name,value:r.id})}),e},e.prototype.retrieveChildNames=function(t){this.state.tag.childTagIds=t.map(function(t){return t.value}),this.setState(this.state)},e.prototype.renderForm=function(){return a.createElement("div",null,a.createElement("div",{className:"name-container"},a.createElement("label",{htmlFor:"name"},"Name: "),a.createElement("input",{type:"text",name:"name",value:this.state.tag.name,onChange:this.updateName.bind(this)})),a.createElement("div",{className:"children-container"},a.createElement("label",{htmlFor:"children"},"Children: "),a.createElement(i.TokenizerComponent,{onChange:this.retrieveChildNames.bind(this),initialValues:this.getCurrentChildren(),possibleTokens:this.getAllTagNames()})),a.createElement("input",{type:"button",value:"delete",onClick:this.submitForm.bind(this,"delete")}),a.createElement("input",{type:"button",value:"save",onClick:this.submitForm.bind(this,"save")}))},e.prototype.render=function(){return a.createElement("div",{className:"edit-tag-container"},a.createElement("h3",null,"Tag Edit Form:"),this.renderForm())},e}(a.Component);e.EditTagComponent=o},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),i=function(t){function e(e){var n=t.call(this,e)||this;return n.state={tag:{id:0,name:"",childTagIds:[],ownerId:n.props.meUser.id}},n}return r(e,t),e.prototype.submitForm=function(){this.props.createTag(this.state.tag)},e.prototype.updateName=function(t){this.state.tag.name=t.target.value,this.setState(this.state)},e.prototype.renderForm=function(){return a.createElement("div",null,a.createElement("div",{className:"name-container"},a.createElement("label",{htmlFor:"name"},"Name: "),a.createElement("input",{type:"text",name:"name",value:this.state.tag.name,onChange:this.updateName.bind(this)})),a.createElement("input",{type:"button",value:"create",onClick:this.submitForm.bind(this)}))},e.prototype.render=function(){return a.createElement("div",{className:"create-tag-container"},a.createElement("h3",null,"Create Tag Form:"),this.renderForm())},e}(a.Component);e.CreateTagComponent=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0}),n(40);var a=n(0),i=n(4),o=n(42),s=n(1),c=function(t){function e(e){var n=t.call(this,e)||this;return e.createMode?n.state={task:n._getEmptyTask(e)}:n.state={task:e.task},n}return r(e,t),e.prototype.componentWillReceiveProps=function(t){t.createMode?this.setState({task:this._getEmptyTask(t)}):this.setState({task:t.task})},e.prototype._getEmptyTask=function(t){var e={id:0,title:"",description:"",authorId:t.meUser.id,ownerId:t.meUser.id,tagIds:[],priority:0,state:0,eventIds:[],expectedDurationSecs:0,dueTime:0,stateUpdatedTime:0};return t.initialPriority&&(e.priority=t.initialPriority),t.initialState&&(e.state=t.initialState),t.initialTags&&(e.tagIds=t.initialTags),e},e.prototype.submitForm=function(t){if("save"==t)this.props.updateTask(this.state.task);else if("delete"==t)this.props.deleteTask(this.state.task);else{if("create"!=t)throw Error("Unknown submit type!");this.props.createTask(this.state.task)}},e.prototype.onKeyDownCreate=function(t){"Enter"==t.key&&this.props.createMode&&this.submitForm("create")},e.prototype.updateAttr=function(t,e){"state"==t&&(this.state.task.stateUpdatedTime=1e3*s().unix()),this.state.task[t]=e.target.value,this.setState(this.state)},e.prototype.updateEstimate=function(t){var e=t.target.value;this.state.task.expectedDurationSecs=60*e,this.setState(this.state)},e.prototype.updateDueTime=function(t){var e=0;t&&(e=1e3*t.unix()),this.state.task.dueTime=e,this.setState(this.state)},e.prototype.getCurrentTags=function(){var t=this,e=[];return this.state.task.tagIds.forEach(function(n){var r=t.props.tagsById[n];e.push({label:r.name,value:r.id})}),e},e.prototype.getAllTagNames=function(){var t=this,e=[];return Object.keys(this.props.tagsById).forEach(function(n){var r=t.props.tagsById[+n];e.push({label:r.name,value:r.id})}),e},e.prototype.retrieveTagNames=function(t){this.state.task.tagIds=t.map(function(t){return t.value}),this.setState(this.state)},e.prototype.renderFormTitle=function(){return this.props.createMode?a.createElement("h3",null,"Create Task"):a.createElement("h3",null,"Editing T",this.state.task.id)},e.prototype.renderButtons=function(){return this.props.createMode?a.createElement("div",{className:"edit-task-button-container"},a.createElement("input",{type:"button",value:"create",onClick:this.submitForm.bind(this,"create")})):a.createElement("div",{className:"edit-task-button-container"},a.createElement("input",{type:"button",value:"delete",onClick:this.submitForm.bind(this,"delete")}),a.createElement("input",{type:"button",value:"save",onClick:this.submitForm.bind(this,"save")}))},e.prototype.renderDueTime=function(){if(this.state.task.dueTime>0){var t=s(this.state.task.dueTime).toDate();return a.createElement(o,{value:t,timeFormat:!1,closeOnSelect:!0,onChange:this.updateDueTime.bind(this)})}return a.createElement(o,{timeFormat:!1,closeOnSelect:!0,onChange:this.updateDueTime.bind(this)})},e.prototype.renderForm=function(){return a.createElement("div",null,a.createElement("div",{className:"title-container"},a.createElement("label",{htmlFor:"title"},"Title: "),a.createElement("input",{type:"text",name:"title",value:this.state.task.title,onKeyDown:this.onKeyDownCreate.bind(this),onChange:this.updateAttr.bind(this,"title")})),a.createElement("div",{className:"description-container"},a.createElement("label",{htmlFor:"description"},"Description: "),a.createElement("textarea",{name:"description",value:this.state.task.description,onChange:this.updateAttr.bind(this,"description")})),a.createElement("div",{className:"estimate-container"},a.createElement("label",{htmlFor:"estimate"},"Estimated Time (minutes): "),a.createElement("input",{type:"number",name:"estimate",value:Math.round(this.state.task.expectedDurationSecs/60),onChange:this.updateEstimate.bind(this)})),a.createElement("div",{className:"priority-selector"},a.createElement("label",{htmlFor:"priority"},"Priority: "),a.createElement("select",{name:"priority",value:this.state.task.priority,onChange:this.updateAttr.bind(this,"priority")},a.createElement("option",{value:"0"},"Unknown"),a.createElement("option",{value:"500"},"Highest"),a.createElement("option",{value:"400"},"High"),a.createElement("option",{value:"300"},"Normal"),a.createElement("option",{value:"200"},"Low"),a.createElement("option",{value:"100"},"Lowest"))),a.createElement("div",{className:"state-selector"},a.createElement("label",{htmlFor:"state"},"Status: "),a.createElement("select",{name:"state",value:this.state.task.state,onChange:this.updateAttr.bind(this,"state")},a.createElement("option",{value:"0"},"Open"),a.createElement("option",{value:"500"},"In Progress"),a.createElement("option",{value:"750"},"Blocked"),a.createElement("option",{value:"900"},"Project"),a.createElement("option",{value:"1000"},"Closed"))),a.createElement("div",{className:"due-time-selector"},a.createElement("label",{htmlFor:"dueTime"},"Due date:"),this.renderDueTime()),a.createElement("div",{className:"tag-tokenizer-container"},a.createElement("label",null,"Tags:"),a.createElement(i.TokenizerComponent,{onChange:this.retrieveTagNames.bind(this),initialValues:this.getCurrentTags(),possibleTokens:this.getAllTagNames()})),this.renderButtons())},e.prototype.render=function(){return a.createElement("div",{className:"edit-task-container"},this.renderFormTitle(),this.renderForm())},e}(a.Component);e.EditTaskComponent=c},function(t,e,n){var r=n(41);"string"==typeof r&&(r=[[t.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(14)(r,a);r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(13)(!1)).push([t.i,'/*!\n * https://github.com/YouCanBookMe/react-datetime\n */.rdt{position:relative}.rdtPicker{display:none;position:absolute;width:250px;padding:4px;margin-top:1px;z-index:99999!important;background:#fff;box-shadow:0 1px 3px rgba(0,0,0,.1);border:1px solid #f9f9f9}.rdtOpen .rdtPicker{display:block}.rdtStatic .rdtPicker{box-shadow:none;position:static}.rdtPicker .rdtTimeToggle{text-align:center}.rdtPicker table{width:100%;margin:0}.rdtPicker td,.rdtPicker th{text-align:center;height:28px}.rdtPicker td{cursor:pointer}.rdtPicker .rdtTimeToggle:hover,.rdtPicker td.rdtDay:hover,.rdtPicker td.rdtHour:hover,.rdtPicker td.rdtMinute:hover,.rdtPicker td.rdtSecond:hover{background:#eee;cursor:pointer}.rdtPicker td.rdtNew,.rdtPicker td.rdtOld{color:#999}.rdtPicker td.rdtToday{position:relative}.rdtPicker td.rdtToday:before{content:"";display:inline-block;border-left:7px solid transparent;border-bottom:7px solid #428bca;border-top-color:rgba(0,0,0,.2);position:absolute;bottom:4px;right:4px}.rdtPicker td.rdtActive,.rdtPicker td.rdtActive:hover{background-color:#428bca;color:#fff;text-shadow:0 -1px 0 rgba(0,0,0,.25)}.rdtPicker td.rdtActive.rdtToday:before{border-bottom-color:#fff}.rdtPicker td.rdtDisabled,.rdtPicker td.rdtDisabled:hover{background:none;color:#999;cursor:not-allowed}.rdtPicker td span.rdtOld{color:#999}.rdtPicker td span.rdtDisabled,.rdtPicker td span.rdtDisabled:hover{background:none;color:#999;cursor:not-allowed}.rdtPicker th{border-bottom:1px solid #f9f9f9}.rdtPicker .dow{width:14.2857%;border-bottom:none;cursor:default}.rdtPicker th.rdtSwitch{width:100px}.rdtPicker th.rdtNext,.rdtPicker th.rdtPrev{font-size:21px;vertical-align:top}.rdtNext span,.rdtPrev span{display:block;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.rdtPicker th.rdtDisabled,.rdtPicker th.rdtDisabled:hover{background:none;color:#999;cursor:not-allowed}.rdtPicker thead tr:first-child th{cursor:pointer}.rdtPicker thead tr:first-child th:hover{background:#eee}.rdtPicker tfoot{border-top:1px solid #f9f9f9}.rdtPicker button{border:none;background:none;cursor:pointer}.rdtPicker button:hover{background-color:#eee}.rdtPicker thead button{width:100%;height:100%}td.rdtMonth,td.rdtYear{height:50px;width:25%;cursor:pointer}td.rdtMonth:hover,td.rdtYear:hover{background:#eee}.rdtCounters{display:inline-block}.rdtCounters>div{float:left}.rdtCounter{height:100px;width:40px}.rdtCounterSeparator{line-height:100px}.rdtCounter .rdtBtn{height:40%;line-height:40px;cursor:pointer;display:block;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.rdtCounter .rdtBtn:hover{background:#eee}.rdtCounter .rdtCount{height:20%;font-size:1.2em}.rdtMilli{vertical-align:middle;padding-left:8px;width:48px}.rdtMilli input{width:100%;font-size:1.2em;margin-top:37px}.rdtTime td{cursor:default}',""])},function(t,e,n){"use strict";var r=n(18),a=n(2),i=n(5),o=n(1),s=n(0),c=n(49),d=Object.freeze({YEARS:"years",MONTHS:"months",DAYS:"days",TIME:"time"}),l=a,u=i({propTypes:{onFocus:l.func,onBlur:l.func,onChange:l.func,onViewModeChange:l.func,locale:l.string,utc:l.bool,input:l.bool,inputProps:l.object,timeConstraints:l.object,viewMode:l.oneOf([d.YEARS,d.MONTHS,d.DAYS,d.TIME]),isValidDate:l.func,open:l.bool,strictParsing:l.bool,closeOnSelect:l.bool,closeOnTab:l.bool},getInitialState:function(){var t=this.getStateFromProps(this.props);return void 0===t.open&&(t.open=!this.props.input),t.currentView=this.props.dateFormat?this.props.viewMode||t.updateOn||d.DAYS:d.TIME,t},parseDate:function(t,e){var n;return t&&"string"==typeof t?n=this.localMoment(t,e.datetime):t&&(n=this.localMoment(t)),n&&!n.isValid()&&(n=null),n},getStateFromProps:function(t){var e,n,r,a,i=this.getFormats(t),o=t.value||t.defaultValue;return e=this.parseDate(o,i),n=this.parseDate(t.viewDate,i),n=e?e.clone().startOf("month"):n?n.clone().startOf("month"):this.localMoment().startOf("month"),r=this.getUpdateOn(i),a=e?e.format(i.datetime):o.isValid&&!o.isValid()?"":o||"",{updateOn:r,inputFormat:i.datetime,viewDate:n,selectedDate:e,inputValue:a,open:t.open}},getUpdateOn:function(t){return t.date.match(/[lLD]/)?d.DAYS:-1!==t.date.indexOf("M")?d.MONTHS:-1!==t.date.indexOf("Y")?d.YEARS:d.DAYS},getFormats:function(t){var e={date:t.dateFormat||"",time:t.timeFormat||""},n=this.localMoment(t.date,null,t).localeData();return!0===e.date?e.date=n.longDateFormat("L"):this.getUpdateOn(e)!==d.DAYS&&(e.time=""),!0===e.time&&(e.time=n.longDateFormat("LT")),e.datetime=e.date&&e.time?e.date+" "+e.time:e.date||e.time,e},componentWillReceiveProps:function(t){var e=this.getFormats(t),n={};if(t.value===this.props.value&&e.datetime===this.getFormats(this.props).datetime||(n=this.getStateFromProps(t)),void 0===n.open&&(void 0!==t.open?n.open=t.open:this.props.closeOnSelect&&this.state.currentView!==d.TIME?n.open=!1:n.open=this.state.open),t.viewMode!==this.props.viewMode&&(n.currentView=t.viewMode),t.locale!==this.props.locale){if(this.state.viewDate){var r=this.state.viewDate.clone().locale(t.locale);n.viewDate=r}if(this.state.selectedDate){var a=this.state.selectedDate.clone().locale(t.locale);n.selectedDate=a,n.inputValue=a.format(e.datetime)}}t.utc!==this.props.utc&&(t.utc?(this.state.viewDate&&(n.viewDate=this.state.viewDate.clone().utc()),this.state.selectedDate&&(n.selectedDate=this.state.selectedDate.clone().utc(),n.inputValue=n.selectedDate.format(e.datetime))):(this.state.viewDate&&(n.viewDate=this.state.viewDate.clone().local()),this.state.selectedDate&&(n.selectedDate=this.state.selectedDate.clone().local(),n.inputValue=n.selectedDate.format(e.datetime)))),t.viewDate!==this.props.viewDate&&(n.viewDate=o(t.viewDate)),this.setState(n)},onInputChange:function(t){var e=null===t.target?t:t.target.value,n=this.localMoment(e,this.state.inputFormat),r={inputValue:e};return n.isValid()&&!this.props.value?(r.selectedDate=n,r.viewDate=n.clone().startOf("month")):r.selectedDate=null,this.setState(r,function(){return this.props.onChange(n.isValid()?n:this.state.inputValue)})},onInputKey:function(t){9===t.which&&this.props.closeOnTab&&this.closeCalendar()},showView:function(t){var e=this;return function(){e.state.currentView!==t&&e.props.onViewModeChange(t),e.setState({currentView:t})}},setDate:function(t){var e=this,n={month:d.DAYS,year:d.MONTHS};return function(r){e.setState({viewDate:e.state.viewDate.clone()[t](parseInt(r.target.getAttribute("data-value"),10)).startOf(t),currentView:n[t]}),e.props.onViewModeChange(n[t])}},addTime:function(t,e,n){return this.updateTime("add",t,e,n)},subtractTime:function(t,e,n){return this.updateTime("subtract",t,e,n)},updateTime:function(t,e,n,r){var a=this;return function(){var i={},o=r?"selectedDate":"viewDate";i[o]=a.state[o].clone()[t](e,n),a.setState(i)}},allowedSetTime:["hours","minutes","seconds","milliseconds"],setTime:function(t,e){var n,r=this.allowedSetTime.indexOf(t)+1,a=this.state,i=(a.selectedDate||a.viewDate).clone();for(i[t](e);r<this.allowedSetTime.length;r++)i[n=this.allowedSetTime[r]](i[n]());this.props.value||this.setState({selectedDate:i,inputValue:i.format(a.inputFormat)}),this.props.onChange(i)},updateSelectedDate:function(t,e){var n,r=t.target,a=0,i=this.state.viewDate,o=this.state.selectedDate||i;if(-1!==r.className.indexOf("rdtDay")?(-1!==r.className.indexOf("rdtNew")?a=1:-1!==r.className.indexOf("rdtOld")&&(a=-1),n=i.clone().month(i.month()+a).date(parseInt(r.getAttribute("data-value"),10))):-1!==r.className.indexOf("rdtMonth")?n=i.clone().month(parseInt(r.getAttribute("data-value"),10)).date(o.date()):-1!==r.className.indexOf("rdtYear")&&(n=i.clone().month(o.month()).date(o.date()).year(parseInt(r.getAttribute("data-value"),10))),n.hours(o.hours()).minutes(o.minutes()).seconds(o.seconds()).milliseconds(o.milliseconds()),this.props.value)this.props.closeOnSelect&&e&&this.closeCalendar();else{var s=!(this.props.closeOnSelect&&e);s||this.props.onBlur(n),this.setState({selectedDate:n,viewDate:n.clone().startOf("month"),inputValue:n.format(this.state.inputFormat),open:s})}this.props.onChange(n)},openCalendar:function(t){this.state.open||this.setState({open:!0},function(){this.props.onFocus(t)})},closeCalendar:function(){this.setState({open:!1},function(){this.props.onBlur(this.state.selectedDate||this.state.inputValue)})},handleClickOutside:function(){this.props.input&&this.state.open&&!this.props.open&&!this.props.disableOnClickOutside&&this.setState({open:!1},function(){this.props.onBlur(this.state.selectedDate||this.state.inputValue)})},localMoment:function(t,e,n){var r=((n=n||this.props).utc?o.utc:o)(t,e,n.strictParsing);return n.locale&&r.locale(n.locale),r},componentProps:{fromProps:["value","isValidDate","renderDay","renderMonth","renderYear","timeConstraints"],fromState:["viewDate","selectedDate","updateOn"],fromThis:["setDate","setTime","showView","addTime","subtractTime","updateSelectedDate","localMoment","handleClickOutside"]},getComponentProps:function(){var t=this,e=this.getFormats(this.props),n={dateFormat:e.date,timeFormat:e.time};return this.componentProps.fromProps.forEach(function(e){n[e]=t.props[e]}),this.componentProps.fromState.forEach(function(e){n[e]=t.state[e]}),this.componentProps.fromThis.forEach(function(e){n[e]=t[e]}),n},render:function(){var t="rdt"+(this.props.className?Array.isArray(this.props.className)?" "+this.props.className.join(" "):" "+this.props.className:""),e=[];if(this.props.input){var n=r({type:"text",className:"form-control",onClick:this.openCalendar,onFocus:this.openCalendar,onChange:this.onInputChange,onKeyDown:this.onInputKey,value:this.state.inputValue},this.props.inputProps);e=this.props.renderInput?[s.createElement("div",{key:"i"},this.props.renderInput(n,this.openCalendar,this.closeCalendar))]:[s.createElement("input",r({key:"i"},n))]}else t+=" rdtStatic";return this.state.open&&(t+=" rdtOpen"),s.createElement("div",{className:t},e.concat(s.createElement("div",{key:"dt",className:"rdtPicker"},s.createElement(c,{view:this.state.currentView,viewProps:this.getComponentProps(),onClickOutside:this.handleClickOutside}))))}});u.defaultProps={className:"",defaultValue:"",inputProps:{},input:!0,onFocus:function(){},onBlur:function(){},onChange:function(){},onViewModeChange:function(){},timeFormat:!0,timeConstraints:{},dateFormat:!0,strictParsing:!0,closeOnSelect:!1,closeOnTab:!0,utc:!1},u.moment=o,t.exports=u},function(t,e,n){"use strict";var r=n(44);function a(){}t.exports=function(){function t(t,e,n,a,i,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e};return n.checkPropTypes=a,n.PropTypes=n,n}},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,n){"use strict";var r=n(46),a=n(47),i=n(48),o="mixins";t.exports=function(t,e,n){var s=[],c={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",UNSAFE_componentWillMount:"DEFINE_MANY",UNSAFE_componentWillReceiveProps:"DEFINE_MANY",UNSAFE_componentWillUpdate:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},d={getDerivedStateFromProps:"DEFINE_MANY_MERGED"},l={displayName:function(t,e){t.displayName=e},mixins:function(t,e){if(e)for(var n=0;n<e.length;n++)p(t,e[n])},childContextTypes:function(t,e){t.childContextTypes=r({},t.childContextTypes,e)},contextTypes:function(t,e){t.contextTypes=r({},t.contextTypes,e)},getDefaultProps:function(t,e){t.getDefaultProps?t.getDefaultProps=m(t.getDefaultProps,e):t.getDefaultProps=e},propTypes:function(t,e){t.propTypes=r({},t.propTypes,e)},statics:function(t,e){!function(t,e){if(e)for(var n in e){var r=e[n];if(e.hasOwnProperty(n)){var a=n in l;i(!a,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',n);var o=n in t;if(o){var s=d.hasOwnProperty(n)?d[n]:null;return i("DEFINE_MANY_MERGED"===s,"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",n),void(t[n]=m(t[n],r))}t[n]=r}}}(t,e)},autobind:function(){}};function u(t,e){var n=c.hasOwnProperty(e)?c[e]:null;b.hasOwnProperty(e)&&i("OVERRIDE_BASE"===n,"ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",e),t&&i("DEFINE_MANY"===n||"DEFINE_MANY_MERGED"===n,"ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",e)}function p(t,n){if(n){i("function"!=typeof n,"ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),i(!e(n),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var r=t.prototype,a=r.__reactAutoBindPairs;for(var s in n.hasOwnProperty(o)&&l.mixins(t,n.mixins),n)if(n.hasOwnProperty(s)&&s!==o){var d=n[s],p=r.hasOwnProperty(s);if(u(p,s),l.hasOwnProperty(s))l[s](t,d);else{var h=c.hasOwnProperty(s);if("function"!=typeof d||h||p||!1===n.autobind)if(p){var g=c[s];i(h&&("DEFINE_MANY_MERGED"===g||"DEFINE_MANY"===g),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",g,s),"DEFINE_MANY_MERGED"===g?r[s]=m(r[s],d):"DEFINE_MANY"===g&&(r[s]=f(r[s],d))}else r[s]=d;else a.push(s,d),r[s]=d}}}}function h(t,e){for(var n in i(t&&e&&"object"==typeof t&&"object"==typeof e,"mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects."),e)e.hasOwnProperty(n)&&(i(void 0===t[n],"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",n),t[n]=e[n]);return t}function m(t,e){return function(){var n=t.apply(this,arguments),r=e.apply(this,arguments);if(null==n)return r;if(null==r)return n;var a={};return h(a,n),h(a,r),a}}function f(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function g(t,e){return e.bind(t)}var v={componentDidMount:function(){this.__isMounted=!0}},y={componentWillUnmount:function(){this.__isMounted=!1}},b={replaceState:function(t,e){this.updater.enqueueReplaceState(this,t,e)},isMounted:function(){return!!this.__isMounted}},k=function(){};return r(k.prototype,t.prototype,b),function(t){var e=function(t){return t}(function(t,r,o){this.__reactAutoBindPairs.length&&function(t){for(var e=t.__reactAutoBindPairs,n=0;n<e.length;n+=2){var r=e[n],a=e[n+1];t[r]=g(t,a)}}(this),this.props=t,this.context=r,this.refs=a,this.updater=o||n,this.state=null;var s=this.getInitialState?this.getInitialState():null;i("object"==typeof s&&!Array.isArray(s),"%s.getInitialState(): must return an object or null",e.displayName||"ReactCompositeComponent"),this.state=s});for(var r in e.prototype=new k,e.prototype.constructor=e,e.prototype.__reactAutoBindPairs=[],s.forEach(p.bind(null,e)),p(e,v),p(e,t),p(e,y),e.getDefaultProps&&(e.defaultProps=e.getDefaultProps()),i(e.prototype.render,"createClass(...): Class specification must implement a `render` method."),c)e.prototype[r]||(e.prototype[r]=null);return e}}},function(t,e,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,o,s=function(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),c=1;c<arguments.length;c++){for(var d in n=Object(arguments[c]))a.call(n,d)&&(s[d]=n[d]);if(r){o=r(n);for(var l=0;l<o.length;l++)i.call(n,o[l])&&(s[o[l]]=n[o[l]])}}return s}},function(t,e,n){"use strict";t.exports={}},function(t,e,n){"use strict";var r=function(t){};t.exports=function(t,e,n,a,i,o,s,c){if(r(e),!t){var d;if(void 0===e)d=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,a,i,o,s,c],u=0;(d=new Error(e.replace(/%s/g,function(){return l[u++]}))).name="Invariant Violation"}throw d.framesToPop=1,d}}},function(t,e,n){"use strict";var r=n(0),a=n(5)({viewComponents:{days:n(50),months:n(51),years:n(52),time:n(53)},render:function(){return r.createElement(this.viewComponents[this.props.view],this.props.viewProps)}});t.exports=a},function(t,e,n){"use strict";var r=n(0),a=n(5),i=n(1),o=(0,n(8).default)(a({render:function(){var t,e=this.renderFooter(),n=this.props.viewDate,a=n.localeData();return t=[r.createElement("thead",{key:"th"},[r.createElement("tr",{key:"h"},[r.createElement("th",{key:"p",className:"rdtPrev",onClick:this.props.subtractTime(1,"months")},r.createElement("span",{},"‹")),r.createElement("th",{key:"s",className:"rdtSwitch",onClick:this.props.showView("months"),colSpan:5,"data-value":this.props.viewDate.month()},a.months(n)+" "+n.year()),r.createElement("th",{key:"n",className:"rdtNext",onClick:this.props.addTime(1,"months")},r.createElement("span",{},"›"))]),r.createElement("tr",{key:"d"},this.getDaysOfWeek(a).map(function(t,e){return r.createElement("th",{key:t+e,className:"dow"},t)}))]),r.createElement("tbody",{key:"tb"},this.renderDays())],e&&t.push(e),r.createElement("div",{className:"rdtDays"},r.createElement("table",{},t))},getDaysOfWeek:function(t){var e=t._weekdaysMin,n=t.firstDayOfWeek(),r=[],a=0;return e.forEach(function(t){r[(7+a++-n)%7]=t}),r},renderDays:function(){var t,e,n,a,o=this.props.viewDate,s=this.props.selectedDate&&this.props.selectedDate.clone(),c=o.clone().subtract(1,"months"),d=o.year(),l=o.month(),u=[],p=[],h=this.props.renderDay||this.renderDay,m=this.props.isValidDate||this.alwaysValidDate;c.date(c.daysInMonth()).startOf("week");for(var f=c.clone().add(42,"d");c.isBefore(f);)t="rdtDay",a=c.clone(),c.year()===d&&c.month()<l||c.year()<d?t+=" rdtOld":(c.year()===d&&c.month()>l||c.year()>d)&&(t+=" rdtNew"),s&&c.isSame(s,"day")&&(t+=" rdtActive"),c.isSame(i(),"day")&&(t+=" rdtToday"),(e=!m(a,s))&&(t+=" rdtDisabled"),n={key:c.format("M_D"),"data-value":c.date(),className:t},e||(n.onClick=this.updateSelectedDate),p.push(h(n,a,s)),7===p.length&&(u.push(r.createElement("tr",{key:c.format("M_D")},p)),p=[]),c.add(1,"d");return u},updateSelectedDate:function(t){this.props.updateSelectedDate(t,!0)},renderDay:function(t,e){return r.createElement("td",t,e.date())},renderFooter:function(){if(!this.props.timeFormat)return"";var t=this.props.selectedDate||this.props.viewDate;return r.createElement("tfoot",{key:"tf"},r.createElement("tr",{},r.createElement("td",{onClick:this.props.showView("time"),colSpan:7,className:"rdtTimeToggle"},t.format(this.props.timeFormat))))},alwaysValidDate:function(){return 1},handleClickOutside:function(){this.props.handleClickOutside()}}));t.exports=o},function(t,e,n){"use strict";var r=n(0),a=n(5),i=(0,n(8).default)(a({render:function(){return r.createElement("div",{className:"rdtMonths"},[r.createElement("table",{key:"a"},r.createElement("thead",{},r.createElement("tr",{},[r.createElement("th",{key:"prev",className:"rdtPrev",onClick:this.props.subtractTime(1,"years")},r.createElement("span",{},"‹")),r.createElement("th",{key:"year",className:"rdtSwitch",onClick:this.props.showView("years"),colSpan:2,"data-value":this.props.viewDate.year()},this.props.viewDate.year()),r.createElement("th",{key:"next",className:"rdtNext",onClick:this.props.addTime(1,"years")},r.createElement("span",{},"›"))]))),r.createElement("table",{key:"months"},r.createElement("tbody",{key:"b"},this.renderMonths()))])},renderMonths:function(){for(var t,e,n,a,i,o=this.props.selectedDate,s=this.props.viewDate.month(),c=this.props.viewDate.year(),d=[],l=0,u=[],p=this.props.renderMonth||this.renderMonth,h=this.props.isValidDate||this.alwaysValidDate;l<12;)t="rdtMonth",i=(n=this.props.viewDate.clone().set({year:c,month:l,date:1})).endOf("month").format("D"),(a=void 0===Array.from({length:i},function(t,e){return e+1}).find(function(t){var e=n.clone().set("date",t);return h(e)}))&&(t+=" rdtDisabled"),o&&l===o.month()&&c===o.year()&&(t+=" rdtActive"),e={key:l,"data-value":l,className:t},a||(e.onClick="months"===this.props.updateOn?this.updateSelectedMonth:this.props.setDate("month")),u.push(p(e,l,c,o&&o.clone())),4===u.length&&(d.push(r.createElement("tr",{key:s+"_"+d.length},u)),u=[]),l++;return d},updateSelectedMonth:function(t){this.props.updateSelectedDate(t)},renderMonth:function(t,e){var n=this.props.viewDate,a=n.localeData().monthsShort(n.month(e)).substring(0,3);return r.createElement("td",t,function(t){return t.charAt(0).toUpperCase()+t.slice(1)}(a))},alwaysValidDate:function(){return 1},handleClickOutside:function(){this.props.handleClickOutside()}}));t.exports=i},function(t,e,n){"use strict";var r=n(0),a=n(5),i=(0,n(8).default)(a({render:function(){var t=10*parseInt(this.props.viewDate.year()/10,10);return r.createElement("div",{className:"rdtYears"},[r.createElement("table",{key:"a"},r.createElement("thead",{},r.createElement("tr",{},[r.createElement("th",{key:"prev",className:"rdtPrev",onClick:this.props.subtractTime(10,"years")},r.createElement("span",{},"‹")),r.createElement("th",{key:"year",className:"rdtSwitch",onClick:this.props.showView("years"),colSpan:2},t+"-"+(t+9)),r.createElement("th",{key:"next",className:"rdtNext",onClick:this.props.addTime(10,"years")},r.createElement("span",{},"›"))]))),r.createElement("table",{key:"years"},r.createElement("tbody",{},this.renderYears(t)))])},renderYears:function(t){var e,n,a,i,o,s=[],c=-1,d=[],l=this.props.renderYear||this.renderYear,u=this.props.selectedDate,p=this.props.isValidDate||this.alwaysValidDate;for(t--;c<11;)e="rdtYear",o=(a=this.props.viewDate.clone().set({year:t,month:0,date:1})).endOf("year").format("DDD"),(i=void 0===Array.from({length:o},function(t,e){return e+1}).find(function(t){var e=a.clone().dayOfYear(t);return p(e)}))&&(e+=" rdtDisabled"),u&&u.year()===t&&(e+=" rdtActive"),n={key:t,"data-value":t,className:e},i||(n.onClick="years"===this.props.updateOn?this.updateSelectedYear:this.props.setDate("year")),s.push(l(n,t,u&&u.clone())),4===s.length&&(d.push(r.createElement("tr",{key:c},s)),s=[]),t++,c++;return d},updateSelectedYear:function(t){this.props.updateSelectedDate(t)},renderYear:function(t,e){return r.createElement("td",t,e)},alwaysValidDate:function(){return 1},handleClickOutside:function(){this.props.handleClickOutside()}}));t.exports=i},function(t,e,n){"use strict";var r=n(0),a=n(5),i=n(18),o=(0,n(8).default)(a({getInitialState:function(){return this.calculateState(this.props)},calculateState:function(t){var e=t.selectedDate||t.viewDate,n=t.timeFormat,r=[];-1!==n.toLowerCase().indexOf("h")&&(r.push("hours"),-1!==n.indexOf("m")&&(r.push("minutes"),-1!==n.indexOf("s")&&r.push("seconds")));var a=e.format("H"),i=!1;return null!==this.state&&-1!==this.props.timeFormat.toLowerCase().indexOf(" a")&&(i=-1!==this.props.timeFormat.indexOf(" A")?a>=12?"PM":"AM":a>=12?"pm":"am"),{hours:a,minutes:e.format("mm"),seconds:e.format("ss"),milliseconds:e.format("SSS"),daypart:i,counters:r}},renderCounter:function(t){if("daypart"!==t){var e=this.state[t];return"hours"===t&&-1!==this.props.timeFormat.toLowerCase().indexOf(" a")&&0===(e=(e-1)%12+1)&&(e=12),r.createElement("div",{key:t,className:"rdtCounter"},[r.createElement("span",{key:"up",className:"rdtBtn",onTouchStart:this.onStartClicking("increase",t),onMouseDown:this.onStartClicking("increase",t),onContextMenu:this.disableContextMenu},"▲"),r.createElement("div",{key:"c",className:"rdtCount"},e),r.createElement("span",{key:"do",className:"rdtBtn",onTouchStart:this.onStartClicking("decrease",t),onMouseDown:this.onStartClicking("decrease",t),onContextMenu:this.disableContextMenu},"▼")])}return""},renderDayPart:function(){return r.createElement("div",{key:"dayPart",className:"rdtCounter"},[r.createElement("span",{key:"up",className:"rdtBtn",onTouchStart:this.onStartClicking("toggleDayPart","hours"),onMouseDown:this.onStartClicking("toggleDayPart","hours"),onContextMenu:this.disableContextMenu},"▲"),r.createElement("div",{key:this.state.daypart,className:"rdtCount"},this.state.daypart),r.createElement("span",{key:"do",className:"rdtBtn",onTouchStart:this.onStartClicking("toggleDayPart","hours"),onMouseDown:this.onStartClicking("toggleDayPart","hours"),onContextMenu:this.disableContextMenu},"▼")])},render:function(){var t=this,e=[];return this.state.counters.forEach(function(n){e.length&&e.push(r.createElement("div",{key:"sep"+e.length,className:"rdtCounterSeparator"},":")),e.push(t.renderCounter(n))}),!1!==this.state.daypart&&e.push(t.renderDayPart()),3===this.state.counters.length&&-1!==this.props.timeFormat.indexOf("S")&&(e.push(r.createElement("div",{className:"rdtCounterSeparator",key:"sep5"},":")),e.push(r.createElement("div",{className:"rdtCounter rdtMilli",key:"m"},r.createElement("input",{value:this.state.milliseconds,type:"text",onChange:this.updateMilli})))),r.createElement("div",{className:"rdtTime"},r.createElement("table",{},[this.renderHeader(),r.createElement("tbody",{key:"b"},r.createElement("tr",{},r.createElement("td",{},r.createElement("div",{className:"rdtCounters"},e))))]))},componentWillMount:function(){var t=this;t.timeConstraints={hours:{min:0,max:23,step:1},minutes:{min:0,max:59,step:1},seconds:{min:0,max:59,step:1},milliseconds:{min:0,max:999,step:1}},["hours","minutes","seconds","milliseconds"].forEach(function(e){i(t.timeConstraints[e],t.props.timeConstraints[e])}),this.setState(this.calculateState(this.props))},componentWillReceiveProps:function(t){this.setState(this.calculateState(t))},updateMilli:function(t){var e=parseInt(t.target.value,10);e===t.target.value&&e>=0&&e<1e3&&(this.props.setTime("milliseconds",e),this.setState({milliseconds:e}))},renderHeader:function(){if(!this.props.dateFormat)return null;var t=this.props.selectedDate||this.props.viewDate;return r.createElement("thead",{key:"h"},r.createElement("tr",{},r.createElement("th",{className:"rdtSwitch",colSpan:4,onClick:this.props.showView("days")},t.format(this.props.dateFormat))))},onStartClicking:function(t,e){var n=this;return function(){var r={};r[e]=n[t](e),n.setState(r),n.timer=setTimeout(function(){n.increaseTimer=setInterval(function(){r[e]=n[t](e),n.setState(r)},70)},500),n.mouseUpListener=function(){clearTimeout(n.timer),clearInterval(n.increaseTimer),n.props.setTime(e,n.state[e]),document.body.removeEventListener("mouseup",n.mouseUpListener),document.body.removeEventListener("touchend",n.mouseUpListener)},document.body.addEventListener("mouseup",n.mouseUpListener),document.body.addEventListener("touchend",n.mouseUpListener)}},disableContextMenu:function(t){return t.preventDefault(),!1},padValues:{hours:1,minutes:2,seconds:2,milliseconds:3},toggleDayPart:function(t){var e=parseInt(this.state[t],10)+12;return e>this.timeConstraints[t].max&&(e=this.timeConstraints[t].min+(e-(this.timeConstraints[t].max+1))),this.pad(t,e)},increase:function(t){var e=parseInt(this.state[t],10)+this.timeConstraints[t].step;return e>this.timeConstraints[t].max&&(e=this.timeConstraints[t].min+(e-(this.timeConstraints[t].max+1))),this.pad(t,e)},decrease:function(t){var e=parseInt(this.state[t],10)-this.timeConstraints[t].step;return e<this.timeConstraints[t].min&&(e=this.timeConstraints[t].max+1-(this.timeConstraints[t].min-e)),this.pad(t,e)},pad:function(t,e){for(var n=e+"";n.length<this.padValues[t];)n="0"+n;return n},handleClickOutside:function(){this.props.handleClickOutside()}}));t.exports=o},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),i=n(1),o=n(12),s=n(17),c=n(9),d=n(7),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.renderTaskId=function(){return a.createElement("div",{className:"task-id"},"T",this.props.task.id)},e.prototype.renderPriority=function(){var t="task-color -p"+this.props.task.priority;return a.createElement("div",{className:t})},e.prototype.renderState=function(){if(this.props.viewType!=s.TaskBoardViewType.status){this.props.task.state;for(var t="",e=0,n=o.stateNameList;e<n.length;e++){var r=n[e],i=r[0];r[1]==this.props.task.state&&(t=i)}return a.createElement("div",{className:"task-state"},t)}},e.prototype.renderTag=function(t){var e=this.props.tagsById[t];return a.createElement(c.TagComponent,{tag:e,key:t})},e.prototype.renderTags=function(){if(this.props.task.tagIds.length)return a.createElement("div",{className:"task-tags-container"},this.props.task.tagIds.map(this.renderTag.bind(this)))},e.prototype.renderEstimate=function(){if(this.props.task.expectedDurationSecs)return a.createElement("div",{className:"estimate-container"},"Est: ",d.renderDuration(this.props.task.expectedDurationSecs,!0,!1))},e.prototype.computeTimeUntilTarget=function(t){var e=Math.round(t/1e3-i().unix());return e>0&&(e+=86399),[e,d.renderDuration(Math.abs(e),!0,!0)]},e.prototype.renderDueDate=function(){if(this.props.task.dueTime&&1e3!=this.props.task.state){var t=this.computeTimeUntilTarget(this.props.task.dueTime),e=t[0],n=t[1],r="",i="task-due-date";return"None"==n?(i+=" -due-today",r="Due today"):e<0?(i+=e<-259200?" -very-overdue":" -overdue",r="Due "+n+" ago"):(i+=e>259200?" -due-not-soon":" -due-soon",r="Due in "+n),a.createElement("div",{className:i},r)}},e.prototype.renderClosedDate=function(){if(1e3==this.props.task.state&&this.props.task.stateUpdatedTime){var t=this.computeTimeUntilTarget(this.props.task.stateUpdatedTime),e=t[0],n=t[1],r="Closed ";return r+="None"==n?"today":e<0?n+" ago":n+" from now",a.createElement("div",{className:"closed-time"},r)}},e.prototype.render=function(){return a.createElement("div",{className:"task card"},a.createElement("div",{className:"task-columns"},this.renderPriority(),a.createElement("div",{className:"main-column"},this.renderTaskId(),a.createElement("div",{className:"task-title"},this.props.task.title),this.renderTags(),this.renderState(),this.renderEstimate(),this.renderDueDate(),this.renderClosedDate())))},e}(a.Component);e.TaskComponent=l},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var a,i=n(3),o=n(1),s=n(0),c=n(56),d=n(4),l=n(57),u=n(6),p=n(7);!function(t){t[t.week=0]="week",t[t.day=1]="day"}(a=e.CalendarViewType||(e.CalendarViewType={}));var h=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],m=function(t){function e(e){var n=t.call(this,e)||this;return n.refreshLoopId=0,n.state=n.getState(e),n}return r(e,t),e.prototype.componentWillReceiveProps=function(t){this.setState(this.getState(t))},e.prototype.getState=function(t){var n,r=t.initialViewType;this.state?(r=this.state.viewType,n=this.state.startDayTimestamp):n=this.computeTodayStartTime(r);var a=25,i=null;this.state&&(a=this.state.cellHeight,this.state.selectedTag&&t.tagsById[this.state.selectedTag.id]&&(i=this.state.selectedTag));var o=e.divideAndSort(n,r,t.eventsById,i,t.tagsById,a),s=o[0],c=o[1];return{viewType:r,startDayTimestamp:n,columns:s,cellHeight:a,showCreate:!!this.state&&this.state.showCreate,eventToRenderingInfo:c,editingEvent:null,createEventTimestamp:null,createEventDurationSecs:null,createEventTask:null,selectedTag:i,draggingStartTimestamp:null,draggingEndTimestamp:null,draggingEvent:null,endDraggingEvent:null}},e.prototype.componentDidMount=function(){var t=this,e=document.getElementsByClassName("current-time-cursor");if(e.length){var n=document.getElementsByClassName("all-columns-container")[0],r=i(e[0]).data("top");n.scrollTop=r-n.clientHeight/2}this.refreshLoopId=window.setInterval(function(){t.forceUpdate()},6e4)},e.prototype.componentWillUnmount=function(){this.refreshLoopId&&window.clearInterval(this.refreshLoopId)},e.prototype.computeTodayStartTime=function(t){return 1e3*(t==a.week?this.computeClosestMonday(o()):o().startOf("day")).unix()},e.prototype.computeClosestMonday=function(t){var e=o().startOf("week").add(1,"days");return e>o()&&(e=e.subtract(1,"week")),e},e.getEventKey=function(t,e){return t+"-"+e},e.divideAndSort=function(t,e,n,r,i,s){var c,d=this;c=e==a.week?[[],[],[],[],[],[],[]]:[[]];var l=o(t),u={};r&&(u=p.getTagAndDescendantsRecursive(r.id,i));for(var m=function(t){if(r){var e=!1;if(t.tagIds.forEach(function(t){e=e||u[t]}),!e)return!0}return!1},f=0,g=Object.keys(n);f<g.length;f++){var v=g[f],y=n[v];if(!m(y)){var b=y.startTime,k=b+1e3*y.durationSecs;for(var E in h){var _=1e3*o(l).add(E,"days").unix();if(_<k&&(_>=b?c[E].push(parseInt(v)):_+864e5>b&&c[E].push(parseInt(v))),e==a.day)break}}}c.forEach(function(t){t.sort(function(t,e){var r=n[t],a=n[e],i=r.startTime-a.startTime;return 0!=i?i:a.durationSecs-r.durationSecs})});var w={};return c.forEach(function(t,e){var r=1e3*o(l).add(e,"days").unix(),a=1e3*o(l).add(e+1,"days").unix(),i=[];t.forEach(function(t){var o,c=null,l=n[t];if(l.startTime<r)c=0;else{var u=(l.startTime-r)/864e5;c=u*s*48}var p=(Math.min(l.startTime+1e3*l.durationSecs,a)-l.startTime)/1e3;if(l.startTime<r&&(p-=(r-l.startTime)/1e3),o=Math.max(Math.min(s,20),p/1800*s),!i.length)return i.push({id:l.id,height:o,top:c}),void(w[d.getEventKey(l.id,e)]={index:0,columnWidth:1,extraCols:0,height:o,top:c});var h=!1;if(i.forEach(function(t,n){t&&function(t,e){return e>=t.top+1e-7&&e<t.top+t.height-1e-7}(t,c)||(h?i[n]=null:(h=!0,i[n]={id:l.id,top:c,height:o},w[d.getEventKey(l.id,e)]={index:n,columnWidth:0,extraCols:0,height:o,top:c}))}),h){for(;i.length&&null==i[i.length-1];)i.pop();var m=0,f=i.length;i.forEach(function(t){t&&(m++,f=Math.max(f,w[d.getEventKey(t.id,e)].columnWidth))}),i.forEach(function(t){if(t){var n=d.getEventKey(t.id,e),r=Math.max(m,w[n].columnWidth);w[n].columnWidth=r,w[n].extraCols=f-r}})}else i.forEach(function(t){if(t){var n=d.getEventKey(t.id,e);w[n].columnWidth=i.length+1}}),w[d.getEventKey(l.id,e)]={columnWidth:i.length+1,index:i.length,extraCols:0,height:o,top:c},i.push({id:l.id,top:c,height:o})})}),[c,w]},e.prototype.reflowCalendar=function(t,n,r,a){var i=e.divideAndSort(t,n,this.props.eventsById,r,this.props.tagsById,a),o=i[0],s=i[1];this.setState({startDayTimestamp:t,viewType:n,selectedTag:r,cellHeight:a,columns:o,eventToRenderingInfo:s})},e.prototype.onDoubleClick=function(t){this.setState({editingEvent:t})},e.prototype.computeTimestamp=function(t,e){var n=e;return this.state.viewType==a.week&&h.forEach(function(e,r){e==t&&(n+=86400*r)}),1e3*o(this.state.startDayTimestamp).add(n,"seconds").unix()},e.prototype.columnMouseDown=function(t,e){var n=1*e.target.dataset.index;this.setState({draggingStartTimestamp:this.computeTimestamp(t,n),draggingEndTimestamp:this.state.draggingStartTimestamp}),this.updateCreateEventTimestamp(),e.preventDefault()},e.prototype.columnMouseOver=function(t,e){if(this.state.draggingStartTimestamp){var n=1*e.target.dataset.index;this.setState({draggingEndTimestamp:this.computeTimestamp(t,n)}),this.updateCreateEventTimestamp(),this.updateCreateEventDurationSecs()}},e.prototype.columnMouseUp=function(t,e){if(this.state.draggingStartTimestamp){var n=1*e.target.dataset.index;this.setState({draggingEndTimestamp:this.computeTimestamp(t,n)}),this.updateCreateEventTimestamp(),this.updateCreateEventDurationSecs(),this.setState({draggingStartTimestamp:null,draggingEndTimestamp:null,showCreate:!0})}},e.prototype.updateCreateEventTimestamp=function(){var t;t=this.state.draggingEndTimestamp<this.state.draggingStartTimestamp?this.state.draggingEndTimestamp:this.state.draggingStartTimestamp,this.setState({createEventTimestamp:t})},e.prototype.updateCreateEventDurationSecs=function(){var t,e;this.state.draggingEndTimestamp<this.state.draggingStartTimestamp?(t=this.state.draggingEndTimestamp,e=this.state.draggingStartTimestamp):(t=this.state.draggingStartTimestamp,e=this.state.draggingEndTimestamp);var n=e-t;n/=1e3,n+=1800,this.setState({createEventDurationSecs:n})},e.prototype.onDrop=function(t,e){if(this.state.draggingEvent){console.log("Updating the start timestamp!"),(n=this.state.draggingEvent).startTime=this.computeTimestamp(t,e),this.props.updateEvent(n),this.setState({draggingEvent:null})}else{if(!this.state.endDraggingEvent)return;var n,r=this.computeTimestamp(t,e)-this.state.endDraggingEvent.startTime;r=Math.max(Math.round(r/1e3)+1800,1800),(n=this.state.endDraggingEvent).durationSecs=r,this.props.updateEvent(n),this.setState({endDraggingEvent:null})}},e.prototype.getDayAndIndexUnderneathEvent=function(t,e){var n=t.clientX,r=t.clientY;i(t.currentTarget).hide();var a=i(document.elementFromPoint(n,r));if("TD"==a.prop("tagName")){var o=a.data();e(o.day,o.index)}i(t.currentTarget).show()},e.prototype.onDropPassThrough=function(t){this.getDayAndIndexUnderneathEvent(t,this.onDrop.bind(this)),t.preventDefault(),t.stopPropagation()},e.prototype.onDragOverPassThrough=function(t){this.getDayAndIndexUnderneathEvent(t,this.onDragOver.bind(this)),t.preventDefault(),t.stopPropagation()},e.prototype.onDragStart=function(t,e){if(this.state.endDraggingEvent||this.state.draggingEvent)throw Error("Already was dragging an event...");this.setState({draggingEvent:t}),e.dataTransfer.setData("text/html",null)},e.prototype.onDragEnd=function(t){this.state.draggingEvent==t&&this.setState({draggingStartTimestamp:null,draggingEndTimestamp:null,draggingEvent:null})},e.prototype.onEventEndDragStart=function(t,e){if(this.state.endDraggingEvent||this.state.draggingEvent)throw Error("Already dragging an event...");this.setState({endDraggingEvent:t}),e.dataTransfer.setData("text/html",null)},e.prototype.onEventEndDragEnd=function(t){this.state.endDraggingEvent==t&&this.setState({draggingStartTimestamp:null,draggingEndTimestamp:null,endDraggingEvent:null})},e.prototype.onDragOver=function(t,e,n){if(n&&n.preventDefault(),-1==e&&(e=1*n.target.dataset.index),this.state.draggingEvent){console.log("onDragOver happening");var r=(a=this.computeTimestamp(t,e))+1e3*Math.max(0,this.state.draggingEvent.durationSecs-1800);this.state.draggingStartTimestamp==a&&this.state.draggingEndTimestamp==r||this.setState({draggingStartTimestamp:a,draggingEndTimestamp:r})}else{if(!this.state.endDraggingEvent)return;var a=this.computeTimestamp(t,e);this.state.draggingStartTimestamp==this.state.endDraggingEvent.startTime&&this.state.draggingEndTimestamp==a||this.setState({draggingStartTimestamp:this.state.endDraggingEvent.startTime,draggingEndTimestamp:a})}},e.prototype.getCurrentTagToken=function(){return this.state.selectedTag?[{label:this.state.selectedTag.name,value:this.state.selectedTag.id}]:[]},e.prototype.changeCurrentTagToken=function(t){var e;e=t.length?this.props.tagsById[t[0].value]:null,this.reflowCalendar(this.state.startDayTimestamp,this.state.viewType,e,this.state.cellHeight)},e.prototype.getAllTagNames=function(){var t=this,e=[];return Object.keys(this.props.tagsById).forEach(function(n){var r=t.props.tagsById[+n];e.push({label:r.name,value:r.id})}),e},e.prototype.renderTagSelector=function(){return s.createElement("div",{className:"tag-selector-container"},s.createElement("div",{className:"tag-selector-label"},"Filter Tag:"),s.createElement(d.TokenizerComponent,{onChange:this.changeCurrentTagToken.bind(this),initialValues:this.getCurrentTagToken(),possibleTokens:this.getAllTagNames(),tokenLimit:1}))},e.prototype.changeCellHeight=function(t){this.reflowCalendar(this.state.startDayTimestamp,this.state.viewType,this.state.selectedTag,t.target.value)},e.prototype.renderCellSizeSlider=function(){if(!this.props.simpleOptions)return s.createElement("div",{className:"cell-size-slider"},s.createElement("input",{type:"range",min:"20",max:"100",value:this.state.cellHeight,onChange:this.changeCellHeight.bind(this)}))},e.prototype.changeViewType=function(t){if(this.state.viewType!=t){var e=this.state.startDayTimestamp;if(this.state.viewType==a.week&&t==a.day){var n=o(this.state.startDayTimestamp),r=o();r.unix()-n.unix()>0&&n.add(1,"week").unix()-r.unix()>0&&(e=this.computeTodayStartTime(t))}else{if(this.state.viewType!=a.day||t!=a.week)throw Error("Unknown view type transition");e=1e3*this.computeClosestMonday(o(this.state.startDayTimestamp)).unix()}this.reflowCalendar(e,t,this.state.selectedTag,this.state.cellHeight)}},e.prototype.renderViewChoice=function(t){var e="view-type-choice";t==this.state.viewType&&(e+=" -selected");var n={};return n[a.day]="Day",n[a.week]="Week",s.createElement("div",{className:e,key:t,onClick:this.changeViewType.bind(this,t)},n[t])},e.prototype.renderChangeViewType=function(){if(!this.props.simpleOptions)return s.createElement("div",{className:"view-type-selector"},this.renderViewChoice(a.week),this.renderViewChoice(a.day))},e.prototype.changePage=function(t){var e;this.state.viewType==a.week&&(t*=7),e=0==t?this.computeTodayStartTime(this.state.viewType):1e3*o(this.state.startDayTimestamp).add(t,"days").unix(),this.reflowCalendar(e,this.state.viewType,this.state.selectedTag,this.state.cellHeight)},e.prototype.renderPagination=function(){return s.createElement("div",{className:"pagination-container"},s.createElement("div",{className:"pagination-option",onClick:this.changePage.bind(this,-1)},"Previous"),s.createElement("div",{className:"pagination-option",onClick:this.changePage.bind(this,1)},"Next"),s.createElement("div",{className:"pagination-option",onClick:this.changePage.bind(this,0)},"Today"))},e.prototype.renderOptions=function(){return s.createElement("div",{className:"options"},this.renderCellSizeSlider(),this.renderTagSelector(),this.renderChangeViewType(),this.renderPagination())},e.prototype.renderCells=function(t){for(var e=this,n=function(n){var r=""+n,a={height:e.state.cellHeight+"px"},i=e.computeTimestamp(t,n),c="";if(e.state.draggingStartTimestamp&&e.state.draggingEndTimestamp){var d=e.state.draggingStartTimestamp,l=e.state.draggingEndTimestamp;l<d&&(d=e.state.draggingEndTimestamp,l=e.state.draggingStartTimestamp),i>=d&&i<l+18e5&&(c="-selected")}if("times"==t){var u="";return n%3600==0&&(u=o(e.state.startDayTimestamp).add(n,"seconds").format("h:mm a")),s.createElement("tr",{key:r,style:a},s.createElement("td",null,u))}return s.createElement("tr",{key:r,style:a},s.createElement("td",{className:c,"data-day":t,"data-index":n,onDrop:e.onDrop.bind(e,t,n)}," "))},r=0,a=[];r<86400;r+=1800)a.push(n(r));return s.createElement("table",{cellPadding:"0",cellSpacing:"0",onMouseDown:this.columnMouseDown.bind(this,t),onMouseOver:p.debounce(this.columnMouseOver.bind(this,t),50),onMouseUp:this.columnMouseUp.bind(this,t),onDragOver:this.onDragOver.bind(this,t,-1)},s.createElement("tbody",null,a))},e.prototype.renderCurrentTimeCursor=function(t){var e=this.state.startDayTimestamp+864e5*t,n=1e3*o().unix();if(n>=e&&n<e+864e5){var r=(n-e)/864e5;r*=48*this.state.cellHeight;var a={top:(r-=2)+"px"};return s.createElement("div",{className:"current-time-cursor",style:a,"data-top":r,onDrop:this.onDropPassThrough.bind(this),onDragOver:this.onDragOverPassThrough.bind(this)})}},e.prototype.renderColumn=function(t,n,r){var a=this,i=h[t],o="column-container";return r&&(o+=" single-day"),s.createElement("div",{key:i,className:o},this.renderCells(i),this.renderCurrentTimeCursor(t),n.map(function(n){var r=a.state.eventToRenderingInfo[e.getEventKey(n,t)],i=r.columnWidth;r.extraCols&&(i+=r.extraCols);var o=100/i*(1+r.extraCols),c=o*r.index,d={height:r.height+"px",maxHeight:r.height+"px",top:r.top+"px",marginLeft:c+"%",width:o+"%"},u=a.props.eventsById[n];return s.createElement("div",{className:"rendered-event-container",key:n,style:d,onDrop:a.onDropPassThrough.bind(a),onDragOver:a.onDragOverPassThrough.bind(a)},s.createElement("div",{className:"rendered-event card",draggable:!0,onDragStart:a.onDragStart.bind(a,u),onDragEnd:a.onDragEnd.bind(a,u),onDoubleClick:a.onDoubleClick.bind(a,u)},s.createElement(l.EventComponent,{event:u,tagsById:a.props.tagsById})),s.createElement("div",{className:"draggable-event-end",draggable:!0,onDragStart:a.onEventEndDragStart.bind(a,u),onDragEnd:a.onEventEndDragEnd.bind(a,u)}))}))},e.prototype.renderWeekViewColumns=function(){var t=this;return s.createElement("div",{className:"full-column-container"},s.createElement("div",{className:"header-and-content-container"},s.createElement("div",{className:"column-header-container"},s.createElement("div",{className:"column-header -times"},"Time"),h.map(function(e,n){var r=o(t.state.startDayTimestamp).add(n,"days");return s.createElement("div",{key:e,className:"column-header"},r.format("ddd M/D"))})),s.createElement("div",{className:"all-columns-container"},s.createElement("div",{className:"column-container -times"},this.renderCells("times")),[0,1,2,3,4,5,6].map(function(e,n){return t.renderColumn(e,t.state.columns[n])}))))},e.prototype.renderTodayString=function(){return o(this.state.startDayTimestamp).format("dddd M/D")},e.prototype.renderDayViewColumns=function(){var t=this;return s.createElement("div",{className:"full-column-container"},s.createElement("div",{className:"header-and-content-container"},s.createElement("div",{className:"column-header-container"},s.createElement("div",{className:"column-header -times"},"Time"),s.createElement("div",{className:"column-header single-day"},this.renderTodayString())),s.createElement("div",{className:"all-columns-container"},s.createElement("div",{className:"column-container -times"},this.renderCells("times")),[0].map(function(e,n){return t.renderColumn(e,t.state.columns[n],!0)}))))},e.prototype.renderColumns=function(){return this.state.viewType==a.week?this.renderWeekViewColumns():this.state.viewType==a.day?this.renderDayViewColumns():void 0},e.prototype.clearEditingEvent=function(){this.setState({editingEvent:null})},e.prototype.renderEditingEvent=function(){if(this.state.editingEvent)return s.createElement(u.ModalComponent,{cancelFunc:this.clearEditingEvent.bind(this)},s.createElement(c.EditEventComponent,{meUser:this.props.meUser,event:this.state.editingEvent,eventsById:this.props.eventsById,tagsById:this.props.tagsById,createMode:!1,tasksById:this.props.tasksById,createEvent:function(t){},updateEvent:this.props.updateEvent,deleteEvent:this.props.deleteEvent}))},e.prototype.closeCreateEvent=function(){this.setState({showCreate:!1,createEventTimestamp:null,createEventDurationSecs:null,createEventTask:null})},e.prototype.createEvent=function(t){this.closeCreateEvent(),this.props.createEvent(t)},e.prototype.renderCreateEvent=function(){if(this.state.showCreate){var t=[];this.state.selectedTag&&t.push(this.state.selectedTag.id);var e=[];if(this.state.createEventTask){e.push(this.state.createEventTask.id);for(var n=0,r=this.state.createEventTask.tagIds;n<r.length;n++){var a=r[n];t.length&&a==t[0]||t.push(a)}}return s.createElement(u.ModalComponent,{cancelFunc:this.closeCreateEvent.bind(this)},s.createElement(c.EditEventComponent,{meUser:this.props.meUser,tagsById:this.props.tagsById,createMode:!0,eventsById:this.props.eventsById,tasksById:this.props.tasksById,initialCreationTime:this.state.createEventTimestamp,initialDurationSecs:this.state.createEventDurationSecs,initialTags:t,initialTasks:e,createEvent:this.createEvent.bind(this),updateEvent:function(t){},deleteEvent:function(t){}}))}},e.prototype.render=function(){return s.createElement("div",{className:"calendar"},this.renderOptions(),this.renderColumns(),this.renderEditingEvent(),this.renderCreateEvent())},e}(s.Component);e.CalendarComponent=m},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),i=n(0),o=n(4),s=function(t){function e(e){var n=t.call(this,e)||this,r=null;return r=e.createMode?n._getEmptyEvent(e.meUser,e.initialCreationTime,e.initialDurationSecs,e.initialTags,e.initialTasks):e.event,n.state={event:r,startNow:!1,startAfterLast:!1,endNow:!1,submitted:!1},n}return r(e,t),e.prototype.componentWillReceiveProps=function(t){var e=t.event;if(t.createMode){var n=this._getEmptyEvent(t.meUser,t.initialCreationTime,t.initialDurationSecs,t.initialTags,t.initialTasks);this.state&&!this.state.submitted&&(null==t.initialCreationTime&&(n.startTime=this.state.event.startTime),null==t.initialDurationSecs&&(n.durationSecs=this.state.event.durationSecs),t.initialTags&&t.initialTags.length||(n.tagIds=this.state.event.tagIds),t.initialTasks&&t.initialTasks.length||(n.taskIds=this.state.event.taskIds),n.name=this.state.event.name),e=n}this.setState({event:e})},e.prototype._getEmptyEvent=function(t,e,n,r,a){return{id:0,name:"",authorId:t.id,ownerId:t.id,tagIds:r||[],startTime:e||0,durationSecs:n||900,taskIds:a||[]}},e.prototype.toggleStartNow=function(){var t=!this.state.startNow,e=this.state.startAfterLast;t&&(e=!1),this.setState({startAfterLast:e,startNow:t})},e.prototype.toggleStartAfterLast=function(){var t=!this.state.startAfterLast,e=this.state.startNow;t&&(e=!1),this.setState({startAfterLast:t,startNow:e})},e.prototype.toggleEndNow=function(){this.setState({endNow:!this.state.endNow})},e.prototype.submitForm=function(t){var e=1e3*a().unix();if(this.state.startNow){var n=this.state.event.startTime+1e3*this.state.event.durationSecs;this.state.event.startTime=e,this.state.event.durationSecs=Math.floor((n-e)/1e3)}else if(this.state.startAfterLast){for(var r=0,i=0,o=Object.keys(this.props.eventsById);i<o.length;i++){var s=o[i],c=this.props.eventsById[s],d=c.startTime+1e3*c.durationSecs;d>r&&d<=this.state.event.startTime&&(r=d)}e-r>864e5&&(r=e),this.state.event.startTime=r}if(this.state.endNow&&e>this.state.event.startTime&&(this.state.event.durationSecs=Math.floor((e-this.state.event.startTime)/1e3)),this.state.event.name.trim().length||(this.state.event.name=this.autoFillName()),"save"==t)this.props.updateEvent(this.state.event);else if("delete"==t)this.props.deleteEvent(this.state.event);else{if("create"!=t)throw Error("Unknown submit type!");this.props.createEvent(this.state.event)}this.setState({submitted:!0})},e.prototype.autoFillName=function(){var t=this.state.event;if(1==t.taskIds.length)return"Working on T"+t.taskIds[0];if(t.tagIds.length>0){var e=this.getCurrentTags();if(2==t.tagIds.length)return e[0].label+" & "+e[1].label;if(1==t.tagIds.length)return""+e[0].label}return""},e.prototype.onKeyDownCreate=function(t){"Enter"==t.key&&this.props.createMode&&this.submitForm("create")},e.prototype.updateAttr=function(t,e){this.state.event[t]=e.target.value,this.setState(this.state)},e.prototype.getCurrentTags=function(){var t=this,e=[];return this.state.event.tagIds.forEach(function(n){var r=t.props.tagsById[n];e.push({label:r.name,value:r.id})}),e},e.prototype.getAllTagNames=function(){var t=this,e=[];return Object.keys(this.props.tagsById).forEach(function(n){var r=t.props.tagsById[+n];e.push({label:r.name,value:r.id})}),e},e.prototype.retrieveTagNames=function(t){this.state.event.tagIds=t.map(function(t){return t.value}),this.setState(this.state)},e.prototype.getCurrentTasks=function(){var t=this;return this.state.event.taskIds.map(function(e){return{label:"T"+e,subtext:t.props.tasksById[e].title,value:e}})},e.prototype.getAllTaskNames=function(){var t=[];for(var e in this.props.tasksById){var n=this.props.tasksById[e];t.push({label:"T"+e,subtext:n.title,value:e})}return t},e.prototype.retrieveTaskNames=function(t){for(var e={},n=0,r=this.state.event.taskIds;n<r.length;n++){var a=r[n];e[a]=!0}var i=[];this.state.event.taskIds=t.map(function(t){return e.hasOwnProperty(t.value)||i.push(t.value),t.value});for(var o={},s=0,c=this.state.event.tagIds;s<c.length;s++){o[h=c[s]]=!0}for(var d=0,l=i;d<l.length;d++){a=l[d];for(var u=0,p=this.props.tasksById[a].tagIds;u<p.length;u++){var h=p[u];o.hasOwnProperty(h+"")||this.state.event.tagIds.push(h)}}this.setState(this.state)},e.prototype.renderFormTitle=function(){return this.props.createMode?i.createElement("h3",null,"Create Event"):i.createElement("h3",null,"Editing E",this.state.event.id)},e.prototype.renderButtons=function(){return this.props.createMode?i.createElement("div",{className:"edit-event-button-container"},i.createElement("input",{type:"button",value:"create",onClick:this.submitForm.bind(this,"create")})):i.createElement("div",{className:"edit-event-button-container"},i.createElement("input",{type:"button",value:"delete",onClick:this.submitForm.bind(this,"delete")}),i.createElement("input",{type:"button",value:"save",onClick:this.submitForm.bind(this,"save")}))},e.prototype.renderForm=function(){return i.createElement("div",null,i.createElement("div",{className:"name-container"},i.createElement("label",{htmlFor:"name"},"Name: "),i.createElement("input",{id:"event-name",type:"text",name:"name",value:this.state.event.name,onKeyDown:this.onKeyDownCreate.bind(this),onChange:this.updateAttr.bind(this,"name")})),i.createElement("div",{className:"task-tokenizer-container"},i.createElement("label",null,"Tasks:"),i.createElement(o.TokenizerComponent,{onChange:this.retrieveTaskNames.bind(this),initialValues:this.getCurrentTasks(),possibleTokens:this.getAllTaskNames()})),i.createElement("div",{className:"tag-tokenizer-container"},i.createElement("label",null,"Tags:"),i.createElement(o.TokenizerComponent,{onChange:this.retrieveTagNames.bind(this),initialValues:this.getCurrentTags(),possibleTokens:this.getAllTagNames()})),i.createElement("div",{className:"start-now checkbox-container"},i.createElement("label",{onClick:this.toggleStartNow.bind(this)},"Start Now?"),i.createElement("input",{type:"checkbox",onChange:this.toggleStartNow.bind(this),checked:this.state.startNow})),i.createElement("div",{className:"start-now checkbox-container"},i.createElement("label",{onClick:this.toggleStartAfterLast.bind(this)},"After Last?"),i.createElement("input",{type:"checkbox",onChange:this.toggleStartAfterLast.bind(this),checked:this.state.startAfterLast})),i.createElement("div",{className:"end-now checkbox-container"},i.createElement("label",{onClick:this.toggleEndNow.bind(this)},"End Now?"),i.createElement("input",{type:"checkbox",onChange:this.toggleEndNow.bind(this),checked:this.state.endNow})),this.renderButtons())},e.prototype.render=function(){return i.createElement("div",{className:"edit-event-container"},this.renderFormTitle(),this.renderForm())},e}(i.Component);e.EditEventComponent=s},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),i=n(9),o=n(10),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.selectTask=function(t){var e=new CustomEvent(o.signalDisplayTaskInfo,{detail:t});document.dispatchEvent(e)},e.prototype.renderTag=function(t){var e=this.props.tagsById[t];return a.createElement(i.TagComponent,{tag:e,key:t})},e.prototype.renderName=function(){return a.createElement("div",{className:"name"},this.props.event.name)},e.prototype.renderTags=function(){if(this.props.event.tagIds.length)return this.props.event.tagIds.map(this.renderTag.bind(this))},e.prototype.renderTasks=function(){var t=this;if(this.props.event.taskIds.length)return this.props.event.taskIds.map(function(e){return a.createElement("div",{className:"task-id-card card",key:"T"+e,onClick:t.selectTask.bind(t,e)},"T"+e)})},e.prototype.render=function(){return a.createElement("div",{className:"event-container"},this.renderName(),a.createElement("div",{className:"event-card-container"},this.renderTags(),this.renderTasks()))},e}(a.Component);e.EventComponent=s},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),i=n(16),o=n(15),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.renderAccountInfo=function(){return a.createElement("div",{className:"profile-container"},this.props.meUser.username+" | ",a.createElement("a",{href:"/auth/logout"},"Logout"))},e.prototype.renderViewModeSelector=function(){var t=this,e={};e[o.AppViewMode.mergedView]="Home",e[o.AppViewMode.planView]="Plan",e[o.AppViewMode.taskView]="Task Board",e[o.AppViewMode.eventView]="Calendar",e[o.AppViewMode.tagView]="Tag Graph",e[o.AppViewMode.noteView]="Notes";var n={};return n[o.AppViewMode.mergedView]="/",n[o.AppViewMode.planView]="/plan",n[o.AppViewMode.taskView]="/tasks",n[o.AppViewMode.eventView]="/cal",n[o.AppViewMode.tagView]="/tags",n[o.AppViewMode.noteView]="/notes",a.createElement("div",{className:"view-mode-selector"},Object.keys(o.AppViewMode).map(function(r){if(e.hasOwnProperty(r)){var o="view-mode-option";return+r==t.props.viewMode&&(o+=" -selected"),a.createElement(i.Link,{key:r,className:o,to:n[+r]},e[+r])}}))},e.prototype.render=function(){return a.createElement("div",{className:"header-container"},a.createElement("h1",{className:"header-title"},"Starter"),this.renderAccountInfo(),this.renderViewModeSelector())},e}(a.Component);e.AppHeader=s},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),i=n(1),o=n(12),s=n(60),c=n(7),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.refreshLoopId=0,e}return r(e,t),e.prototype.componentDidMount=function(){var t=this;this.refreshLoopId=window.setInterval(function(){t.forceUpdate()},1e4)},e.prototype.componentWillUnmount=function(){this.refreshLoopId&&window.clearInterval(this.refreshLoopId)},e.prototype.computeTotalTimeScheduled=function(){var t=this,e=0;return this.props.task.eventIds.forEach(function(n){var r=t.props.eventsById[n];e+=r.durationSecs}),e},e.prototype.computeTotalTimeSpent=function(){var t=this,e=1e3*i().unix(),n=0;return this.props.task.eventIds.forEach(function(r){var a=t.props.eventsById[r];a.startTime>e||(n+=Math.min((e-a.startTime)/1e3,a.durationSecs))}),n},e.prototype.renderOptions=function(){return a.createElement("div",{className:"options"},a.createElement("a",{className:"edit-button",onClick:this.props.editCallback},"Edit"),a.createElement("a",{className:"close-button",onClick:this.props.closeCallback},"Close"))},e.prototype.renderHeader=function(){return a.createElement("div",{className:"task-detail-header"},a.createElement("div",{className:"options-container"},"T",this.props.task.id,this.renderOptions()),a.createElement("div",{className:"title"},this.props.task.title))},e.prototype.renderDescription=function(){var t=this.props.task.description.split("\n");return a.createElement(s.Linkify,{className:"task-description"},t.map(function(e,n){return a.createElement("span",{key:n},e,n<t.length-1?a.createElement("br",null):"")}))},e.prototype.renderCurrentStatus=function(){var t=this,e="";o.priorityNameList.forEach(function(n){var r=n[0],a=n[1];t.props.task.priority==a&&(e=r)});var n="";return o.stateNameList.forEach(function(e){var r=e[0],a=e[1];t.props.task.state==a&&(n=r)}),a.createElement("div",{className:"task-status"},a.createElement("div",{className:"info-container"},a.createElement("div",{className:"task-color -p"+this.props.task.priority}),a.createElement("div",null,e)),a.createElement("div",{className:"info-container"},a.createElement("div",{className:"task-color -s"+this.props.task.state}),a.createElement("div",null,n)))},e.prototype.renderEstimatedTime=function(){var t=this.props.task.expectedDurationSecs;if(0!=t)return a.createElement("div",{className:"time-estimate"},"Estimated: ",c.renderDuration(t,!1,!1))},e.prototype.renderProgress=function(t){if(t&&this.props.task.expectedDurationSecs){var e=Math.round(t/this.props.task.expectedDurationSecs*100);return a.createElement("div",{className:"progress"},"Estimated Time Spent: ",e,"%")}},e.prototype.renderTimeInfo=function(){var t=this.computeTotalTimeScheduled(),e=this.computeTotalTimeSpent();return 0==t?a.createElement("div",{className:"time-info"},this.renderEstimatedTime()):t==e?a.createElement("div",{className:"time-info"},this.renderEstimatedTime(),"Scheduled and Spent: ",c.renderDuration(t,!1,!1),this.renderProgress(e)):a.createElement("div",{className:"time-info"},this.renderEstimatedTime(),"Scheduled: ",c.renderDuration(t,!1,!1),a.createElement("br",null),"Spent: ",c.renderDuration(e,!1,!1),this.renderProgress(e))},e.prototype.render=function(){return a.createElement("div",{className:"detail-container"},this.renderHeader(),this.renderDescription(),this.renderCurrentStatus(),this.renderTimeInfo())},e}(a.Component);e.TaskDetailComponent=d},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),i=n(61),o=n(67),s=new i;s.tlds(o);var c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.parseCounter=0,e}return r(e,t),e.prototype.getMatches=function(t){return s.match(t)},e.prototype.parseString=function(t){var n=this,r=[];if(""===t)return r;var i=this.getMatches(t);if(!i)return t;var o=0;return i.forEach(function(i,s){i.index>o&&r.push(t.substring(o,i.index));var c={href:i.url,key:"parse"+n.parseCounter+"match"+s};for(var d in n.props.properties){var l=n.props.properties[d];l===e.MATCH&&(l=i.url),c[d]=l}r.push(a.createElement(n.props.component,c,i.text)),o=i.lastIndex}),o<t.length&&r.push(t.substring(o)),1===r.length?r[0]:r},e.prototype.parse=function(t){var e=this,n=t;if("string"==typeof t)n=this.parseString(t);else if(a.isValidElement(t)&&"a"!==t.type&&"button"!==t.type){var r=t;n=a.cloneElement(r,{key:"parse"+ ++this.parseCounter},this.parse(r.props.children))}else t instanceof Array&&(n=t.map(function(t){return e.parse(t)}));return n},e.prototype.render=function(){this.parseCounter=0;var t=this.parse(this.props.children);return a.createElement("span",{className:this.props.className},t)},e.MATCH="LINKIFY_MATCH",e.defaultProps={className:"Linkify",component:"a",properties:{}},e}(a.Component);e.Linkify=c},function(t,e,n){"use strict";function r(t){return Array.prototype.slice.call(arguments,1).forEach(function(e){e&&Object.keys(e).forEach(function(n){t[n]=e[n]})}),t}function a(t){return Object.prototype.toString.call(t)}function i(t){return"[object Function]"===a(t)}function o(t){return t.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var s={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};var c={"http:":{validate:function(t,e,n){var r=t.slice(e);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(t,e,n){var r=t.slice(e);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?e>=3&&":"===t[e-3]?0:e>=3&&"/"===t[e-3]?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(t,e,n){var r=t.slice(e);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},d="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",l="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|рф".split("|");function u(t){var e=t.re=n(62)(t.__opts__),r=t.__tlds__.slice();function s(t){return t.replace("%TLDS%",e.src_tlds)}t.onCompile(),t.__tlds_replaced__||r.push(d),r.push(e.src_xn),e.src_tlds=r.join("|"),e.email_fuzzy=RegExp(s(e.tpl_email_fuzzy),"i"),e.link_fuzzy=RegExp(s(e.tpl_link_fuzzy),"i"),e.link_no_ip_fuzzy=RegExp(s(e.tpl_link_no_ip_fuzzy),"i"),e.host_fuzzy_test=RegExp(s(e.tpl_host_fuzzy_test),"i");var c=[];function l(t,e){throw new Error('(LinkifyIt) Invalid schema "'+t+'": '+e)}t.__compiled__={},Object.keys(t.__schemas__).forEach(function(e){var n=t.__schemas__[e];if(null!==n){var r={validate:null,link:null};if(t.__compiled__[e]=r,function(t){return"[object Object]"===a(t)}(n))return!function(t){return"[object RegExp]"===a(t)}(n.validate)?i(n.validate)?r.validate=n.validate:l(e,n):r.validate=function(t){return function(e,n){var r=e.slice(n);return t.test(r)?r.match(t)[0].length:0}}(n.validate),void(i(n.normalize)?r.normalize=n.normalize:n.normalize?l(e,n):r.normalize=function(t,e){e.normalize(t)});!function(t){return"[object String]"===a(t)}(n)?l(e,n):c.push(e)}}),c.forEach(function(e){t.__compiled__[t.__schemas__[e]]&&(t.__compiled__[e].validate=t.__compiled__[t.__schemas__[e]].validate,t.__compiled__[e].normalize=t.__compiled__[t.__schemas__[e]].normalize)}),t.__compiled__[""]={validate:null,normalize:function(t,e){e.normalize(t)}};var u=Object.keys(t.__compiled__).filter(function(e){return e.length>0&&t.__compiled__[e]}).map(o).join("|");t.re.schema_test=RegExp("(^|(?!_)(?:[><｜]|"+e.src_ZPCc+"))("+u+")","i"),t.re.schema_search=RegExp("(^|(?!_)(?:[><｜]|"+e.src_ZPCc+"))("+u+")","ig"),t.re.pretest=RegExp("("+t.re.schema_test.source+")|("+t.re.host_fuzzy_test.source+")|@","i"),function(t){t.__index__=-1,t.__text_cache__=""}(t)}function p(t,e){var n=new function(t,e){var n=t.__index__,r=t.__last_index__,a=t.__text_cache__.slice(n,r);this.schema=t.__schema__.toLowerCase(),this.index=n+e,this.lastIndex=r+e,this.raw=a,this.text=a,this.url=a}(t,e);return t.__compiled__[n.schema].normalize(n,t),n}function h(t,e){if(!(this instanceof h))return new h(t,e);e||function(t){return Object.keys(t||{}).reduce(function(t,e){return t||s.hasOwnProperty(e)},!1)}(t)&&(e=t,t={}),this.__opts__=r({},s,e),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=r({},c,t),this.__compiled__={},this.__tlds__=l,this.__tlds_replaced__=!1,this.re={},u(this)}h.prototype.add=function(t,e){return this.__schemas__[t]=e,u(this),this},h.prototype.set=function(t){return this.__opts__=r(this.__opts__,t),this},h.prototype.test=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return!1;var e,n,r,a,i,o,s,c;if(this.re.schema_test.test(t))for((s=this.re.schema_search).lastIndex=0;null!==(e=s.exec(t));)if(a=this.testSchemaAt(t,e[2],s.lastIndex)){this.__schema__=e[2],this.__index__=e.index+e[1].length,this.__last_index__=e.index+e[0].length+a;break}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(c=t.search(this.re.host_fuzzy_test))>=0&&(this.__index__<0||c<this.__index__)&&null!==(n=t.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))&&(i=n.index+n[1].length,(this.__index__<0||i<this.__index__)&&(this.__schema__="",this.__index__=i,this.__last_index__=n.index+n[0].length)),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&t.indexOf("@")>=0&&null!==(r=t.match(this.re.email_fuzzy))&&(i=r.index+r[1].length,o=r.index+r[0].length,(this.__index__<0||i<this.__index__||i===this.__index__&&o>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=i,this.__last_index__=o)),this.__index__>=0},h.prototype.pretest=function(t){return this.re.pretest.test(t)},h.prototype.testSchemaAt=function(t,e,n){return this.__compiled__[e.toLowerCase()]?this.__compiled__[e.toLowerCase()].validate(t,n,this):0},h.prototype.match=function(t){var e=0,n=[];this.__index__>=0&&this.__text_cache__===t&&(n.push(p(this,e)),e=this.__last_index__);for(var r=e?t.slice(e):t;this.test(r);)n.push(p(this,e)),r=r.slice(this.__last_index__),e+=this.__last_index__;return n.length?n:null},h.prototype.tlds=function(t,e){return t=Array.isArray(t)?t:[t],e?(this.__tlds__=this.__tlds__.concat(t).sort().filter(function(t,e,n){return t!==n[e-1]}).reverse(),u(this),this):(this.__tlds__=t.slice(),this.__tlds_replaced__=!0,u(this),this)},h.prototype.normalize=function(t){t.schema||(t.url="http://"+t.url),"mailto:"!==t.schema||/^mailto:/i.test(t.url)||(t.url="mailto:"+t.url)},h.prototype.onCompile=function(){},t.exports=h},function(t,e,n){"use strict";t.exports=function(t){var e={};e.src_Any=n(63).source,e.src_Cc=n(64).source,e.src_Z=n(65).source,e.src_P=n(66).source,e.src_ZPCc=[e.src_Z,e.src_P,e.src_Cc].join("|"),e.src_ZCc=[e.src_Z,e.src_Cc].join("|");return e.src_pseudo_letter="(?:(?![><｜]|"+e.src_ZPCc+")"+e.src_Any+")",e.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",e.src_auth="(?:(?:(?!"+e.src_ZCc+"|[@/\\[\\]()]).)+@)?",e.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",e.src_host_terminator="(?=$|[><｜]|"+e.src_ZPCc+")(?!-|_|:\\d|\\.-|\\.(?!$|"+e.src_ZPCc+"))",e.src_path="(?:[/?#](?:(?!"+e.src_ZCc+"|[><｜]|[()[\\]{}.,\"'?!\\-]).|\\[(?:(?!"+e.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+e.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+e.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+e.src_ZCc+'|["]).)+\\"|\\\'(?:(?!'+e.src_ZCc+"|[']).)+\\'|\\'(?="+e.src_pseudo_letter+"|[-]).|\\.{2,3}[a-zA-Z0-9%/]|\\.(?!"+e.src_ZCc+"|[.]).|"+(t&&t["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+"\\,(?!"+e.src_ZCc+").|\\!(?!"+e.src_ZCc+"|[!]).|\\?(?!"+e.src_ZCc+"|[?]).)+|\\/)?",e.src_email_name='[\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]+',e.src_xn="xn--[a-z0-9\\-]{1,59}",e.src_domain_root="(?:"+e.src_xn+"|"+e.src_pseudo_letter+"{1,63})",e.src_domain="(?:"+e.src_xn+"|(?:"+e.src_pseudo_letter+")|(?:"+e.src_pseudo_letter+"(?:-(?!-)|"+e.src_pseudo_letter+"){0,61}"+e.src_pseudo_letter+"))",e.src_host="(?:(?:(?:(?:"+e.src_domain+")\\.)*"+e.src_domain+"))",e.tpl_host_fuzzy="(?:"+e.src_ip4+"|(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%)))",e.tpl_host_no_ip_fuzzy="(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%))",e.src_host_strict=e.src_host+e.src_host_terminator,e.tpl_host_fuzzy_strict=e.tpl_host_fuzzy+e.src_host_terminator,e.src_host_port_strict=e.src_host+e.src_port+e.src_host_terminator,e.tpl_host_port_fuzzy_strict=e.tpl_host_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_port_no_ip_fuzzy_strict=e.tpl_host_no_ip_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+e.src_ZPCc+"|>|$))",e.tpl_email_fuzzy="(^|[><｜]|\\(|"+e.src_ZCc+")("+e.src_email_name+"@"+e.tpl_host_fuzzy_strict+")",e.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+e.src_ZPCc+"))((?![$+<=>^`|｜])"+e.tpl_host_port_fuzzy_strict+e.src_path+")",e.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+e.src_ZPCc+"))((?![$+<=>^`|｜])"+e.tpl_host_port_no_ip_fuzzy_strict+e.src_path+")",e}},function(t,e){t.exports=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/},function(t,e){t.exports=/[\0-\x1F\x7F-\x9F]/},function(t,e){t.exports=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/},function(t,e){t.exports=/[!-#%-\*,-/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E49\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/},function(t,e){t.exports=["aaa","aarp","abarth","abb","abbott","abbvie","abc","able","abogado","abudhabi","ac","academy","accenture","accountant","accountants","aco","active","actor","ad","adac","ads","adult","ae","aeg","aero","aetna","af","afamilycompany","afl","africa","ag","agakhan","agency","ai","aig","aigo","airbus","airforce","airtel","akdn","al","alfaromeo","alibaba","alipay","allfinanz","allstate","ally","alsace","alstom","am","americanexpress","americanfamily","amex","amfam","amica","amsterdam","analytics","android","anquan","anz","ao","aol","apartments","app","apple","aq","aquarelle","ar","arab","aramco","archi","army","arpa","art","arte","as","asda","asia","associates","at","athleta","attorney","au","auction","audi","audible","audio","auspost","author","auto","autos","avianca","aw","aws","ax","axa","az","azure","ba","baby","baidu","banamex","bananarepublic","band","bank","bar","barcelona","barclaycard","barclays","barefoot","bargains","baseball","basketball","bauhaus","bayern","bb","bbc","bbt","bbva","bcg","bcn","bd","be","beats","beauty","beer","bentley","berlin","best","bestbuy","bet","bf","bg","bh","bharti","bi","bible","bid","bike","bing","bingo","bio","biz","bj","black","blackfriday","blanco","blockbuster","blog","bloomberg","blue","bm","bms","bmw","bn","bnl","bnpparibas","bo","boats","boehringer","bofa","bom","bond","boo","book","booking","bosch","bostik","boston","bot","boutique","box","br","bradesco","bridgestone","broadway","broker","brother","brussels","bs","bt","budapest","bugatti","build","builders","business","buy","buzz","bv","bw","by","bz","bzh","ca","cab","cafe","cal","call","calvinklein","cam","camera","camp","cancerresearch","canon","capetown","capital","capitalone","car","caravan","cards","care","career","careers","cars","cartier","casa","case","caseih","cash","casino","cat","catering","catholic","cba","cbn","cbre","cbs","cc","cd","ceb","center","ceo","cern","cf","cfa","cfd","cg","ch","chanel","channel","chase","chat","cheap","chintai","christmas","chrome","chrysler","church","ci","cipriani","circle","cisco","citadel","citi","citic","city","cityeats","ck","cl","claims","cleaning","click","clinic","clinique","clothing","cloud","club","clubmed","cm","cn","co","coach","codes","coffee","college","cologne","com","comcast","commbank","community","company","compare","computer","comsec","condos","construction","consulting","contact","contractors","cooking","cookingchannel","cool","coop","corsica","country","coupon","coupons","courses","cr","credit","creditcard","creditunion","cricket","crown","crs","cruise","cruises","csc","cu","cuisinella","cv","cw","cx","cy","cymru","cyou","cz","dabur","dad","dance","data","date","dating","datsun","day","dclk","dds","de","deal","dealer","deals","degree","delivery","dell","deloitte","delta","democrat","dental","dentist","desi","design","dev","dhl","diamonds","diet","digital","direct","directory","discount","discover","dish","diy","dj","dk","dm","dnp","do","docs","doctor","dodge","dog","doha","domains","dot","download","drive","dtv","dubai","duck","dunlop","duns","dupont","durban","dvag","dvr","dz","earth","eat","ec","eco","edeka","edu","education","ee","eg","email","emerck","energy","engineer","engineering","enterprises","epost","epson","equipment","er","ericsson","erni","es","esq","estate","esurance","et","etisalat","eu","eurovision","eus","events","everbank","exchange","expert","exposed","express","extraspace","fage","fail","fairwinds","faith","family","fan","fans","farm","farmers","fashion","fast","fedex","feedback","ferrari","ferrero","fi","fiat","fidelity","fido","film","final","finance","financial","fire","firestone","firmdale","fish","fishing","fit","fitness","fj","fk","flickr","flights","flir","florist","flowers","fly","fm","fo","foo","food","foodnetwork","football","ford","forex","forsale","forum","foundation","fox","fr","free","fresenius","frl","frogans","frontdoor","frontier","ftr","fujitsu","fujixerox","fun","fund","furniture","futbol","fyi","ga","gal","gallery","gallo","gallup","game","games","gap","garden","gb","gbiz","gd","gdn","ge","gea","gent","genting","george","gf","gg","ggee","gh","gi","gift","gifts","gives","giving","gl","glade","glass","gle","global","globo","gm","gmail","gmbh","gmo","gmx","gn","godaddy","gold","goldpoint","golf","goo","goodhands","goodyear","goog","google","gop","got","gov","gp","gq","gr","grainger","graphics","gratis","green","gripe","grocery","group","gs","gt","gu","guardian","gucci","guge","guide","guitars","guru","gw","gy","hair","hamburg","hangout","haus","hbo","hdfc","hdfcbank","health","healthcare","help","helsinki","here","hermes","hgtv","hiphop","hisamitsu","hitachi","hiv","hk","hkt","hm","hn","hockey","holdings","holiday","homedepot","homegoods","homes","homesense","honda","honeywell","horse","hospital","host","hosting","hot","hoteles","hotels","hotmail","house","how","hr","hsbc","ht","hu","hughes","hyatt","hyundai","ibm","icbc","ice","icu","id","ie","ieee","ifm","ikano","il","im","imamat","imdb","immo","immobilien","in","industries","infiniti","info","ing","ink","institute","insurance","insure","int","intel","international","intuit","investments","io","ipiranga","iq","ir","irish","is","iselect","ismaili","ist","istanbul","it","itau","itv","iveco","iwc","jaguar","java","jcb","jcp","je","jeep","jetzt","jewelry","jio","jlc","jll","jm","jmp","jnj","jo","jobs","joburg","jot","joy","jp","jpmorgan","jprs","juegos","juniper","kaufen","kddi","ke","kerryhotels","kerrylogistics","kerryproperties","kfh","kg","kh","ki","kia","kim","kinder","kindle","kitchen","kiwi","km","kn","koeln","komatsu","kosher","kp","kpmg","kpn","kr","krd","kred","kuokgroup","kw","ky","kyoto","kz","la","lacaixa","ladbrokes","lamborghini","lamer","lancaster","lancia","lancome","land","landrover","lanxess","lasalle","lat","latino","latrobe","law","lawyer","lb","lc","lds","lease","leclerc","lefrak","legal","lego","lexus","lgbt","li","liaison","lidl","life","lifeinsurance","lifestyle","lighting","like","lilly","limited","limo","lincoln","linde","link","lipsy","live","living","lixil","lk","llc","loan","loans","locker","locus","loft","lol","london","lotte","lotto","love","lpl","lplfinancial","lr","ls","lt","ltd","ltda","lu","lundbeck","lupin","luxe","luxury","lv","ly","ma","macys","madrid","maif","maison","makeup","man","management","mango","map","market","marketing","markets","marriott","marshalls","maserati","mattel","mba","mc","mckinsey","md","me","med","media","meet","melbourne","meme","memorial","men","menu","meo","merckmsd","metlife","mg","mh","miami","microsoft","mil","mini","mint","mit","mitsubishi","mk","ml","mlb","mls","mm","mma","mn","mo","mobi","mobile","mobily","moda","moe","moi","mom","monash","money","monster","mopar","mormon","mortgage","moscow","moto","motorcycles","mov","movie","movistar","mp","mq","mr","ms","msd","mt","mtn","mtr","mu","museum","mutual","mv","mw","mx","my","mz","na","nab","nadex","nagoya","name","nationwide","natura","navy","nba","nc","ne","nec","net","netbank","netflix","network","neustar","new","newholland","news","next","nextdirect","nexus","nf","nfl","ng","ngo","nhk","ni","nico","nike","nikon","ninja","nissan","nissay","nl","no","nokia","northwesternmutual","norton","now","nowruz","nowtv","np","nr","nra","nrw","ntt","nu","nyc","nz","obi","observer","off","office","okinawa","olayan","olayangroup","oldnavy","ollo","om","omega","one","ong","onl","online","onyourside","ooo","open","oracle","orange","org","organic","origins","osaka","otsuka","ott","ovh","pa","page","panasonic","panerai","paris","pars","partners","parts","party","passagens","pay","pccw","pe","pet","pf","pfizer","pg","ph","pharmacy","phd","philips","phone","photo","photography","photos","physio","piaget","pics","pictet","pictures","pid","pin","ping","pink","pioneer","pizza","pk","pl","place","play","playstation","plumbing","plus","pm","pn","pnc","pohl","poker","politie","porn","post","pr","pramerica","praxi","press","prime","pro","prod","productions","prof","progressive","promo","properties","property","protection","pru","prudential","ps","pt","pub","pw","pwc","py","qa","qpon","quebec","quest","qvc","racing","radio","raid","re","read","realestate","realtor","realty","recipes","red","redstone","redumbrella","rehab","reise","reisen","reit","reliance","ren","rent","rentals","repair","report","republican","rest","restaurant","review","reviews","rexroth","rich","richardli","ricoh","rightathome","ril","rio","rip","rmit","ro","rocher","rocks","rodeo","rogers","room","rs","rsvp","ru","rugby","ruhr","run","rw","rwe","ryukyu","sa","saarland","safe","safety","sakura","sale","salon","samsclub","samsung","sandvik","sandvikcoromant","sanofi","sap","sapo","sarl","sas","save","saxo","sb","sbi","sbs","sc","sca","scb","schaeffler","schmidt","scholarships","school","schule","schwarz","science","scjohnson","scor","scot","sd","se","search","seat","secure","security","seek","select","sener","services","ses","seven","sew","sex","sexy","sfr","sg","sh","shangrila","sharp","shaw","shell","shia","shiksha","shoes","shop","shopping","shouji","show","showtime","shriram","si","silk","sina","singles","site","sj","sk","ski","skin","sky","skype","sl","sling","sm","smart","smile","sn","sncf","so","soccer","social","softbank","software","sohu","solar","solutions","song","sony","soy","space","spiegel","sport","spot","spreadbetting","sr","srl","srt","st","stada","staples","star","starhub","statebank","statefarm","statoil","stc","stcgroup","stockholm","storage","store","stream","studio","study","style","su","sucks","supplies","supply","support","surf","surgery","suzuki","sv","swatch","swiftcover","swiss","sx","sy","sydney","symantec","systems","sz","tab","taipei","talk","taobao","target","tatamotors","tatar","tattoo","tax","taxi","tc","tci","td","tdk","team","tech","technology","tel","telecity","telefonica","temasek","tennis","teva","tf","tg","th","thd","theater","theatre","tiaa","tickets","tienda","tiffany","tips","tires","tirol","tj","tjmaxx","tjx","tk","tkmaxx","tl","tm","tmall","tn","to","today","tokyo","tools","top","toray","toshiba","total","tours","town","toyota","toys","tr","trade","trading","training","travel","travelchannel","travelers","travelersinsurance","trust","trv","tt","tube","tui","tunes","tushu","tv","tvs","tw","tz","ua","ubank","ubs","uconnect","ug","uk","unicom","university","uno","uol","ups","us","uy","uz","va","vacations","vana","vanguard","vc","ve","vegas","ventures","verisign","versicherung","vet","vg","vi","viajes","video","vig","viking","villas","vin","vip","virgin","visa","vision","vista","vistaprint","viva","vivo","vlaanderen","vn","vodka","volkswagen","volvo","vote","voting","voto","voyage","vu","vuelos","wales","walmart","walter","wang","wanggou","warman","watch","watches","weather","weatherchannel","webcam","weber","website","wed","wedding","weibo","weir","wf","whoswho","wien","wiki","williamhill","win","windows","wine","winners","wme","wolterskluwer","woodside","work","works","world","wow","ws","wtc","wtf","xbox","xerox","xfinity","xihuan","xin","कॉम","セール","佛山","ಭಾರತ","慈善","集团","在线","한국","ଭାରତ","大众汽车","点看","คอม","ভাৰত","ভারত","八卦","موقع","বাংলা","公益","公司","香格里拉","网站","移动","我爱你","москва","қаз","католик","онлайн","сайт","联通","срб","бг","бел","קום","时尚","微博","淡马锡","ファッション","орг","नेट","ストア","삼성","சிங்கப்பூர்","商标","商店","商城","дети","мкд","ею","ポイント","新闻","工行","家電","كوم","中文网","中信","中国","中國","娱乐","谷歌","భారత్","ලංකා","電訊盈科","购物","クラウド","ભારત","通販","भारतम्","भारत","भारोत","网店","संगठन","餐厅","网络","ком","укр","香港","诺基亚","食品","飞利浦","台湾","台灣","手表","手机","мон","الجزائر","عمان","ارامكو","ایران","العليان","اتصالات","امارات","بازار","پاکستان","الاردن","موبايلي","بارت","بھارت","المغرب","ابوظبي","السعودية","ڀارت","كاثوليك","سودان","همراه","عراق","مليسيا","澳門","닷컴","政府","شبكة","بيتك","عرب","გე","机构","组织机构","健康","ไทย","سورية","招聘","рус","рф","珠宝","تونس","大拿","みんな","グーグル","ελ","世界","書籍","ഭാരതം","ਭਾਰਤ","网址","닷넷","コム","天主教","游戏","vermögensberater","vermögensberatung","企业","信息","嘉里大酒店","嘉里","مصر","قطر","广东","இலங்கை","இந்தியா","հայ","新加坡","فلسطين","政务","xperia","xxx","xyz","yachts","yahoo","yamaxun","yandex","ye","yodobashi","yoga","yokohama","you","youtube","yt","yun","za","zappos","zara","zero","zip","zippo","zm","zone","zuerich","zw"]},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),i=n(0),o=n(7),s=n(9),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.refreshLoopId=0,e}return r(e,t),e.prototype.componentDidMount=function(){var t=this;this.refreshLoopId=window.setInterval(function(){t.forceUpdate()},1e4)},e.prototype.componentWillUnmount=function(){this.refreshLoopId&&window.clearInterval(this.refreshLoopId)},e.prototype.computeAllRelevantEvents=function(){for(var t=o.getTagAndDescendantsRecursive(this.props.tag.id,this.props.tagsById),e=[],n=0,r=Object.keys(this.props.eventsById);n<r.length;n++)for(var a=r[n],i=this.props.eventsById[a],s=0,c=i.tagIds;s<c.length;s++){if(t[c[s]]){e.push(i.id);break}}return e},e.prototype.computeStartMonday=function(){var t=a().startOf("week").add(1,"days");return t>a()&&(t=t.subtract(1,"week")),t},e.prototype.computeStartTimes=function(){var t=this.computeStartMonday();return[a().startOf("day"),t,a(t).subtract(1,"week"),a().startOf("month")].map(function(t){return 1e3*t.unix()})},e.prototype.computeDurationOfEventBetweenTimestamps=function(t,e,n){if(n<=e)return 0;var r=0,a=t.startTime+1e3*t.durationSecs;if(e<a)if(e>=t.startTime){var i=t.durationSecs-(e-t.startTime)/1e3;r=a<=n?i:i-(a-n)/1e3}else n>t.startTime&&(r=a<=n?t.durationSecs:t.durationSecs-(a-n)/1e3);return r},e.prototype.computeSpentTimes=function(t){for(var e=0,n=0,r=0,i=0,o=this.computeStartTimes(),s=o[0],c=o[1],d=o[2],l=o[3],u=1e3*a().unix(),p=0,h=t;p<h.length;p++){var m=h[p],f=this.props.eventsById[m];i+=this.computeDurationOfEventBetweenTimestamps(f,s,u),n+=this.computeDurationOfEventBetweenTimestamps(f,c,u),r+=this.computeDurationOfEventBetweenTimestamps(f,d,c),e+=this.computeDurationOfEventBetweenTimestamps(f,l,u)}return[i,n,r,e]},e.prototype.renderOptions=function(){return i.createElement("div",{className:"options"},i.createElement("a",{className:"close-button",onClick:this.props.closeCallback},"Close"))},e.prototype.renderHeader=function(){return i.createElement("div",{className:"tag-detail-header"},i.createElement("div",{className:"options-container tag-options-container"},i.createElement("div",{className:"title"},this.props.tag.name),this.renderOptions()))},e.prototype.renderParentTags=function(){var t=this,e=o.getTagParentIds(this.props.tag.id,this.props.tagsById);if(0!=e.length)return i.createElement("div",{className:"related-tag-names"},"Parents:",e.map(function(e){var n=t.props.tagsById[e];return i.createElement(s.TagComponent,{key:n.id,tag:n})}))},e.prototype.renderDescendantTags=function(){var t=this,e=o.getTagAndDescendantsRecursive(this.props.tag.id,this.props.tagsById);if(!(Object.keys(e).length<=1))return i.createElement("div",{className:"related-tag-names"},"Descendants:",Object.keys(e).map(function(e){if(parseInt(e)!=t.props.tag.id){var n=t.props.tagsById[e];return i.createElement(s.TagComponent,{key:n.id,tag:n})}}))},e.prototype.renderDurationWithName=function(t,e){if(e)return i.createElement("div",{className:"tag-time-duration"},t,": ",o.renderDuration(e,!1,!1))},e.prototype.renderTimeInfo=function(){var t=this.computeAllRelevantEvents(),e=this.computeSpentTimes(t),n=e[0],r=e[1],a=e[2],o=e[3];return i.createElement("div",{className:"time-info"},this.renderDurationWithName("Spent today",n),this.renderDurationWithName("Spent this week",r),this.renderDurationWithName("Spent last week",a),this.renderDurationWithName("Spent this month",o))},e.prototype.render=function(){return i.createElement("div",{className:"detail-container"},this.renderHeader(),this.renderParentTags(),this.renderDescendantTags(),this.renderTimeInfo())},e}(i.Component);e.TagDetailComponent=c},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),i=n(6),o=n(19),s=n(71),c=function(t){function e(e){var n=t.call(this,e)||this;return n.state=n.getState(e),n}return r(e,t),e.prototype.componentWillReceiveProps=function(t){this.setState(this.getState(t))},e.prototype.getState=function(t){return{sortedNotes:this.getSortedNotes(t),creatingNote:!1}},e.prototype.getSortedNotes=function(t){for(var e=[],n=0,r=Object.keys(t.notesById);n<r.length;n++){var a=r[n];e.push(t.notesById[a])}return e.sort(function(t,e){return e.creationTime-t.creationTime}),e},e.prototype.toggleCreateNote=function(){this.setState({creatingNote:!this.state.creatingNote})},e.prototype.renderNote=function(t){return a.createElement("div",{key:t.id,className:"note-container"},a.createElement(s.NoteComponent,{meUser:this.props.meUser,note:t,tagsById:this.props.tagsById,updateNote:this.props.updateNote,deleteNote:function(t){}}))},e.prototype.renderNotes=function(){return a.createElement("div",{className:"notes-container"},this.state.sortedNotes.map(this.renderNote.bind(this)))},e.prototype.renderCreateNote=function(){return this.state.creatingNote?a.createElement(i.ModalComponent,{cancelFunc:this.toggleCreateNote.bind(this)},a.createElement(o.EditNoteComponent,{meUser:this.props.meUser,tagsById:this.props.tagsById,createMode:!0,createNote:this.props.createNote,updateNote:function(t){},deleteNote:function(t){}})):a.createElement("div",{className:"create-note-button-container"},a.createElement("a",{onClick:this.toggleCreateNote.bind(this)},"Create New"))},e.prototype.render=function(){return a.createElement("div",{className:"note-board"},this.renderCreateNote(),this.renderNotes())},e}(a.Component);e.NoteBoardComponent=c},function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),i=n(2),o=n.n(i);function s(){return(s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}var c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t};"object"==typeof Reflect&&Reflect.construct;var d="undefined"!=typeof window&&"undefined"!=typeof document,l=!!d&&!!document.documentElement.currentStyle,u={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},p=["letter-spacing","line-height","font-family","font-weight","font-size","font-style","tab-size","text-rendering","text-transform","width","text-indent","padding-top","padding-right","padding-bottom","padding-left","border-top-width","border-right-width","border-bottom-width","border-left-width","box-sizing"],h={},m=d&&document.createElement("textarea"),f=function(t){Object.keys(u).forEach(function(e){t.style.setProperty(e,u[e],"important")})};function g(t,e,n,r,a){void 0===n&&(n=!1),void 0===r&&(r=null),void 0===a&&(a=null),null===m.parentNode&&document.body.appendChild(m);var i=function(t,e,n){void 0===n&&(n=!1);if(n&&h[e])return h[e];var r=window.getComputedStyle(t);if(null===r)return null;var a=p.reduce(function(t,e){return t[e]=r.getPropertyValue(e),t},{}),i=a["box-sizing"];if(""===i)return null;l&&"border-box"===i&&(a.width=parseFloat(a.width)+parseFloat(r["border-right-width"])+parseFloat(r["border-left-width"])+parseFloat(r["padding-right"])+parseFloat(r["padding-left"])+"px");var o=parseFloat(a["padding-bottom"])+parseFloat(a["padding-top"]),s=parseFloat(a["border-bottom-width"])+parseFloat(a["border-top-width"]),c={sizingStyle:a,paddingSize:o,borderSize:s,boxSizing:i};n&&(h[e]=c);return c}(t,e,n);if(null===i)return null;var o=i.paddingSize,s=i.borderSize,c=i.boxSizing,d=i.sizingStyle;Object.keys(d).forEach(function(t){m.style[t]=d[t]}),f(m),m.value=t.value||t.placeholder||"x";var u=-1/0,g=1/0,v=m.scrollHeight;"border-box"===c?v+=s:"content-box"===c&&(v-=o),m.value="x";var y=m.scrollHeight-o;return null===r&&null===a||(null!==r&&(u=y*r,"border-box"===c&&(u=u+o+s),v=Math.max(u,v)),null!==a&&(g=y*a,"border-box"===c&&(g=g+o+s),v=Math.min(g,v))),{height:v,minHeight:u,maxHeight:g,rowCount:Math.floor(v/y)}}d&&f(m);var v=function(t){return void 0===t&&(t=0),function(){return++t}}(),y=function(){},b=d&&window.requestAnimationFrame?[window.requestAnimationFrame,window.cancelAnimationFrame]:[setTimeout,clearTimeout],k=b[0],E=b[1],_=function(t){function e(e){var n;return(n=t.call(this,e)||this)._resizeLock=!1,n._onRootDOMNode=function(t){n._rootDOMNode=t,n.props.inputRef(t)},n._onChange=function(t){n._controlled||n._resizeComponent(),n.props.onChange(t)},n._resizeComponent=function(t){if(void 0===t&&(t=y),void 0!==n._rootDOMNode){var e=g(n._rootDOMNode,n._uid,n.props.useCacheForDOMMeasurements,n.props.minRows,n.props.maxRows);if(null!==e){var r=e.height,a=e.minHeight,i=e.maxHeight,o=e.rowCount;n.rowCount=o,n.state.height===r&&n.state.minHeight===a&&n.state.maxHeight===i?t():n.setState({height:r,minHeight:a,maxHeight:i},t)}else t()}else t()},n.state={height:e.style&&e.style.height||0,minHeight:-1/0,maxHeight:1/0},n._uid=v(),n._controlled="string"==typeof e.value,n}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.render=function(){var t=this.props,e=(t.inputRef,t.maxRows,t.minRows,t.onHeightChange,t.useCacheForDOMMeasurements,function(t,e){if(null==t)return{};var n,r,a={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(a[n]=t[n]);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}(t,["inputRef","maxRows","minRows","onHeightChange","useCacheForDOMMeasurements"]));return e.style=s({},e.style,{height:this.state.height}),Math.max(e.style.maxHeight||1/0,this.state.maxHeight)<this.state.height&&(e.style.overflow="hidden"),a.a.createElement("textarea",s({},e,{onChange:this._onChange,ref:this._onRootDOMNode}))},n.componentDidMount=function(){var t=this;this._resizeComponent(),this._resizeListener=function(){t._resizeLock||(t._resizeLock=!0,t._resizeComponent(function(){return t._resizeLock=!1}))},window.addEventListener("resize",this._resizeListener)},n.componentDidUpdate=function(t,e){var n=this;t!==this.props&&(this._clearNextFrame(),this._onNextFrameActionId=k(function(){return n._resizeComponent()})),this.state.height!==e.height&&this.props.onHeightChange(this.state.height,this)},n.componentWillUnmount=function(){this._clearNextFrame(),window.removeEventListener("resize",this._resizeListener),function(t){delete h[t]}(this._uid)},n._clearNextFrame=function(){E(this._onNextFrameActionId)},e}(a.a.Component);_.propTypes={inputRef:o.a.func,maxRows:o.a.number,minRows:o.a.number,onChange:o.a.func,onHeightChange:o.a.func,useCacheForDOMMeasurements:o.a.bool,value:o.a.string},_.defaultProps={inputRef:y,onChange:y,onHeightChange:y,useCacheForDOMMeasurements:!1},e.default=_},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),i=n(72),o=n(9),s=n(19),c=n(6),d=function(t){function e(e){var n=t.call(this,e)||this;return n.state={editing:!1},n}return r(e,t),e.prototype.componentWillReceiveProps=function(t){this.state={editing:!1}},e.prototype.toggleEditing=function(){this.setState({editing:!this.state.editing})},e.prototype.renderNoteId=function(){return a.createElement("div",{className:"note-id"},"N",this.props.note.id)},e.prototype.renderTag=function(t){var e=this.props.tagsById[t];return a.createElement(o.TagComponent,{tag:e,key:t})},e.prototype.renderTags=function(){if(this.props.note.tagIds.length)return a.createElement("div",{className:"note-tags-container"},"Tags:",this.props.note.tagIds.map(this.renderTag.bind(this)))},e.prototype.renderOptions=function(){return a.createElement("div",{className:"note-options"},a.createElement("div",{className:"Edit",onClick:this.toggleEditing.bind(this)},"Edit"))},e.prototype.renderNoteHeader=function(){return a.createElement("div",{className:"note-header"},a.createElement("div",{className:"note-title"},this.props.note.title),a.createElement("div",{className:"note-right-header"},this.renderOptions(),this.renderNoteId()))},e.prototype.renderEditingNote=function(){if(this.state.editing)return a.createElement(c.ModalComponent,{cancelFunc:this.toggleEditing.bind(this)},a.createElement(s.EditNoteComponent,{meUser:this.props.meUser,note:this.props.note,tagsById:this.props.tagsById,createMode:!1,createNote:function(t){},updateNote:this.props.updateNote,deleteNote:this.props.deleteNote}))},e.prototype.renderNote=function(){if(!this.state.editing)return a.createElement("div",{className:"note-content"},a.createElement(i,{source:this.props.note.content,escapeHtml:!0,sourcePos:!0}),this.renderTags())},e.prototype.render=function(){return a.createElement("div",{className:"note card"},this.renderNoteHeader(),this.renderNote(),this.renderEditingNote())},e}(a.Component);e.NoteComponent=d},function(t,e){t.exports=reactMarkdown},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),i=n(0),o=function(t){function e(e){var n=t.call(this,e)||this;return n.state={capture:n._getEmptyCapture(e)},n}return r(e,t),e.prototype.componentWillReceiveProps=function(t){null!=t.lastSaved&&t.lastSaved.content==this.state.capture.content&&this.setState({capture:this._getEmptyCapture(t)})},e.prototype._getEmptyCapture=function(t){return{id:0,content:"",authorId:t.meUser.id,creationTime:1e3*a().unix()}},e.prototype.submitForm=function(t){if("create"!=t)throw Error("Unknown submit type!");this.props.createCapture(this.state.capture)},e.prototype.updateAttr=function(t,e){this.state.capture[t]=e.target.value,this.setState(this.state)},e.prototype.renderButtons=function(){return i.createElement("div",{className:"create-capture-button-container"},i.createElement("input",{type:"button",value:"Create",onClick:this.submitForm.bind(this,"create")}))},e.prototype.renderForm=function(){return i.createElement("div",null,i.createElement("div",{className:"content-container"},i.createElement("textarea",{name:"content",value:this.state.capture.content,onChange:this.updateAttr.bind(this,"content")})),this.renderButtons())},e.prototype.render=function(){return i.createElement("div",{className:"create-capture-container"},i.createElement("h1",null,"Capture Something..."),this.renderForm())},e}(i.Component);e.CreateCaptureComponent=o},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),i=n(20),o=n(21),s=function(t){function e(e){var n=t.call(this,e)||this;return n.state={captures:e.captures,capturesById:o.API.getCapturesById(e.captures)},n}return r(e,t),e.prototype.updateStateWithCaptures=function(t){this.setState({captures:t,capturesById:o.API.getCapturesById(t)})},e.prototype.componentWillReceiveProps=function(t){this.updateStateWithCaptures(t.captures)},e.prototype.createCapture=function(t){var e=this;o.API.createCapture(t,function(t){var n=e.state.captures.concat(t);e.updateStateWithCaptures(n)})},e.prototype.deleteCapture=function(t){var e=this;o.API.deleteCapture(t,function(t){var n=e.state.captures.filter(function(e){return e.id!=t.id});e.updateStateWithCaptures(n)})},e.prototype.render=function(){return a.createElement("div",{className:"capturer-container"},a.createElement(i.CaptureListComponent,{meUser:this.props.meUser,capturesById:this.state.capturesById,createCapture:this.createCapture.bind(this),deleteCapture:this.deleteCapture.bind(this)}))},e}(a.Component);e.Capturer=s}]);