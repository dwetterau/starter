!function(t){function e(a){if(n[a])return n[a].exports;var i=n[a]={i:a,l:!1,exports:{}};return t[a].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,a){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:a})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/static/dist/",e(e.s=41)}([function(t,e){t.exports=React},function(t,e){t.exports=moment},function(t,e,n){"use strict";var a=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(0),r=function(t){function e(e){var n=t.call(this,e)||this;return n.state=n.getState(e),n}return a(e,t),e.prototype.componentWillReceiveProps=function(t){this.setState(this.getState(t))},e.prototype.getState=function(t){var e=this,n={tokens:[],pendingToken:"",autoCompleteTokens:[],selectedTokenIndex:-1};return t.initialValues&&t.initialValues.forEach(function(t){e.props.tokenLimit&&n.tokens.length>=e.props.tokenLimit||n.tokens.push(t)}),this.state&&(n.pendingToken=this.state.pendingToken,n.autoCompleteTokens=this.state.autoCompleteTokens,n.selectedTokenIndex=this.state.selectedTokenIndex),n},e.prototype.updateAutoComplete=function(t){var e=this;if(t=t.toLowerCase(),!this.props.possibleTokens||0==t.length)return[];var n=[];return this.props.possibleTokens.forEach(function(a){var i=a.label.toLowerCase().indexOf(t);i>=0&&(e.tokenAlreadyAdded(a)||n.push([i,a]))}),n.sort(function(t,e){var n=t[0],a=t[1],i=e[0],r=e[1];return n!=i?n-i:a.label<r.label?-1:a.label==r.label?0:1}),n=n.slice(0,5),n.map(function(t){return t[1]})},e.prototype.updatePendingToken=function(t){this.state.pendingToken=t.target.value.trim(),this.state.autoCompleteTokens=this.updateAutoComplete(t.target.value),null==this.state.selectedTokenIndex?this.state.selectedTokenIndex=-1:this.state.selectedTokenIndex>=this.state.autoCompleteTokens.length&&(this.state.selectedTokenIndex=this.state.autoCompleteTokens.length-1),this.setState(this.state)},e.prototype.tokenAlreadyAdded=function(t){var e=!1;return this.state.tokens.forEach(function(n){t.value==n.value&&(e=!0)}),e},e.prototype.appendToken=function(t){this.state.tokens.push({label:t.label,subtext:t.subtext,value:t.value}),this.state.pendingToken="",this.state.autoCompleteTokens=[],this.state.selectedTokenIndex=-1,this.setState(this.state),this.props.onChange(this.state.tokens)},e.prototype.onClick=function(t,e){e.preventDefault(),this.appendToken(t)},e.prototype.onKeyPress=function(t){if("Enter"==t.key){if(this.props.tokenLimit&&this.state.tokens.length>=this.props.tokenLimit)return;if(this.state.selectedTokenIndex>=0)return void this.appendToken(this.state.autoCompleteTokens[this.state.selectedTokenIndex]);var e=this.state.pendingToken,n=!1,a={label:e,value:e};this.props.possibleTokens?this.props.possibleTokens.forEach(function(t){t.label.toLowerCase()==e.toLowerCase()&&(n=!0,a=t)}):n=!0,n&&!this.tokenAlreadyAdded(a)&&this.appendToken(a)}},e.prototype.onKeyDown=function(t){if("ArrowDown"==t.key){if(!this.state.autoCompleteTokens.length)return;this.state.selectedTokenIndex=Math.min(this.state.selectedTokenIndex+1,this.state.autoCompleteTokens.length-1),this.setState(this.state)}else if("ArrowUp"==t.key){if(!this.state.autoCompleteTokens.length)return;this.state.selectedTokenIndex=Math.max(this.state.selectedTokenIndex-1,0),this.setState(this.state)}},e.prototype.removeToken=function(t){this.state.tokens=this.state.tokens.filter(function(e){return t.label!=e.label}),this.setState(this.state),this.props.onChange(this.state.tokens)},e.prototype.getTokenValues=function(){return this.state.tokens},e.prototype.renderToken=function(t,e){return i.createElement("div",{className:"card rendered-token",key:e},t.label,i.createElement("div",{className:"remove-token",onClick:this.removeToken.bind(this,t)},"x"))},e.prototype.renderTokens=function(){if(this.state.tokens.length)return i.createElement("div",{className:"tokens-container"},this.state.tokens.map(this.renderToken.bind(this)))},e.prototype.shouldHidePendingToken=function(){return this.props.tokenLimit&&this.state.tokens.length>=this.props.tokenLimit},e.prototype.renderPendingToken=function(){if(!this.shouldHidePendingToken())return i.createElement("div",{className:"pending-token-container"},i.createElement("input",{type:"text",value:this.state.pendingToken,onChange:this.updatePendingToken.bind(this),onKeyPress:this.onKeyPress.bind(this),onKeyDown:this.onKeyDown.bind(this)}))},e.prototype.renderTokenSubtext=function(t){if(t.subtext)return i.createElement("div",{className:"token-subtext"},t.subtext)},e.prototype.renderAutoComplete=function(){var t=this;if(!this.shouldHidePendingToken()&&this.state.autoCompleteTokens.length)return i.createElement("div",{className:"autocomplete-token-container"},this.state.autoCompleteTokens.map(function(e,n){var a="autocomplete-token";return n==t.state.selectedTokenIndex&&(a+=" -selected"),i.createElement("div",{className:a,key:e.value,onClick:t.onClick.bind(t,e)},e.label,t.renderTokenSubtext(e))}))},e.prototype.render=function(){return i.createElement("div",{className:"tokenizer-container"},this.renderTokens(),i.createElement("div",{className:"pending-state-container"},this.renderPendingToken(),this.renderAutoComplete()))},e}(i.Component);e.TokenizerComponent=r},function(t,e){t.exports=jQuery},function(t,e,n){"use strict";function a(t,e){var n=null;return function(){var a=this,i=arguments,r=function(){n=null},s=!n;n||(n=setTimeout(r,e)),s&&t.apply(a,i)}}function i(t,e){var n="",a=function(e,a){if(!(t<a)){n.length&&(n+=", ");var i=Math.floor(t/a);n+=i+" "+e,1!=i&&(n+="s"),t-=i*a}};return a(e?"hr":"hour",3600),a(e?"min":"minute",60),e||a("second",1),n.length?n:"None"}function r(t,e){for(var n={},a=[t];a.length;){var i=a.pop();n[i]=!0;for(var r=0,s=e[i].childTagIds;r<s.length;r++){var o=s[r];n[o]||a.push(o)}}return n}function s(t,e){for(var n=[],a=0,i=Object.keys(e);a<i.length;a++)for(var r=i[a],s=e[r],o=0,c=s.childTagIds;o<c.length;o++){var d=c[o];if(d==t){n.push(s.id);break}}return n}e.debounce=a,e.renderDuration=i,e.getTagAndDescendantsRecursive=r,e.getTagParentIds=s},function(t,e,n){"use strict";e.signalCreateEventWithTask="signalCreateEventWithTask",e.signalEndEventWithTask="signalEndEventWithTask",e.signalDisplayTaskInfo="signalDisplayTaskInfo",e.signalBeginEditingTask="signalBeginEditingTask",e.signalDisplayTagInfo="signalDisplayTagInfo"},function(t,e,n){"use strict";var a=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(3),r=n(0),s=function(t){function e(){return t.apply(this,arguments)||this}return a(e,t),e.prototype.componentDidMount=function(){var t=this,e=document.getElementsByClassName("modal");if(e.length>0){var n=e[0].getElementsByTagName("input");n.length>0&&n[0].focus()}i(document).bind("keyup.modalComponent",function(e){27==e.which&&t.props.cancelFunc()})},e.prototype.componentWillUnmount=function(){i(document).unbind("keyup.modalComponent")},e.prototype.renderCancelButton=function(){return r.createElement("div",{className:"cancel-button-container",onClick:this.props.cancelFunc},"x")},e.prototype.render=function(){return r.createElement("div",{className:"modal-container"},r.createElement("div",{className:"background"},r.createElement("div",{className:"modal card"},this.renderCancelButton(),this.props.children)))},e}(r.Component);e.ModalComponent=s},function(t,e,n){"use strict";var a=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(0),r=n(5),s=function(t){function e(){return t.apply(this,arguments)||this}return a(e,t),e.prototype.selectTag=function(t){t.stopPropagation();var e=new CustomEvent(r.signalDisplayTagInfo,{detail:this.props.tag.id});document.dispatchEvent(e)},e.prototype.render=function(){return i.createElement("div",{className:"tag card",onClick:this.selectTag.bind(this)},this.props.tag.name)},e}(i.Component);e.TagComponent=s},function(t,e){t.exports=ReactRouter},function(t,e,n){"use strict";var a,i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=n(3),s=n(0),o=n(8),c=n(36),d=n(10),l=n(25),p=n(24),u=n(32),h=n(5),m=n(39),g=n(35),v=n(31);!function(t){t[t.mergedView=0]="mergedView",t[t.taskView=1]="taskView",t[t.eventView=2]="eventView",t[t.tagView=3]="tagView",t[t.noteView=4]="noteView"}(a=e.AppViewMode||(e.AppViewMode={}));var f=function(t){function e(n){var a=t.call(this,n)||this;a._handleDisplayTaskInfo=null,a._handleDisplayTagInfo=null;var i={tasks:n.tasks,events:n.events,tags:n.tags,notes:n.notes,tagsById:{},eventsById:{},tasksById:{},detailInfo:{},notesById:{}};return e.updateTagsById(i),e.updateEventsById(i),e.updateTasksById(i),e.updateNotesById(i),a.state=i,a}return i(e,t),e.prototype.componentDidMount=function(){this._handleDisplayTaskInfo=this.handleDisplayTaskInfo.bind(this),document.addEventListener(h.signalDisplayTaskInfo,this._handleDisplayTaskInfo),this._handleDisplayTagInfo=this.handleDisplayTagInfo.bind(this),document.addEventListener(h.signalDisplayTagInfo,this._handleDisplayTagInfo)},e.prototype.componentWillUnmount=function(){document.removeEventListener(h.signalDisplayTaskInfo,this._handleDisplayTaskInfo),this._handleDisplayTaskInfo=null,document.removeEventListener(h.signalDisplayTagInfo,this._handleDisplayTagInfo),this._handleDisplayTagInfo=null},e.prototype.handleDisplayTaskInfo=function(t){var e=t.detail;this.state.detailInfo={taskId:e,tagId:null},this.setState(this.state)},e.prototype.handleDisplayTagInfo=function(t){var e=t.detail;this.state.detailInfo={taskId:null,tagId:e},this.setState(this.state)},e.updateTasksById=function(t){for(var e={},n=0,a=t.tasks;n<a.length;n++){var i=a[n];e[i.id]=i}t.tasksById=e},e.prototype.createTask=function(t){var n=this;delete t.id,r.post("/api/1/task/create",t,function(t){n.state.tasks.push(JSON.parse(t)),e.updateTasksById(n.state),n.setState(n.state)})},e.prototype.updateTask=function(t){var n=this,a=t.eventIds;delete t.eventIds,r.post("/api/1/task/update",t,function(t){var a=JSON.parse(t);n.state.tasks=n.state.tasks.map(function(t){return t.id==a.id?a:t}),e.updateTasksById(n.state),n.setState(n.state)}),t.eventIds=a},e.prototype.deleteTask=function(t){var n=this;r.post("/api/1/task/delete",{id:t.id},function(t){var a=JSON.parse(t).id;n.state.tasks=n.state.tasks.filter(function(t){return t.id!=a}),e.updateTasksById(n.state),n.setState(n.state)})},e.updateEventsById=function(t){for(var e={},n=0,a=t.events;n<a.length;n++){var i=a[n];e[i.id]=i}t.eventsById=e},e.prototype.updateTaskToEventsAfterEventChange=function(t,e){for(var n={},a=0,i=this.state.tasks;a<i.length;a++)for(var r=i[a],s=0,o=r.eventIds;s<o.length;s++){var c=o[s];c==t.id&&(n[r.id]=!0)}for(var d={},l=0,p=t.taskIds;l<p.length;l++){var u=p[l];e||(d[u]=!0,n[u]||this.state.tasksById[u].eventIds.push(t.id))}for(var u in n)d[u]||(this.state.tasksById[u].eventIds=this.state.tasksById[u].eventIds.filter(function(e){return e!=t.id}))},e.prototype.createEvent=function(t){var n=this;delete t.id,r.post("/api/1/event/create",t,function(t){var a=JSON.parse(t);n.state.events.push(a),e.updateEventsById(n.state),n.updateTaskToEventsAfterEventChange(a,!1),n.setState(n.state)})},e.prototype.updateEvent=function(t){var n=this;r.post("/api/1/event/update",t,function(t){var a=JSON.parse(t);n.state.events=n.state.events.map(function(t){return t.id==a.id?a:t}),e.updateEventsById(n.state),n.updateTaskToEventsAfterEventChange(a,!1),n.setState(n.state)})},e.prototype.deleteEvent=function(t){var n=this;r.post("/api/1/event/delete",{id:t.id},function(a){var i=JSON.parse(a).id;n.state.events=n.state.events.filter(function(t){return t.id!=i}),e.updateEventsById(n.state),n.updateTaskToEventsAfterEventChange(t,!0),n.setState(n.state)})},e.updateTagsById=function(t){for(var e={},n=0,a=t.tags;n<a.length;n++){var i=a[n];e[i.id]=i}t.tagsById=e},e.prototype.createTag=function(t){var n=this;delete t.id,r.post("/api/1/tag/create",t,function(t){n.state.tags.push(JSON.parse(t)),e.updateTagsById(n.state),n.setState(n.state)})},e.prototype.updateTag=function(t){var n=this;r.post("/api/1/tag/update",t,function(t){var a=JSON.parse(t);n.state.tags=n.state.tags.map(function(t){return t.id==a.id?a:t}),e.updateTagsById(n.state),n.setState(n.state)})},e.prototype.deleteTag=function(t){},e.updateNotesById=function(t){for(var e={},n=0,a=t.notes;n<a.length;n++){var i=a[n];e[i.id]=i}t.notesById=e},e.prototype.createNote=function(t){var n=this;delete t.id,r.post("/api/1/note/create",t,function(t){n.state.notes.push(JSON.parse(t)),e.updateNotesById(n.state),n.setState(n.state)})},e.prototype.updateNote=function(t){var n=this;r.post("/api/1/note/update",t,function(t){var a=JSON.parse(t);n.state.notes=n.state.notes.map(function(t){return t.id==a.id?a:t}),e.updateNotesById(n.state),n.setState(n.state)})},e.prototype.deleteNote=function(t){var n=this;r.post("/api/1/note/delete",{id:t.id},function(t){var a=JSON.parse(t).id;n.state.notes=n.state.notes.filter(function(t){return t.id!=a}),e.updateNotesById(n.state),n.setState(n.state)})},e.prototype.beginEditingSelectedTask=function(){if(this.state.detailInfo.taskId){var t=new CustomEvent(h.signalBeginEditingTask,{detail:this.state.detailInfo.taskId});document.dispatchEvent(t)}},e.prototype.closeDetail=function(){this.state.detailInfo={},this.setState(this.state)},e.prototype.renderNotifier=function(){return s.createElement(u.NotifierComponent,{tasks:this.state.tasks,events:this.state.events})},e.prototype.renderDetail=function(){if(this.state.detailInfo.taskId){var t=this.state.tasksById[this.state.detailInfo.taskId];return t?s.createElement(m.TaskDetailComponent,{task:t,eventsById:this.state.eventsById,closeCallback:this.closeDetail.bind(this),editCallback:this.beginEditingSelectedTask.bind(this)}):void console.error("Task not found to show detail for...")}if(this.state.detailInfo.tagId){var e=this.state.tagsById[this.state.detailInfo.tagId];return e?s.createElement(g.TagDetailComponent,{tag:e,eventsById:this.state.eventsById,tagsById:this.state.tagsById,closeCallback:this.closeDetail.bind(this)}):void console.error("Tag not found to show detail for...")}},e.prototype.renderMergedView=function(t){return s.createElement("div",{className:"merged-container"},s.createElement("div",{className:"main-pane"},s.createElement("div",{className:"merged-task-container"},this.renderTaskBoard(t)),this.renderDetail()),s.createElement("div",{className:"right-pane"},s.createElement("div",{className:"merged-calendar-container"},this.renderCalendar(l.CalendarViewType.day,!0))))},e.prototype.renderTaskBoard=function(t){return s.createElement(d.TaskBoardComponent,{meUser:this.props.meUser,tasksById:this.state.tasksById,initialTagName:t,tagsById:this.state.tagsById,eventsById:this.state.eventsById,createTask:this.createTask.bind(this),updateTask:this.updateTask.bind(this),deleteTask:this.deleteTask.bind(this)})},e.prototype.renderCalendar=function(t,e){return s.createElement(l.CalendarComponent,{meUser:this.props.meUser,eventsById:this.state.eventsById,tagsById:this.state.tagsById,tasksById:this.state.tasksById,initialViewType:t,simpleOptions:e,createEvent:this.createEvent.bind(this),updateEvent:this.updateEvent.bind(this),deleteEvent:this.deleteEvent.bind(this)})},e.prototype.renderTagGraph=function(){return s.createElement(c.TagGraphComponent,{meUser:this.props.meUser,tagsById:this.state.tagsById,createTag:this.createTag.bind(this),updateTag:this.updateTag.bind(this),deleteTag:this.deleteTag.bind(this)})},e.prototype.renderNotes=function(){return s.createElement(v.NoteBoardComponent,{meUser:this.props.meUser,notesById:this.state.notesById,tagsById:this.state.tagsById,createNote:this.createNote.bind(this),updateNote:this.updateNote.bind(this),deleteNote:this.deleteNote.bind(this)})},e.prototype.renderPageContainer=function(t,e){return s.createElement("div",null,this.renderNotifier(),s.createElement(p.AppHeader,{meUser:this.props.meUser,viewMode:t}),s.createElement("div",{className:"board-container"},e()))},e.prototype.render=function(){var t=this,e=function(){return t.renderPageContainer(a.mergedView,t.renderMergedView.bind(t))},n=function(e){return t.renderPageContainer(a.mergedView,t.renderMergedView.bind(t,e.params.tagName))},i=function(){return t.renderPageContainer(a.taskView,t.renderTaskBoard.bind(t))},r=function(e){return t.renderPageContainer(a.eventView,t.renderCalendar.bind(t,e,!1))},c=function(){return t.renderPageContainer(a.tagView,t.renderTagGraph.bind(t))},d=function(){return t.renderPageContainer(a.noteView,t.renderNotes.bind(t))};return s.createElement("div",null,s.createElement(o.Router,{history:o.browserHistory},s.createElement(o.Route,{path:"/",component:e}),s.createElement(o.Route,{path:"/tasks",component:i}),s.createElement(o.Route,{path:"/cal",component:r.bind(this,l.CalendarViewType.week)}),s.createElement(o.Route,{path:"/cal/week",component:r.bind(this,l.CalendarViewType.week)}),s.createElement(o.Route,{path:"/cal/day",component:r.bind(this,l.CalendarViewType.day)}),s.createElement(o.Route,{path:"/tag/:tagName",component:n}),s.createElement(o.Route,{path:"/tags",component:c}),s.createElement(o.Route,{path:"/notes",component:d})))},e}(s.Component);e.App=f},function(t,e,n){"use strict";var a,i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=n(0),s=n(3),o=n(37),c=n(11),d=n(38),l=n(2),p=n(6),u=n(5),h=n(4);!function(t){t[t.status=0]="status",t[t.priority=1]="priority"}(a=e.TaskBoardViewType||(e.TaskBoardViewType={}));var m=function(t){function e(e){var n=t.call(this,e)||this;return n._handleBeginEditingTask=null,n._dragTargetElement=null,n.state=n.getState(e,a.status),n}return i(e,t),e.prototype.componentWillReceiveProps=function(t){this.setState(this.getState(t,this.state.viewType))},e.prototype.componentDidMount=function(){this._handleBeginEditingTask=this.handleBeginEditingTask.bind(this),document.addEventListener(u.signalBeginEditingTask,this._handleBeginEditingTask)},e.prototype.componentWillUnmount=function(){document.removeEventListener(u.signalBeginEditingTask,this._handleBeginEditingTask),this._handleBeginEditingTask=null},e.prototype.handleBeginEditingTask=function(t){if(!this.state.editingTask){var e=t.detail;this.state.editingTask=this.props.tasksById[e],this.setState(this.state)}},e.prototype.getState=function(t,e){var n=null;if(this.state&&this.state.selectedTag)n=this.state.selectedTag;else if(t.initialTagName)for(var a=t.initialTagName.toLowerCase(),i=0,r=Object.keys(t.tagsById);i<r.length;i++){var s=r[i];t.tagsById[s].name.toLowerCase()==a&&(n=t.tagsById[s])}var o=this.divideByType(t.tasksById,e,n),c=o[0],d=o[1],l=o[2],p={viewType:e,columns:l,headers:c,columnTypes:d,createColumnType:null,draggingTask:null,editingTask:null,selectedTag:n,shouldHideClosedTasks:!this.state||this.state.shouldHideClosedTasks};return this.state&&this.state.selectedTag&&t.tagsById[this.state.selectedTag.id]&&(p.selectedTag=this.state.selectedTag),p},e.prototype.divideByType=function(t,e,n){var i=this,r={},s=[],o=[],d=[],l={};if(l[a.status]={attr:"state",orderedNameAndValue:c.stateNameList,sortFunc:function(t,e){var n=0==t.priority?1e3:t.priority,a=0==e.priority?1e3:e.priority;return a-n}},l[a.priority]={attr:"priority",orderedNameAndValue:c.priorityNameList,sortFunc:function(t,e){return t.state-e.state}},!l[e])throw Error("Split type not implemented: "+e);var p=l[e],u=p.attr,m=p.orderedNameAndValue,g=p.sortFunc,v={};n&&(v=h.getTagAndDescendantsRecursive(n.id,this.props.tagsById));for(var f=function(t){if(n){var r=!1;if(t.tagIds.forEach(function(t){r=r||v[t]}),!r)return!0}return!!i.state&&!(1e3!=t.state||e!=a.priority||!i.state.shouldHideClosedTasks)},y=0,k=Object.keys(t);y<k.length;y++){var E=k[y],T=t[E];f(T)||(r[T[u]]?r[T[u]].push(T):r[T[u]]=[T])}return m.forEach(function(t){var e=t[0],n=t[1],a=r[n]||[];a.sort(g),s.push(r[n]||[]),o.push(e),d.push(n)}),[o,d,s]},e.prototype.onDragStart=function(t,e){if(this.state.draggingTask)throw Error("Already was dragging a task...");this.state.draggingTask=t,this.setState(this.state),this._dragTargetElement=s(e.target)},e.prototype.onDragEnd=function(t){this.state.draggingTask==t&&(this.state.draggingTask=null,this.setState(this.state),this._dragTargetElement.show())},e.prototype.onDrop=function(t,e){if(this.state.draggingTask){if(e.preventDefault(),this.state.viewType==a.status){var n=this.state.draggingTask.state;if(this.state.draggingTask.state=t,500!=n&&500==t){var i=new CustomEvent(u.signalCreateEventWithTask,{detail:this.state.draggingTask});document.dispatchEvent(i)}if(500==n&&500!=t){var r=new CustomEvent(u.signalEndEventWithTask,{detail:this.state.draggingTask});document.dispatchEvent(r)}}else{if(this.state.viewType!=a.priority)throw Error("Haven't implement drag and drop for this view type yet");this.state.draggingTask.priority=t}this.props.updateTask(this.state.draggingTask),s(e.target).removeClass("drop-container"),this.state.draggingTask=null,this.setState(this.state),this._dragTargetElement.show()}},e.prototype.onDragOver=function(t){this.state.draggingTask&&(t.preventDefault(),this._dragTargetElement.hide(),s(t.target).addClass("drop-container"))},e.prototype.onDragLeave=function(t){this.state.draggingTask&&s(t.target).removeClass("drop-container")},e.prototype.onClick=function(t,e){e.stopPropagation();var n=new CustomEvent(u.signalDisplayTaskInfo,{detail:t});return document.dispatchEvent(n),!1},e.prototype.onDoubleClick=function(t){this.state.editingTask=t,this.setState(this.state)},e.prototype.changeViewType=function(t){var e=this.divideByType(this.props.tasksById,t,this.state.selectedTag),n=e[0],a=e[1],i=e[2];this.state.viewType=t,this.state.headers=n,this.state.columnTypes=a,this.state.columns=i,this.setState(this.state)},e.prototype.changeHideClosedTasks=function(){this.state.shouldHideClosedTasks=!this.state.shouldHideClosedTasks,this.changeViewType(this.state.viewType)},e.prototype.getCurrentTagToken=function(){return this.state.selectedTag?[{label:this.state.selectedTag.name,value:this.state.selectedTag.id}]:[]},e.prototype.changeCurrentTagToken=function(t){t.length?this.state.selectedTag=this.props.tagsById[t[0].value]:(this.state.selectedTag=null,0==window.location.pathname.indexOf("/tag/")&&(window.location.pathname="/")),this.changeViewType(this.state.viewType)},e.prototype.getAllTagNames=function(){var t=this,e=[];return Object.keys(this.props.tagsById).forEach(function(n){var a=t.props.tagsById[+n];e.push({label:a.name,value:a.id})}),e},e.prototype.clearCreateColumnType=function(){this.state.createColumnType=null,this.setState(this.state)},e.prototype.createTask=function(t){null==this.state.createColumnType&&(this.state.createColumnType=t,this.setState(this.state))},e.prototype.clearEditingTask=function(){this.state.editingTask=null,this.setState(this.state)},e.prototype.renderTypeChoice=function(t){var e="view-type-choice";t==this.state.viewType&&(e+=" -selected");var n={};return n[a.priority]="Priority",n[a.status]="Status",r.createElement("div",{className:e,key:t,onClick:this.changeViewType.bind(this,t)},n[t])},e.prototype.renderTypeSelector=function(){return r.createElement("div",{className:"view-type-selector"},this.renderTypeChoice(a.priority),this.renderTypeChoice(a.status))},e.prototype.renderHideClosedTasks=function(){if(this.state.viewType!=a.status)return r.createElement("div",{className:"hide-closed-tasks"},r.createElement("label",{htmlFor:"hide-closed"},"Hide closed?"),r.createElement("input",{id:"hide-closed",type:"checkbox",onChange:this.changeHideClosedTasks.bind(this),checked:this.state.shouldHideClosedTasks}))},e.prototype.renderOptions=function(){return r.createElement("div",{className:"task-board-options"},this.renderTypeSelector(),this.renderTagSelector(),this.renderHideClosedTasks())},e.prototype.renderTagSelector=function(){return r.createElement("div",{className:"task-board-tag-selector-container"},r.createElement("div",{className:"tag-selector-label"},"Filter Tag:"),r.createElement(l.TokenizerComponent,{onChange:this.changeCurrentTagToken.bind(this),initialValues:this.getCurrentTagToken(),possibleTokens:this.getAllTagNames(),tokenLimit:1}))},e.prototype.renderColumn=function(t,e,n){var a=this;return r.createElement("div",{className:"column-container",key:e,onDrop:this.onDrop.bind(this,n),onDragOver:this.onDragOver.bind(this),onDragLeave:this.onDragLeave.bind(this),onClick:this.createTask.bind(this,n)},r.createElement("div",{className:"column-header"},e),t.map(function(t){return r.createElement("div",{key:t.id,className:"draggable-task",draggable:!0,onDragStart:a.onDragStart.bind(a,t),onDragEnd:a.onDragEnd.bind(a,t),onClick:a.onClick.bind(a,t.id),onDoubleClick:a.onDoubleClick.bind(a,t)},r.createElement(d.TaskComponent,{task:t,viewType:a.state.viewType,tagsById:a.props.tagsById,eventsById:a.props.eventsById}))}))},e.prototype.renderColumns=function(){for(var t=[],e=0;e<this.state.columns.length;e++)t.push(this.renderColumn(this.state.columns[e],this.state.headers[e],this.state.columnTypes[e]));return r.createElement("div",{className:"full-column-container"},r.createElement("div",{className:"columns-container"},t))},e.prototype.renderEditingTask=function(){if(this.state.editingTask)return r.createElement(p.ModalComponent,{cancelFunc:this.clearEditingTask.bind(this)},r.createElement(o.EditTaskComponent,{meUser:this.props.meUser,task:this.state.editingTask,tagsById:this.props.tagsById,createMode:!1,createTask:function(t){},updateTask:this.props.updateTask,deleteTask:this.props.deleteTask}))},e.prototype.renderCreateTask=function(){if(null!=this.state.createColumnType){var t=null,e=null;this.state.viewType==a.priority&&(t=this.state.createColumnType,e=0),this.state.viewType==a.status&&(t=0,e=this.state.createColumnType);var n=[];return this.state.selectedTag&&n.push(this.state.selectedTag.id),r.createElement(p.ModalComponent,{cancelFunc:this.clearCreateColumnType.bind(this)},r.createElement(o.EditTaskComponent,{meUser:this.props.meUser,tagsById:this.props.tagsById,createMode:!0,createTask:this.props.createTask,initialPriority:t,initialState:e,initialTags:n,updateTask:function(t){},deleteTask:function(t){}}))}},e.prototype.render=function(){return r.createElement("div",{className:"task-board"},this.renderOptions(),this.renderColumns(),this.renderEditingTask(),this.renderCreateTask())},e}(r.Component);e.TaskBoardComponent=m},function(t,e,n){"use strict";var a=function(){function t(){}return t}();e.User=a;var i=function(){function t(){}return t}();e.Task=i,e.priorityNameList=[["Unknown",0],["Highest",500],["High",400],["Normal",300],["Low",200],["Lowest",100]],e.stateNameList=[["Open",0],["In Progress",500],["Blocked",750],["Closed",1e3]];var r=function(){function t(){}return t}();e.Event=r;var s=function(){function t(){}return t}();e.Tag=s;var o=function(){function t(){}return t}();e.Note=o},function(t,e,n){var a=n(14);"string"==typeof a&&(a=[[t.i,a,""]]);n(22)(a,{});a.locals&&(t.exports=a.locals)},function(t,e){t.exports=ReactDOM},function(t,e,n){e=t.exports=n(15)(),e.push([t.i,"*{font-family:Open Sans,lucida grande,Segoe UI,arial,verdana,lucida sans unicode,tahoma,sans-serif!important;letter-spacing:.3px;color:#47525d;font-weight:100}body{background:#f6f9fc;margin:0}div.card{border:1px solid rgba(0,0,0,.04);box-shadow:0 1px 4px rgba(0,0,0,.03);margin:0 0 10px;padding:20px;border-radius:3px;background:#fff;-webkit-tap-highlight-color:transparent;box-sizing:border-box;display:block}div.header-container{display:flex;justify-content:space-between;flex-wrap:wrap;padding:1em 1em 0;background-color:#fff}h1.header-title{margin:0}div.header-container div.view-mode-selector{display:flex;width:100%;margin:.5em 0}div.header-container div.view-mode-selector a.view-mode-option{margin-right:1em;text-decoration:none}div.header-container div.view-mode-selector a.view-mode-option.-selected{text-decoration:underline}div.task-board{width:100%;height:calc(100vh - 97px);display:flex;flex-direction:column}div.task-board div.task-board-options{display:flex;background-color:#fff;padding:0 1em .5em;flex-shrink:0}div.task-board div.task-board-options div.view-type-selector{display:flex}div.task-board div.task-board-options div.view-type-selector div.view-type-choice{margin-right:.5em;cursor:pointer}div.task-board div.task-board-options div.view-type-selector div.view-type-choice.-selected{text-decoration:underline}div.task-board div.hide-closed-tasks{margin-left:.5em}div.task-board div.task-board-tag-selector-container{display:flex;margin-left:1em}div.task-board div.task-board-tag-selector-container div.tokenizer-container{margin-left:.5em}div.task-board div.full-column-container{height:100%}div.task-board div.full-column-container div.columns-container{display:flex;flex-direction:row;min-height:100%}div.task-board div.column-container{display:flex;flex-direction:column;width:25%;padding:.5em}div.task-board div.column-container.drop-container{background-color:rgba(0,0,0,.04)}div.task-board div.draggable-task.-hidden{display:none}.task-title,div.task-board .task{text-overflow:ellipsis;overflow-x:hidden}.task-id{font-weight:bolder;text-decoration:underline}.task-title{font-weight:700}.task .task-columns{display:flex}.task-columns .main-column{width:100%}.task-columns .task-color{width:3px;flex-shrink:0;margin:-20px 17px -20px -20px}.task-color.-p0{background-color:#8b4513}.task-color.-p500{background-color:#f0f}.task-color.-p400{background-color:red}.task-color.-p300{background-color:orange}.task-color.-p200{background-color:#228b22}.task-color.-p100{background-color:#6495ed}.task-color.-s0{background-color:#228b22}.task-color.-s500{background-color:#6495ed}.task-color.-s750{background-color:red}.task-color.-s1000{background-color:#8b4513}div.task-tags-container{display:flex}div.task-tags-container div.tag{margin-left:.25em;padding:.1em .25em}div.task div.progress-container span.percentage.-bad{color:#dc322f}div.task div.progress-container span.percentage.-good{color:#228b22}div.detail-container{background-color:#fff;padding:.5em;overflow-wrap:break-word}div.detail-container div.title{font-weight:700}div.detail-container div.options-container{text-decoration:underline;display:flex;justify-content:space-between}div.detail-container div.options a{padding:0 .25em;cursor:pointer}div.detail-container div.time-info{padding-top:.25em}div.detail-container div.task-status{display:flex;padding-top:.25em}div.detail-container div.task-status div{margin-right:.5em}div.detail-container div.task-status div.info-container{display:flex}div.detail-container div.task-status div.task-color{height:22px;width:1em;margin-right:.25em;margin-left:-.25em}div.detail-container div.options-container.tag-options-container{text-decoration:none}div.detail-container div.options{text-decoration:underline}div.detail-container div.related-tag-names{display:flex;align-items:center}div.detail-container div.related-tag-names div.tag{padding:1px .25em;margin-left:.25em;margin-bottom:0}div.calendar{width:100%}div.calendar div.options{display:flex;background-color:#fff;padding:0 1em .5em}div.calendar div.options div.view-type-selector{display:flex;margin-left:.5em}div.calendar div.options div.view-type-selector div.view-type-choice{margin-right:.5em;cursor:pointer}div.calendar div.options div.view-type-selector div.view-type-choice.-selected{text-decoration:underline}div.calendar div.options div.pagination-container{display:flex;margin-left:.5em}div.calendar div.options div.pagination-container div.pagination-option{margin-right:.5em;cursor:pointer}div.calendar div.tag-selector-container{display:flex;margin-left:1em}div.calendar div.tag-selector-container div.tokenizer-container{margin-left:.5em}div.calendar div.full-column-container{display:flex;align-items:center;flex-direction:column;height:calc(100vh - 140px);padding:0 2em}div.calendar div.full-column-container div.header-and-content-container{overflow:hidden;height:100%;width:100%;display:flex;flex-direction:column}div.calendar div.column-header-container{display:flex;margin-top:.5em;margin-right:15px;text-align:center}div.calendar div.column-header{min-width:120px;flex-grow:1;height:22px}div.calendar div.column-header.-times{max-width:120px}div.calendar div.column-header.single-day{min-width:360px}div.calendar div.all-columns-container{display:flex;height:100%;overflow-x:hidden;overflow-y:auto;border-bottom:1px solid rgba(0,0,0,.2);border-top:1px solid rgba(0,0,0,.2)}div.calendar div.column-container{flex-grow:1;min-width:120px;position:relative}div.calendar div.column-container.-times{max-width:120px}div.calendar div.column-container table{width:100%}div.calendar div.column-container.single-day{min-width:360px}div.calendar div.column-container td{border-right:1px solid rgba(0,0,0,.2);border-bottom:1px solid rgba(0,0,0,.2);font-size:14px;min-width:120px;cursor:pointer}div.calendar div.column-container.single-day td{min-width:360px}div.calendar div.column-container tr:nth-child(odd) td{border-bottom-style:dashed}div.calendar div.column-container:first-child td{border-left:1px solid rgba(0,0,0,.2);cursor:default;vertical-align:top;text-align:right}div.calendar div.column-container table tbody tr:first-child td{border-top:1px solid rgba(0,0,0,.2)}div.calendar div.rendered-event-container{position:absolute;width:100%}div.calendar div.rendered-event-container div.card{padding:1px .25em;margin-left:1px;margin-right:2px;margin-bottom:0;overflow-y:auto;height:100%}div.calendar div.column-container div.current-time-cursor{position:absolute;height:3px;background-color:#dc322f;min-width:120px;width:100%;z-index:2}div.calendar div.column-container.single-day div.current-time-cursor{min-width:360px}div.calendar div.column-container tr td.-selected{background-color:rgba(0,0,0,.2);border:none}div.calendar div.rendered-event-container div.draggable-event-end{cursor:ns-resize;width:100%;height:7px;margin-top:-3px}div.calendar div.rendered-event-container div.tag.card{overflow-y:hidden}div.event-container{font-size:13px;display:flex;flex-wrap:wrap;align-content:space-between;overflow-x:hidden;height:100%}div.event-container div.name{flex-grow:1}div.event-card-container{align-self:flex-end;flex-grow:1;display:flex;justify-content:flex-end;padding-bottom:.25em}div.event-card-container div.card{margin:0 0 0 .25em;padding:.1em .25em}div.event-container div.task-id-card{cursor:pointer}.tag-graph{margin:1em}.tag-children-container,.tags-root-container{border:1px solid #000;margin-bottom:.25em}.tag-children-container{margin-left:.5em;margin-right:.5em}.tag-container{margin-left:.25em;font-weight:700}.tag-container .edit-tag-button{text-decoration:underline;cursor:pointer;font-weight:100}.tag-graph div.create-tag-button-container{text-decoration:underline;cursor:pointer;margin-top:.5em}div.tag.card{cursor:pointer;margin-bottom:0}div.tokenizer-container{display:flex}div.tokenizer-container div.pending-token-container{width:100%}div.tokens-container{display:flex;margin-right:.5em}div.rendered-token{display:flex;padding:.1em .25em;margin-top:-3px;margin-bottom:0}div.rendered-token div.remove-token{margin-left:.25em;cursor:pointer}div.tokenizer-container div.pending-state-container{width:100%}div.tokenizer-container div.autocomplete-token-container{position:absolute;background:#fff;border-radius:0 3px 3px;border:1px solid rgba(0,0,0,.2);border-top:none;z-index:3}div.tokenizer-container div.autocomplete-token-container div.autocomplete-token{padding:.5em;border-bottom:1px solid rgba(0,0,0,.2)}div.tokenizer-container div.autocomplete-token-container:last-child{border-bottom:none}div.tokenizer-container div.autocomplete-token-container div.autocomplete-token:hover{cursor:pointer;background-color:#f6f9fc}div.tokenizer-container div.autocomplete-token-container div.autocomplete-token.-selected{background-color:#f6f9fc}div.modal-container div.background{position:fixed;left:0;top:0;width:100%;height:100%;background-color:rgba(0,0,0,.2);z-index:4;display:flex;align-items:center;justify-content:center}div.modal.card{min-width:350px}div.modal h3{margin:0}div.modal-container div.cancel-button-container{cursor:pointer;float:right}div.modal label{display:block;padding-top:.5em}div.modal input,select,textarea{width:100%;background-color:#fff;border:1px solid rgba(0,0,0,.4);margin:0;padding:0}div.modal input[type=button]{margin-top:.5em;height:30px}div.modal div.rendered-token{margin-top:0}div.modal div.checkbox-container{display:flex;align-items:center}div.modal div.checkbox-container input{width:30px;height:15px;margin-top:7px}div.merged-container{display:flex}div.main-pane{max-width:67%;min-width:67%;height:calc(100vh - 97px);display:flex;flex-direction:column}div.merged-task-container{display:flex;flex-grow:1}div.right-pane{max-width:33%;min-width:33%}div.main-pane div.task-board{height:auto}div.main-pane div.task-board div.full-column-container{overflow-y:auto}div.right-pane div.calendar div.full-column-container{padding:0}div.right-pane div.calendar div.tag-selector-container{margin-left:0}div.right-pane div.calendar div.column-container,div.right-pane div.calendar div.column-container.single-day,div.right-pane div.calendar div.column-container.single-day div.current-time-cursor,div.right-pane div.calendar div.column-container.single-day td,div.right-pane div.calendar div.column-container td,div.right-pane div.calendar div.column-header,div.right-pane div.calendar div.column-header.single-day{min-width:0}div.right-pane div.calendar div.column-container.-times,div.right-pane div.calendar div.column-header.-times{max-width:70px}div.right-pane div.calendar div.options div.pending-token-container input{width:100%}div.right-pane div.calendar div.options div.tag-selector-label{flex-shrink:0}div.note.card{margin:10px 20px}div.note div.note-header{display:flex;justify-content:space-between}div.note div.note-header div.note-title{font-size:2em}div.note div.note-content img{max-width:100%;max-height:480px}div.note-tags-container{display:flex}div.note-tags-container div.card{margin-left:.25em;margin-bottom:0;padding:.1em .25em}",""]);
},function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e];n[2]?t.push("@media "+n[2]+"{"+n[1]+"}"):t.push(n[1])}return t.join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var a={},i=0;i<this.length;i++){var r=this[i][0];"number"==typeof r&&(a[r]=!0)}for(i=0;i<e.length;i++){var s=e[i];"number"==typeof s[0]&&a[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),t.push(s))}},t}},function(t,e,n){"use strict";function a(t){var e=Array.prototype.slice.call(arguments,1);return e.forEach(function(e){e&&Object.keys(e).forEach(function(n){t[n]=e[n]})}),t}function i(t){return Object.prototype.toString.call(t)}function r(t){return"[object String]"===i(t)}function s(t){return"[object Object]"===i(t)}function o(t){return"[object RegExp]"===i(t)}function c(t){return"[object Function]"===i(t)}function d(t){return t.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function l(t){return Object.keys(t||{}).reduce(function(t,e){return t||y.hasOwnProperty(e)},!1)}function p(t){t.__index__=-1,t.__text_cache__=""}function u(t){return function(e,n){var a=e.slice(n);return t.test(a)?a.match(t)[0].length:0}}function h(){return function(t,e){e.normalize(t)}}function m(t){function e(t){return t.replace("%TLDS%",i.src_tlds)}function a(t,e){throw new Error('(LinkifyIt) Invalid schema "'+t+'": '+e)}var i=t.re=n(17)(t.__opts__),l=t.__tlds__.slice();t.onCompile(),t.__tlds_replaced__||l.push(E),l.push(i.src_xn),i.src_tlds=l.join("|"),i.email_fuzzy=RegExp(e(i.tpl_email_fuzzy),"i"),i.link_fuzzy=RegExp(e(i.tpl_link_fuzzy),"i"),i.link_no_ip_fuzzy=RegExp(e(i.tpl_link_no_ip_fuzzy),"i"),i.host_fuzzy_test=RegExp(e(i.tpl_host_fuzzy_test),"i");var m=[];t.__compiled__={},Object.keys(t.__schemas__).forEach(function(e){var n=t.__schemas__[e];if(null!==n){var i={validate:null,link:null};return t.__compiled__[e]=i,s(n)?(o(n.validate)?i.validate=u(n.validate):c(n.validate)?i.validate=n.validate:a(e,n),void(c(n.normalize)?i.normalize=n.normalize:n.normalize?a(e,n):i.normalize=h())):r(n)?void m.push(e):void a(e,n)}}),m.forEach(function(e){t.__compiled__[t.__schemas__[e]]&&(t.__compiled__[e].validate=t.__compiled__[t.__schemas__[e]].validate,t.__compiled__[e].normalize=t.__compiled__[t.__schemas__[e]].normalize)}),t.__compiled__[""]={validate:null,normalize:h()};var g=Object.keys(t.__compiled__).filter(function(e){return e.length>0&&t.__compiled__[e]}).map(d).join("|");t.re.schema_test=RegExp("(^|(?!_)(?:[><｜]|"+i.src_ZPCc+"))("+g+")","i"),t.re.schema_search=RegExp("(^|(?!_)(?:[><｜]|"+i.src_ZPCc+"))("+g+")","ig"),t.re.pretest=RegExp("("+t.re.schema_test.source+")|("+t.re.host_fuzzy_test.source+")|@","i"),p(t)}function g(t,e){var n=t.__index__,a=t.__last_index__,i=t.__text_cache__.slice(n,a);this.schema=t.__schema__.toLowerCase(),this.index=n+e,this.lastIndex=a+e,this.raw=i,this.text=i,this.url=i}function v(t,e){var n=new g(t,e);return t.__compiled__[n.schema].normalize(n,t),n}function f(t,e){return this instanceof f?(e||l(t)&&(e=t,t={}),this.__opts__=a({},y,e),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=a({},k,t),this.__compiled__={},this.__tlds__=T,this.__tlds_replaced__=!1,this.re={},void m(this)):new f(t,e)}var y={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1},k={"http:":{validate:function(t,e,n){var a=t.slice(e);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(a)?a.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(t,e,n){var a=t.slice(e);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(a)?e>=3&&":"===t[e-3]?0:e>=3&&"/"===t[e-3]?0:a.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(t,e,n){var a=t.slice(e);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(a)?a.match(n.re.mailto)[0].length:0}}},E="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",T="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|рф".split("|");f.prototype.add=function(t,e){return this.__schemas__[t]=e,m(this),this},f.prototype.set=function(t){return this.__opts__=a(this.__opts__,t),this},f.prototype.test=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return!1;var e,n,a,i,r,s,o,c,d;if(this.re.schema_test.test(t))for(o=this.re.schema_search,o.lastIndex=0;null!==(e=o.exec(t));)if(i=this.testSchemaAt(t,e[2],o.lastIndex)){this.__schema__=e[2],this.__index__=e.index+e[1].length,this.__last_index__=e.index+e[0].length+i;break}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(c=t.search(this.re.host_fuzzy_test),c>=0&&(this.__index__<0||c<this.__index__)&&null!==(n=t.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))&&(r=n.index+n[1].length,(this.__index__<0||r<this.__index__)&&(this.__schema__="",this.__index__=r,this.__last_index__=n.index+n[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(d=t.indexOf("@"),d>=0&&null!==(a=t.match(this.re.email_fuzzy))&&(r=a.index+a[1].length,s=a.index+a[0].length,(this.__index__<0||r<this.__index__||r===this.__index__&&s>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=r,this.__last_index__=s))),this.__index__>=0},f.prototype.pretest=function(t){return this.re.pretest.test(t)},f.prototype.testSchemaAt=function(t,e,n){return this.__compiled__[e.toLowerCase()]?this.__compiled__[e.toLowerCase()].validate(t,n,this):0},f.prototype.match=function(t){var e=0,n=[];this.__index__>=0&&this.__text_cache__===t&&(n.push(v(this,e)),e=this.__last_index__);for(var a=e?t.slice(e):t;this.test(a);)n.push(v(this,e)),a=a.slice(this.__last_index__),e+=this.__last_index__;return n.length?n:null},f.prototype.tlds=function(t,e){return t=Array.isArray(t)?t:[t],e?(this.__tlds__=this.__tlds__.concat(t).sort().filter(function(t,e,n){return t!==n[e-1]}).reverse(),m(this),this):(this.__tlds__=t.slice(),this.__tlds_replaced__=!0,m(this),this)},f.prototype.normalize=function(t){t.schema||(t.url="http://"+t.url),"mailto:"!==t.schema||/^mailto:/i.test(t.url)||(t.url="mailto:"+t.url)},f.prototype.onCompile=function(){},t.exports=f},function(t,e,n){"use strict";t.exports=function(t){var e={};e.src_Any=n(21).source,e.src_Cc=n(18).source,e.src_Z=n(20).source,e.src_P=n(19).source,e.src_ZPCc=[e.src_Z,e.src_P,e.src_Cc].join("|"),e.src_ZCc=[e.src_Z,e.src_Cc].join("|");var a="[><｜]";return e.src_pseudo_letter="(?:(?!"+a+"|"+e.src_ZPCc+")"+e.src_Any+")",e.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",e.src_auth="(?:(?:(?!"+e.src_ZCc+"|[@/\\[\\]()]).)+@)?",e.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",e.src_host_terminator="(?=$|"+a+"|"+e.src_ZPCc+")(?!-|_|:\\d|\\.-|\\.(?!$|"+e.src_ZPCc+"))",e.src_path="(?:[/?#](?:(?!"+e.src_ZCc+"|"+a+"|[()[\\]{}.,\"'?!\\-]).|\\[(?:(?!"+e.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+e.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+e.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+e.src_ZCc+'|["]).)+\\"|\\\'(?:(?!'+e.src_ZCc+"|[']).)+\\'|\\'(?="+e.src_pseudo_letter+"|[-]).|\\.{2,3}[a-zA-Z0-9%/]|\\.(?!"+e.src_ZCc+"|[.]).|"+(t&&t["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+"\\,(?!"+e.src_ZCc+").|\\!(?!"+e.src_ZCc+"|[!]).|\\?(?!"+e.src_ZCc+"|[?]).)+|\\/)?",e.src_email_name='[\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]+',e.src_xn="xn--[a-z0-9\\-]{1,59}",e.src_domain_root="(?:"+e.src_xn+"|"+e.src_pseudo_letter+"{1,63})",e.src_domain="(?:"+e.src_xn+"|(?:"+e.src_pseudo_letter+")|(?:"+e.src_pseudo_letter+"(?:-(?!-)|"+e.src_pseudo_letter+"){0,61}"+e.src_pseudo_letter+"))",e.src_host="(?:(?:(?:(?:"+e.src_domain+")\\.)*"+e.src_domain+"))",e.tpl_host_fuzzy="(?:"+e.src_ip4+"|(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%)))",e.tpl_host_no_ip_fuzzy="(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%))",e.src_host_strict=e.src_host+e.src_host_terminator,e.tpl_host_fuzzy_strict=e.tpl_host_fuzzy+e.src_host_terminator,e.src_host_port_strict=e.src_host+e.src_port+e.src_host_terminator,e.tpl_host_port_fuzzy_strict=e.tpl_host_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_port_no_ip_fuzzy_strict=e.tpl_host_no_ip_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+e.src_ZPCc+"|>|$))",e.tpl_email_fuzzy="(^|"+a+"|\\(|"+e.src_ZCc+")("+e.src_email_name+"@"+e.tpl_host_fuzzy_strict+")",e.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+e.src_ZPCc+"))((?![$+<=>^`|｜])"+e.tpl_host_port_fuzzy_strict+e.src_path+")",e.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+e.src_ZPCc+"))((?![$+<=>^`|｜])"+e.tpl_host_port_no_ip_fuzzy_strict+e.src_path+")",e}},function(t,e){t.exports=/[\0-\x1F\x7F-\x9F]/},function(t,e){t.exports=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E44\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD807[\uDC41-\uDC45\uDC70\uDC71]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/},function(t,e){t.exports=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/},function(t,e){t.exports=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/},function(t,e){function n(t,e){for(var n=0;n<t.length;n++){var a=t[n],i=u[a.id];if(i){i.refs++;for(var r=0;r<i.parts.length;r++)i.parts[r](a.parts[r]);for(;r<a.parts.length;r++)i.parts.push(c(a.parts[r],e))}else{for(var s=[],r=0;r<a.parts.length;r++)s.push(c(a.parts[r],e));u[a.id]={id:a.id,refs:1,parts:s}}}}function a(t){for(var e=[],n={},a=0;a<t.length;a++){var i=t[a],r=i[0],s=i[1],o=i[2],c=i[3],d={css:s,media:o,sourceMap:c};n[r]?n[r].parts.push(d):e.push(n[r]={id:r,parts:[d]})}return e}function i(t,e){var n=g(),a=y[y.length-1];if("top"===t.insertAt)a?a.nextSibling?n.insertBefore(e,a.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),y.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(e)}}function r(t){t.parentNode.removeChild(t);var e=y.indexOf(t);e>=0&&y.splice(e,1)}function s(t){var e=document.createElement("style");return e.type="text/css",i(t,e),e}function o(t){var e=document.createElement("link");return e.rel="stylesheet",i(t,e),e}function c(t,e){var n,a,i;if(e.singleton){var c=f++;n=v||(v=s(e)),a=d.bind(null,n,c,!1),i=d.bind(null,n,c,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=o(e),a=p.bind(null,n),i=function(){r(n),n.href&&URL.revokeObjectURL(n.href)}):(n=s(e),a=l.bind(null,n),i=function(){r(n)});return a(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;a(t=e)}else i()}}function d(t,e,n,a){var i=n?"":a.css;if(t.styleSheet)t.styleSheet.cssText=k(e,i);else{var r=document.createTextNode(i),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(r,s[e]):t.appendChild(r)}}function l(t,e){var n=e.css,a=e.media;if(a&&t.setAttribute("media",a),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function p(t,e){var n=e.css,a=e.sourceMap;a&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */");var i=new Blob([n],{type:"text/css"}),r=t.href;t.href=URL.createObjectURL(i),r&&URL.revokeObjectURL(r)}var u={},h=function(t){var e;return function(){return"undefined"==typeof e&&(e=t.apply(this,arguments)),e}},m=h(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),g=h(function(){return document.head||document.getElementsByTagName("head")[0]}),v=null,f=0,y=[];t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");e=e||{},"undefined"==typeof e.singleton&&(e.singleton=m()),"undefined"==typeof e.insertAt&&(e.insertAt="bottom");var i=a(t);return n(i,e),function(t){for(var r=[],s=0;s<i.length;s++){var o=i[s],c=u[o.id];c.refs--,r.push(c)}if(t){var d=a(t);n(d,e)}for(var s=0;s<r.length;s++){var c=r[s];if(0===c.refs){for(var l=0;l<c.parts.length;l++)c.parts[l]();delete u[c.id]}}}};var k=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},function(t,e){t.exports=["aaa","aarp","abarth","abb","abbott","abbvie","abc","able","abogado","abudhabi","ac","academy","accenture","accountant","accountants","aco","active","actor","ad","adac","ads","adult","ae","aeg","aero","aetna","af","afamilycompany","afl","africa","ag","agakhan","agency","ai","aig","aigo","airbus","airforce","airtel","akdn","al","alfaromeo","alibaba","alipay","allfinanz","allstate","ally","alsace","alstom","am","americanexpress","americanfamily","amex","amfam","amica","amsterdam","analytics","android","anquan","anz","ao","aol","apartments","app","apple","aq","aquarelle","ar","aramco","archi","army","arpa","art","arte","as","asda","asia","associates","at","athleta","attorney","au","auction","audi","audible","audio","auspost","author","auto","autos","avianca","aw","aws","ax","axa","az","azure","ba","baby","baidu","banamex","bananarepublic","band","bank","bar","barcelona","barclaycard","barclays","barefoot","bargains","baseball","basketball","bauhaus","bayern","bb","bbc","bbt","bbva","bcg","bcn","bd","be","beats","beauty","beer","bentley","berlin","best","bestbuy","bet","bf","bg","bh","bharti","bi","bible","bid","bike","bing","bingo","bio","biz","bj","black","blackfriday","blanco","blockbuster","blog","bloomberg","blue","bm","bms","bmw","bn","bnl","bnpparibas","bo","boats","boehringer","bofa","bom","bond","boo","book","booking","boots","bosch","bostik","boston","bot","boutique","box","br","bradesco","bridgestone","broadway","broker","brother","brussels","bs","bt","budapest","bugatti","build","builders","business","buy","buzz","bv","bw","by","bz","bzh","ca","cab","cafe","cal","call","calvinklein","cam","camera","camp","cancerresearch","canon","capetown","capital","capitalone","car","caravan","cards","care","career","careers","cars","cartier","casa","case","caseih","cash","casino","cat","catering","catholic","cba","cbn","cbre","cbs","cc","cd","ceb","center","ceo","cern","cf","cfa","cfd","cg","ch","chanel","channel","chase","chat","cheap","chintai","chloe","christmas","chrome","chrysler","church","ci","cipriani","circle","cisco","citadel","citi","citic","city","cityeats","ck","cl","claims","cleaning","click","clinic","clinique","clothing","cloud","club","clubmed","cm","cn","co","coach","codes","coffee","college","cologne","com","comcast","commbank","community","company","compare","computer","comsec","condos","construction","consulting","contact","contractors","cooking","cookingchannel","cool","coop","corsica","country","coupon","coupons","courses","cr","credit","creditcard","creditunion","cricket","crown","crs","cruise","cruises","csc","cu","cuisinella","cv","cw","cx","cy","cymru","cyou","cz","dabur","dad","dance","data","date","dating","datsun","day","dclk","dds","de","deal","dealer","deals","degree","delivery","dell","deloitte","delta","democrat","dental","dentist","desi","design","dev","dhl","diamonds","diet","digital","direct","directory","discount","discover","dish","diy","dj","dk","dm","dnp","do","docs","doctor","dodge","dog","doha","domains","dot","download","drive","dtv","dubai","duck","dunlop","duns","dupont","durban","dvag","dvr","dz","earth","eat","ec","eco","edeka","edu","education","ee","eg","email","emerck","energy","engineer","engineering","enterprises","epost","epson","equipment","er","ericsson","erni","es","esq","estate","esurance","et","eu","eurovision","eus","events","everbank","exchange","expert","exposed","express","extraspace","fage","fail","fairwinds","faith","family","fan","fans","farm","farmers","fashion","fast","fedex","feedback","ferrari","ferrero","fi","fiat","fidelity","fido","film","final","finance","financial","fire","firestone","firmdale","fish","fishing","fit","fitness","fj","fk","flickr","flights","flir","florist","flowers","fly","fm","fo","foo","food","foodnetwork","football","ford","forex","forsale","forum","foundation","fox","fr","free","fresenius","frl","frogans","frontdoor","frontier","ftr","fujitsu","fujixerox","fun","fund","furniture","futbol","fyi","ga","gal","gallery","gallo","gallup","game","games","gap","garden","gb","gbiz","gd","gdn","ge","gea","gent","genting","george","gf","gg","ggee","gh","gi","gift","gifts","gives","giving","gl","glade","glass","gle","global","globo","gm","gmail","gmbh","gmo","gmx","gn","godaddy","gold","goldpoint","golf","goo","goodhands","goodyear","goog","google","gop","got","gov","gp","gq","gr","grainger","graphics","gratis","green","gripe","group","gs","gt","gu","guardian","gucci","guge","guide","guitars","guru","gw","gy","hair","hamburg","hangout","haus","hbo","hdfc","hdfcbank","health","healthcare","help","helsinki","here","hermes","hgtv","hiphop","hisamitsu","hitachi","hiv","hk","hkt","hm","hn","hockey","holdings","holiday","homedepot","homegoods","homes","homesense","honda","honeywell","horse","hospital","host","hosting","hot","hoteles","hotmail","house","how","hr","hsbc","ht","htc","hu","hughes","hyatt","hyundai","ibm","icbc","ice","icu","id","ie","ieee","ifm","ikano","il","im","imamat","imdb","immo","immobilien","in","industries","infiniti","info","ing","ink","institute","insurance","insure","int","intel","international","intuit","investments","io","ipiranga","iq","ir","irish","is","iselect","ismaili","ist","istanbul","it","itau","itv","iveco","iwc","jaguar","java","jcb","jcp","je","jeep","jetzt","jewelry","jio","jlc","jll","jm","jmp","jnj","jo","jobs","joburg","jot","joy","jp","jpmorgan","jprs","juegos","juniper","kaufen","kddi","ke","kerryhotels","kerrylogistics","kerryproperties","kfh","kg","kh","ki","kia","kim","kinder","kindle","kitchen","kiwi","km","kn","koeln","komatsu","kosher","kp","kpmg","kpn","kr","krd","kred","kuokgroup","kw","ky","kyoto","kz","la","lacaixa","ladbrokes","lamborghini","lamer","lancaster","lancia","lancome","land","landrover","lanxess","lasalle","lat","latino","latrobe","law","lawyer","lb","lc","lds","lease","leclerc","lefrak","legal","lego","lexus","lgbt","li","liaison","lidl","life","lifeinsurance","lifestyle","lighting","like","lilly","limited","limo","lincoln","linde","link","lipsy","live","living","lixil","lk","loan","loans","locker","locus","loft","lol","london","lotte","lotto","love","lpl","lplfinancial","lr","ls","lt","ltd","ltda","lu","lundbeck","lupin","luxe","luxury","lv","ly","ma","macys","madrid","maif","maison","makeup","man","management","mango","market","marketing","markets","marriott","marshalls","maserati","mattel","mba","mc","mcd","mcdonalds","mckinsey","md","me","med","media","meet","melbourne","meme","memorial","men","menu","meo","metlife","mg","mh","miami","microsoft","mil","mini","mint","mit","mitsubishi","mk","ml","mlb","mls","mm","mma","mn","mo","mobi","mobile","mobily","moda","moe","moi","mom","monash","money","monster","montblanc","mopar","mormon","mortgage","moscow","moto","motorcycles","mov","movie","movistar","mp","mq","mr","ms","msd","mt","mtn","mtpc","mtr","mu","museum","mutual","mv","mw","mx","my","mz","na","nab","nadex","nagoya","name","nationwide","natura","navy","nba","nc","ne","nec","net","netbank","netflix","network","neustar","new","newholland","news","next","nextdirect","nexus","nf","nfl","ng","ngo","nhk","ni","nico","nike","nikon","ninja","nissan","nissay","nl","no","nokia","northwesternmutual","norton","now","nowruz","nowtv","np","nr","nra","nrw","ntt","nu","nyc","nz","obi","observer","off","office","okinawa","olayan","olayangroup","oldnavy","ollo","om","omega","one","ong","onl","online","onyourside","ooo","open","oracle","orange","org","organic","orientexpress","origins","osaka","otsuka","ott","ovh","pa","page","pamperedchef","panasonic","panerai","paris","pars","partners","parts","party","passagens","pay","pccw","pe","pet","pf","pfizer","pg","ph","pharmacy","philips","phone","photo","photography","photos","physio","piaget","pics","pictet","pictures","pid","pin","ping","pink","pioneer","pizza","pk","pl","place","play","playstation","plumbing","plus","pm","pn","pnc","pohl","poker","politie","porn","post","pr","pramerica","praxi","press","prime","pro","prod","productions","prof","progressive","promo","properties","property","protection","pru","prudential","ps","pt","pub","pw","pwc","py","qa","qpon","quebec","quest","qvc","racing","radio","raid","re","read","realestate","realtor","realty","recipes","red","redstone","redumbrella","rehab","reise","reisen","reit","reliance","ren","rent","rentals","repair","report","republican","rest","restaurant","review","reviews","rexroth","rich","richardli","ricoh","rightathome","ril","rio","rip","rmit","ro","rocher","rocks","rodeo","rogers","room","rs","rsvp","ru","ruhr","run","rw","rwe","ryukyu","sa","saarland","safe","safety","sakura","sale","salon","samsclub","samsung","sandvik","sandvikcoromant","sanofi","sap","sapo","sarl","sas","save","saxo","sb","sbi","sbs","sc","sca","scb","schaeffler","schmidt","scholarships","school","schule","schwarz","science","scjohnson","scor","scot","sd","se","seat","secure","security","seek","select","sener","services","ses","seven","sew","sex","sexy","sfr","sg","sh","shangrila","sharp","shaw","shell","shia","shiksha","shoes","shop","shopping","shouji","show","showtime","shriram","si","silk","sina","singles","site","sj","sk","ski","skin","sky","skype","sl","sling","sm","smart","smile","sn","sncf","so","soccer","social","softbank","software","sohu","solar","solutions","song","sony","soy","space","spiegel","spot","spreadbetting","sr","srl","srt","st","stada","staples","star","starhub","statebank","statefarm","statoil","stc","stcgroup","stockholm","storage","store","stream","studio","study","style","su","sucks","supplies","supply","support","surf","surgery","suzuki","sv","swatch","swiftcover","swiss","sx","sy","sydney","symantec","systems","sz","tab","taipei","talk","taobao","target","tatamotors","tatar","tattoo","tax","taxi","tc","tci","td","tdk","team","tech","technology","tel","telecity","telefonica","temasek","tennis","teva","tf","tg","th","thd","theater","theatre","tiaa","tickets","tienda","tiffany","tips","tires","tirol","tj","tjmaxx","tjx","tk","tkmaxx","tl","tm","tmall","tn","to","today","tokyo","tools","top","toray","toshiba","total","tours","town","toyota","toys","tr","trade","trading","training","travel","travelchannel","travelers","travelersinsurance","trust","trv","tt","tube","tui","tunes","tushu","tv","tvs","tw","tz","ua","ubank","ubs","uconnect","ug","uk","unicom","university","uno","uol","ups","us","uy","uz","va","vacations","vana","vanguard","vc","ve","vegas","ventures","verisign","versicherung","vet","vg","vi","viajes","video","vig","viking","villas","vin","vip","virgin","visa","vision","vista","vistaprint","viva","vivo","vlaanderen","vn","vodka","volkswagen","volvo","vote","voting","voto","voyage","vu","vuelos","wales","walmart","walter","wang","wanggou","warman","watch","watches","weather","weatherchannel","webcam","weber","website","wed","wedding","weibo","weir","wf","whoswho","wien","wiki","williamhill","win","windows","wine","winners","wme","wolterskluwer","woodside","work","works","world","wow","ws","wtc","wtf","xbox","xerox","xfinity","xihuan","xin","कॉम","セール","佛山","慈善","集团","在线","한국","大众汽车","点看","คอม","ভারত","八卦","موقع","বাংলা","公益","公司","香格里拉","网站","移动","我爱你","москва","қаз","католик","онлайн","сайт","联通","срб","бг","бел","קום","时尚","微博","淡马锡","ファッション","орг","नेट","ストア","삼성","சிங்கப்பூர்","商标","商店","商城","дети","мкд","ею","ポイント","新闻","工行","家電","كوم","中文网","中信","中国","中國","娱乐","谷歌","భారత్","ලංකා","電訊盈科","购物","クラウド","ભારત","通販","भारत","网店","संगठन","餐厅","网络","ком","укр","香港","诺基亚","食品","飞利浦","台湾","台灣","手表","手机","мон","الجزائر","عمان","ارامكو","ایران","العليان","امارات","بازار","پاکستان","الاردن","موبايلي","بھارت","المغرب","ابوظبي","السعودية","كاثوليك","سودان","همراه","عراق","مليسيا","澳門","닷컴","政府","شبكة","بيتك","გე","机构","组织机构","健康","ไทย","سورية","рус","рф","珠宝","تونس","大拿","みんな","グーグル","ελ","世界","書籍","ਭਾਰਤ","网址","닷넷","コム","天主教","游戏","vermögensberater","vermögensberatung","企业","信息","嘉里大酒店","嘉里","مصر","قطر","广东","இலங்கை","இந்தியா","հայ","新加坡","فلسطين","政务","xperia","xxx","xyz","yachts","yahoo","yamaxun","yandex","ye","yodobashi","yoga","yokohama","you","youtube","yt","yun","za","zappos","zara","zero","zip","zippo","zm","zone","zuerich","zw"]},function(t,e,n){"use strict";var a=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(0),r=n(8),s=n(9),o=function(t){function e(){return t.apply(this,arguments)||this}return a(e,t),e.prototype.renderAccountInfo=function(){return i.createElement("div",{className:"profile-container"},this.props.meUser.username+" | ",i.createElement("a",{href:"/auth/logout"},"Logout"))},e.prototype.renderViewModeSelector=function(){var t=this,e={};e[s.AppViewMode.mergedView]="Home",e[s.AppViewMode.taskView]="Task Board",e[s.AppViewMode.eventView]="Calendar",e[s.AppViewMode.tagView]="Tag Graph",e[s.AppViewMode.noteView]="Notes";var n={};return n[s.AppViewMode.mergedView]="/",n[s.AppViewMode.taskView]="/tasks",n[s.AppViewMode.eventView]="/cal",n[s.AppViewMode.tagView]="/tags",n[s.AppViewMode.noteView]="/notes",i.createElement("div",{className:"view-mode-selector"},Object.keys(s.AppViewMode).map(function(a){if(e.hasOwnProperty(a)){var s="view-mode-option";return+a==t.props.viewMode&&(s+=" -selected"),i.createElement(r.Link,{key:a,className:s,to:n[+a]},e[+a])}}))},e.prototype.render=function(){return i.createElement("div",{className:"header-container"},i.createElement("h1",{className:"header-title"},"Starter"),this.renderAccountInfo(),this.renderViewModeSelector())},e}(i.Component);e.AppHeader=o},function(t,e,n){"use strict";var a,i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=n(3),s=n(1),o=n(0),c=n(8),d=n(26),l=n(2),p=n(27),u=n(6),h=n(4),m=n(5);!function(t){t[t.week=0]="week",t[t.day=1]="day"}(a=e.CalendarViewType||(e.CalendarViewType={}));var g=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],v=900,f=30,y=25,k=function(t){function e(e){var n=t.call(this,e)||this;return n.refreshLoopId=0,n._handleCreateEventWithTaskFn=null,n._handleEndEventWithTaskFn=null,n._dragTargetEventElement=null,n.state=n.getState(e),n}return i(e,t),e.prototype.componentWillReceiveProps=function(t){this.setState(this.getState(t))},e.prototype.getState=function(t){var e,n=t.initialViewType;this.state?(n=this.state.viewType,e=this.state.startDayTimestamp):e=this.computeTodayStartTime(n);var a=this.divideAndSort(e,n,t.eventsById),i=a[0],r=a[1],s={viewType:n,startDayTimestamp:e,columns:i,cellHeight:f,showCreate:!!this.state&&this.state.showCreate,eventToRenderingInfo:r,editingEvent:null,createEventTimestamp:null,createEventDurationSecs:null,createEventTask:null,selectedTag:null,draggingStartTimestamp:null,draggingEndTimestamp:null,draggingEvent:null,endDraggingEvent:null};return this.state&&(s.cellHeight=this.state.cellHeight,this.state.selectedTag&&t.tagsById[this.state.selectedTag.id]&&(s.selectedTag=this.state.selectedTag)),s},e.prototype.componentDidMount=function(){var t=this,e=document.getElementsByClassName("current-time-cursor");if(e.length){var n=document.getElementsByClassName("all-columns-container")[0],a=r(e[0]).data("top");n.scrollTop=a-n.clientHeight/2}var i=function(){t.forceUpdate()};this.refreshLoopId=setInterval(i,6e4),this._handleCreateEventWithTaskFn=this.handleCreateEventWithTask.bind(this),document.addEventListener(m.signalCreateEventWithTask,this._handleCreateEventWithTaskFn),this._handleEndEventWithTaskFn=this.handleEndEventWithTask.bind(this),document.addEventListener(m.signalEndEventWithTask,this._handleEndEventWithTaskFn)},e.prototype.componentWillUnmount=function(){this.refreshLoopId&&clearInterval(this.refreshLoopId),document.removeEventListener(m.signalCreateEventWithTask,this._handleCreateEventWithTaskFn),document.removeEventListener(m.signalEndEventWithTask,this._handleEndEventWithTaskFn),this._handleCreateEventWithTaskFn=null,this._handleEndEventWithTaskFn=null},e.prototype.handleCreateEventWithTask=function(t){var e=t.detail;if(this.shouldCreateEventWithTask()){var n=s();this.state.createEventTimestamp=1e3*n.unix();var a=s(n).add(30,"minutes"),i=a.minute()%15;a=i>7.5?s(a).add(15-i,"minutes"):s(a).subtract(i,"minutes"),this.state.createEventDurationSecs=a.startOf("minute").unix()-n.unix(),this.state.showCreate=!0,this.state.createEventTask=e,this.setState(this.state)}},e.prototype.handleEndEventWithTask=function(t){var e=t.detail,n=this.shouldEndEventWithTask(e);n&&(n.durationSecs=Math.floor((1e3*s().unix()-n.startTime)/1e3),this.props.updateEvent(n))},e.prototype.computeTodayStartTime=function(t){var e;return e=t==a.week?this.computeClosestMonday(s()):s().startOf("day"),1e3*e.unix()},e.prototype.computeClosestMonday=function(t){var e=s().startOf("week").add(1,"days");return e>s()&&(e=e.subtract(1,"week")),e},e.prototype.shouldCreateEventWithTask=function(){if(this.state.editingEvent||this.state.showCreate)return!1;for(var t=1e3*s().unix(),e=0,n=Object.keys(this.props.eventsById);e<n.length;e++){var a=n[e],i=this.props.eventsById[a];if(i.startTime<t&&i.startTime+1e3*i.durationSecs>=t)return!1}return!0},e.prototype.shouldEndEventWithTask=function(t){if(this.state.showCreate||this.state.editingEvent)return null;for(var e=1e3*s().unix(),n=0,a=Object.keys(this.props.eventsById);n<a.length;n++){var i=a[n],r=this.props.eventsById[i];if(r.startTime<e&&r.startTime+1e3*r.durationSecs>=e)for(var o=0,c=r.taskIds;o<c.length;o++){var d=c[o];if(d==t.id)return r}}return null},e.prototype.getEventKey=function(t,e){return t+"-"+e},e.prototype.divideAndSort=function(t,e,n){var i,r=this;
i=e==a.week?[[],[],[],[],[],[],[]]:[[]];var o=s(t),c={};this.state&&this.state.selectedTag&&(c=h.getTagAndDescendantsRecursive(this.state.selectedTag.id,this.props.tagsById));for(var d=function(t){if(r.state&&r.state.selectedTag){var e=!1;if(t.tagIds.forEach(function(t){e=e||c[t]}),!e)return!0}return!1},l=0,p=Object.keys(n);l<p.length;l++){var u=p[l],m=n[u];if(!d(m)){var k=m.startTime,E=k+1e3*m.durationSecs;for(var T in g){var b=1e3*s(o).add(T,"days").unix();if(b<E&&(b>=k?i[T].push(parseInt(u)):b+864e5>k&&i[T].push(parseInt(u))),e==a.day)break}}}i.forEach(function(t){t.sort(function(t,e){var a=n[t],i=n[e],r=a.startTime-i.startTime;return 0!=r?r:i.durationSecs-a.durationSecs})});var _={},w=f;this.state&&(w=this.state.cellHeight);var C=function(t,e){var n=1e-7;return e>=t.top+n&&e<t.top+t.height-n};return i.forEach(function(t,e){var a=1e3*s(o).add(e,"days").unix(),i=1e3*s(o).add(e+1,"days").unix(),c=[];t.forEach(function(t){var s=null,o=null,d=n[t];if(d.startTime<a)s=0;else{var l=(d.startTime-a)/864e5;s=l*w*(86400/v)}var p=Math.min(d.startTime+1e3*d.durationSecs,i),u=(p-d.startTime)/1e3;if(d.startTime<a&&(u-=(a-d.startTime)/1e3),o=Math.max(Math.min(w,y),u/v*w),!c.length)return c.push({id:d.id,height:o,top:s}),void(_[r.getEventKey(d.id,e)]={index:0,columnWidth:1,extraCols:0,height:o,top:s});var h=!1;if(c.forEach(function(t,n){t&&C(t,s)||(h?c[n]=null:(h=!0,c[n]={id:d.id,top:s,height:o},_[r.getEventKey(d.id,e)]={index:n,columnWidth:0,extraCols:0,height:o,top:s}))}),h){for(;c.length&&null==c[c.length-1];)c.pop();var m=0,g=c.length;c.forEach(function(t){t&&(m++,g=Math.max(g,_[r.getEventKey(t.id,e)].columnWidth))}),c.forEach(function(t){if(t){var n=r.getEventKey(t.id,e),a=Math.max(m,_[n].columnWidth);_[n].columnWidth=a,_[n].extraCols=g-a}})}else c.forEach(function(t){if(t){var n=r.getEventKey(t.id,e);_[n].columnWidth=c.length+1}}),_[r.getEventKey(d.id,e)]={columnWidth:c.length+1,index:c.length,extraCols:0,height:o,top:s},c.push({id:d.id,top:s,height:o})})}),[i,_]},e.prototype.resort=function(){var t=this.divideAndSort(this.state.startDayTimestamp,this.state.viewType,this.props.eventsById),e=t[0],n=t[1];this.state.columns=e,this.state.eventToRenderingInfo=n,this.setState(this.state)},e.prototype.onDoubleClick=function(t){this.state.editingEvent=t,this.setState(this.state)},e.prototype.computeTimestamp=function(t,e){var n=e;return this.state.viewType==a.week&&g.forEach(function(e,a){e==t&&(n+=86400*a)}),1e3*s(this.state.startDayTimestamp).add(n,"seconds").unix()},e.prototype.columnMouseDown=function(t,e){var n=1*e.target.dataset.index;this.state.draggingStartTimestamp=this.computeTimestamp(t,n),this.state.draggingEndTimestamp=this.state.draggingStartTimestamp,this.updateCreateEventTimestamp(),this.setState(this.state),e.preventDefault()},e.prototype.columnMouseOver=function(t,e){if(this.state.draggingStartTimestamp){var n=1*e.target.dataset.index;this.state.draggingEndTimestamp=this.computeTimestamp(t,n),this.updateCreateEventTimestamp(),this.updateCreateEventDurationSecs(),this.setState(this.state)}},e.prototype.columnMouseUp=function(t,e){if(this.state.draggingStartTimestamp){var n=1*e.target.dataset.index;this.state.draggingEndTimestamp=this.computeTimestamp(t,n),this.updateCreateEventTimestamp(),this.updateCreateEventDurationSecs(),this.state.draggingStartTimestamp=null,this.state.draggingEndTimestamp=null,this.state.showCreate=!0,this.setState(this.state)}},e.prototype.updateCreateEventTimestamp=function(){this.state.draggingEndTimestamp<this.state.draggingStartTimestamp?this.state.createEventTimestamp=this.state.draggingEndTimestamp:this.state.createEventTimestamp=this.state.draggingStartTimestamp},e.prototype.updateCreateEventDurationSecs=function(){var t,e;this.state.draggingEndTimestamp<this.state.draggingStartTimestamp?(t=this.state.draggingEndTimestamp,e=this.state.draggingStartTimestamp):(t=this.state.draggingStartTimestamp,e=this.state.draggingEndTimestamp);var n=e-t;n/=1e3,n+=v,this.state.createEventDurationSecs=n},e.prototype.onDrop=function(t,e){if(this.state.draggingEvent)this.state.draggingEvent.startTime=this.computeTimestamp(t,e),this.props.updateEvent(this.state.draggingEvent),this.state.draggingEvent=null,this.setState(this.state),this._dragTargetEventElement.show();else{if(!this.state.endDraggingEvent)return;var n=this.computeTimestamp(t,e),a=n-this.state.endDraggingEvent.startTime;a=Math.max(Math.round(a/1e3)+v,v),this.state.endDraggingEvent.durationSecs=a,this.props.updateEvent(this.state.endDraggingEvent),this.state.endDraggingEvent=null,this.setState(this.state)}},e.prototype.getDayAndIndexUnderneathEvent=function(t,e){var n=t.clientX,a=t.clientY;r(t.currentTarget).hide();var i=r(document.elementFromPoint(n,a));if("TD"==i.prop("tagName")){var s=i.data();e(s.day,s.index)}r(t.currentTarget).show()},e.prototype.onDropPassThrough=function(t){this.getDayAndIndexUnderneathEvent(t,this.onDrop.bind(this)),t.preventDefault(),t.stopPropagation()},e.prototype.onDragOverPassThrough=function(t){this.getDayAndIndexUnderneathEvent(t,this.onDragOver.bind(this)),t.preventDefault(),t.stopPropagation()},e.prototype.onDragStart=function(t,e){if(this.state.endDraggingEvent||this.state.draggingEvent)throw Error("Already was dragging an event...");this.state.draggingEvent=t,this.setState(this.state),this._dragTargetEventElement=r(e.target)},e.prototype.onDragEnd=function(t){this.state.draggingEvent==t&&(this.state.draggingStartTimestamp=null,this.state.draggingEndTimestamp=null,this.state.draggingEvent=null,this.setState(this.state),this._dragTargetEventElement.show())},e.prototype.onEventEndDragStart=function(t){if(this.state.endDraggingEvent||this.state.draggingEvent)throw Error("Already dragging an event...");this.state.endDraggingEvent=t,this.setState(this.state)},e.prototype.onEventEndDragEnd=function(t){this.state.endDraggingEvent==t&&(this.state.draggingStartTimestamp=null,this.state.draggingEndTimestamp=null,this.state.endDraggingEvent=null,this.setState(this.state))},e.prototype.onDragOver=function(t,e,n){if(e==-1&&(e=1*n.target.dataset.index),this.state.draggingEvent){this._dragTargetEventElement.hide();var a=this.computeTimestamp(t,e),i=Math.max(0,this.state.draggingEvent.durationSecs-v),r=a+1e3*i;this.state.draggingStartTimestamp==a&&this.state.draggingEndTimestamp==r||(this.state.draggingStartTimestamp=a,this.state.draggingEndTimestamp=r,this.setState(this.state))}else{if(!this.state.endDraggingEvent)return;var a=this.computeTimestamp(t,e);this.state.draggingStartTimestamp==this.state.endDraggingEvent.startTime&&this.state.draggingEndTimestamp==a||(this.state.draggingStartTimestamp=this.state.endDraggingEvent.startTime,this.state.draggingEndTimestamp=a,this.setState(this.state))}n&&n.preventDefault()},e.prototype.getCurrentTagToken=function(){return this.state.selectedTag?[{label:this.state.selectedTag.name,value:this.state.selectedTag.id}]:[]},e.prototype.changeCurrentTagToken=function(t){t.length?this.state.selectedTag=this.props.tagsById[t[0].value]:this.state.selectedTag=null,this.resort()},e.prototype.getAllTagNames=function(){var t=this,e=[];return Object.keys(this.props.tagsById).forEach(function(n){var a=t.props.tagsById[+n];e.push({label:a.name,value:a.id})}),e},e.prototype.renderTagSelector=function(){return o.createElement("div",{className:"tag-selector-container"},o.createElement("div",{className:"tag-selector-label"},"Filter Tag:"),o.createElement(l.TokenizerComponent,{onChange:this.changeCurrentTagToken.bind(this),initialValues:this.getCurrentTagToken(),possibleTokens:this.getAllTagNames(),tokenLimit:1}))},e.prototype.changeCellHeight=function(t){this.state.cellHeight=t.target.value,this.resort()},e.prototype.renderCellSizeSlider=function(){if(!this.props.simpleOptions)return o.createElement("div",{className:"cell-size-slider"},o.createElement("input",{type:"range",min:"20",max:"100",value:this.state.cellHeight,onChange:this.changeCellHeight.bind(this)}))},e.prototype.changeViewType=function(t){if(this.state.viewType!=t){var e;if(this.state.viewType==a.week&&t==a.day){var n=s(this.state.startDayTimestamp),i=s();i.unix()-n.unix()>0&&n.add(1,"week").unix()-i.unix()>0&&(this.state.startDayTimestamp=this.computeTodayStartTime(t)),c.browserHistory.push("/cal/day")}else{if(this.state.viewType!=a.day||t!=a.week)throw Error("Unknown view type transition");e=this.computeClosestMonday(s(this.state.startDayTimestamp)),this.state.startDayTimestamp=1e3*e.unix(),c.browserHistory.push("/cal/week")}this.state.viewType=t,this.resort()}},e.prototype.renderViewChoice=function(t){var e="view-type-choice";t==this.state.viewType&&(e+=" -selected");var n={};return n[a.day]="Day",n[a.week]="Week",o.createElement("div",{className:e,key:t,onClick:this.changeViewType.bind(this,t)},n[t])},e.prototype.renderChangeViewType=function(){if(!this.props.simpleOptions)return o.createElement("div",{className:"view-type-selector"},this.renderViewChoice(a.week),this.renderViewChoice(a.day))},e.prototype.changePage=function(t){this.state.viewType==a.week&&(t*=7),0==t?this.state.startDayTimestamp=this.computeTodayStartTime(this.state.viewType):this.state.startDayTimestamp=1e3*s(this.state.startDayTimestamp).add(t,"days").unix(),this.resort()},e.prototype.renderPagination=function(){return o.createElement("div",{className:"pagination-container"},o.createElement("div",{className:"pagination-option",onClick:this.changePage.bind(this,-1)},"Previous"),o.createElement("div",{className:"pagination-option",onClick:this.changePage.bind(this,1)},"Next"),o.createElement("div",{className:"pagination-option",onClick:this.changePage.bind(this,0)},"Today"))},e.prototype.renderOptions=function(){return o.createElement("div",{className:"options"},this.renderCellSizeSlider(),this.renderTagSelector(),this.renderChangeViewType(),this.renderPagination())},e.prototype.renderCells=function(t){for(var e=this,n=function(n){var a=""+n,i={height:e.state.cellHeight+"px"},r=e.computeTimestamp(t,n),c="";if(e.state.draggingStartTimestamp&&e.state.draggingEndTimestamp){var d=e.state.draggingStartTimestamp,l=e.state.draggingEndTimestamp;l<d&&(d=e.state.draggingEndTimestamp,l=e.state.draggingStartTimestamp),r>=d&&r<l+1e3*v&&(c="-selected")}if("times"==t){var p="";return n%(2*v)==0&&(p=s(e.state.startDayTimestamp).add(n,"seconds").format("h:mm a")),o.createElement("tr",{key:a,style:i},o.createElement("td",null,p))}return o.createElement("tr",{key:a,style:i},o.createElement("td",{className:c,"data-day":t,"data-index":n,onDrop:e.onDrop.bind(e,t,n)}," "))},a=0,i=[];a<86400;a+=v)i.push(n(a));return o.createElement("table",{cellPadding:"0",cellSpacing:"0",onMouseDown:this.columnMouseDown.bind(this,t),onMouseOver:h.debounce(this.columnMouseOver.bind(this,t),50),onMouseUp:this.columnMouseUp.bind(this,t),onDragOver:this.onDragOver.bind(this,t,-1)},o.createElement("tbody",null,i))},e.prototype.renderCurrentTimeCursor=function(t){var e=864e5,n=this.state.startDayTimestamp+t*e,a=1e3*s().unix();if(a>=n&&a<n+e){var i=(a-n)/e;i*=this.state.cellHeight*(86400/v),i-=2;var r={top:i+"px"};return o.createElement("div",{className:"current-time-cursor",style:r,"data-top":i,onDrop:this.onDropPassThrough.bind(this),onDragOver:this.onDragOverPassThrough.bind(this)})}},e.prototype.renderColumn=function(t,e,n){var a=this,i=g[t],r="column-container";return n&&(r+=" single-day"),o.createElement("div",{key:i,className:r},this.renderCells(i),this.renderCurrentTimeCursor(t),e.map(function(e){var n=a.state.eventToRenderingInfo[a.getEventKey(e,t)],i=n.columnWidth;n.extraCols&&(i+=n.extraCols);var r=100/i*(1+n.extraCols),s=r*n.index,c={height:n.height+"px",maxHeight:n.height+"px",top:n.top+"px",marginLeft:s+"%",width:r+"%"},d=a.props.eventsById[e];return o.createElement("div",{className:"rendered-event-container",key:e,style:c,onDrop:a.onDropPassThrough.bind(a),onDragOver:a.onDragOverPassThrough.bind(a)},o.createElement("div",{className:"rendered-event card",draggable:!0,onDragStart:a.onDragStart.bind(a,d),onDragEnd:a.onDragEnd.bind(a,d),onDoubleClick:a.onDoubleClick.bind(a,d)},o.createElement(p.EventComponent,{event:d,tagsById:a.props.tagsById})),o.createElement("div",{className:"draggable-event-end",draggable:!0,onDragStart:a.onEventEndDragStart.bind(a,d),onDragEnd:a.onEventEndDragEnd.bind(a,d)}))}))},e.prototype.renderWeekViewColumns=function(){var t=this;return o.createElement("div",{className:"full-column-container"},o.createElement("div",{className:"header-and-content-container"},o.createElement("div",{className:"column-header-container"},o.createElement("div",{className:"column-header -times"},"Time"),g.map(function(e,n){var a=s(t.state.startDayTimestamp).add(n,"days");return o.createElement("div",{key:e,className:"column-header"},a.format("ddd M/D"))})),o.createElement("div",{className:"all-columns-container"},o.createElement("div",{className:"column-container -times"},this.renderCells("times")),[0,1,2,3,4,5,6].map(function(e,n){return t.renderColumn(e,t.state.columns[n])}))))},e.prototype.renderTodayString=function(){return s(this.state.startDayTimestamp).format("dddd M/D")},e.prototype.renderDayViewColumns=function(){var t=this;return o.createElement("div",{className:"full-column-container"},o.createElement("div",{className:"header-and-content-container"},o.createElement("div",{className:"column-header-container"},o.createElement("div",{className:"column-header -times"},"Time"),o.createElement("div",{className:"column-header single-day"},this.renderTodayString())),o.createElement("div",{className:"all-columns-container"},o.createElement("div",{className:"column-container -times"},this.renderCells("times")),[0].map(function(e,n){return t.renderColumn(e,t.state.columns[n],!0)}))))},e.prototype.renderColumns=function(){return this.state.viewType==a.week?this.renderWeekViewColumns():this.state.viewType==a.day?this.renderDayViewColumns():void 0},e.prototype.clearEditingEvent=function(){this.state.editingEvent=null,this.setState(this.state)},e.prototype.renderEditingEvent=function(){if(this.state.editingEvent)return o.createElement(u.ModalComponent,{cancelFunc:this.clearEditingEvent.bind(this)},o.createElement(d.EditEventComponent,{meUser:this.props.meUser,event:this.state.editingEvent,eventsById:this.props.eventsById,tagsById:this.props.tagsById,createMode:!1,tasksById:this.props.tasksById,createEvent:function(t){},updateEvent:this.props.updateEvent,deleteEvent:this.props.deleteEvent}))},e.prototype.closeCreateEvent=function(){this.state.showCreate=!1,this.state.createEventTimestamp=null,this.state.createEventDurationSecs=null,this.state.createEventTask=null,this.setState(this.state)},e.prototype.createEvent=function(t){this.closeCreateEvent(),this.props.createEvent(t)},e.prototype.renderCreateEvent=function(){if(this.state.showCreate){var t=[];this.state.selectedTag&&t.push(this.state.selectedTag.id);var e=[];if(this.state.createEventTask){e.push(this.state.createEventTask.id);for(var n=0,a=this.state.createEventTask.tagIds;n<a.length;n++){var i=a[n];t.length&&i==t[0]||t.push(i)}}return o.createElement(u.ModalComponent,{cancelFunc:this.closeCreateEvent.bind(this)},o.createElement(d.EditEventComponent,{meUser:this.props.meUser,tagsById:this.props.tagsById,createMode:!0,eventsById:this.props.eventsById,tasksById:this.props.tasksById,initialCreationTime:this.state.createEventTimestamp,initialDurationSecs:this.state.createEventDurationSecs,initialTags:t,initialTasks:e,createEvent:this.createEvent.bind(this),updateEvent:function(t){},deleteEvent:function(t){}}))}},e.prototype.render=function(){return o.createElement("div",{className:"calendar"},this.renderOptions(),this.renderColumns(),this.renderEditingEvent(),this.renderCreateEvent())},e}(o.Component);e.CalendarComponent=k},function(t,e,n){"use strict";var a=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(1),r=n(0),s=n(2),o=function(t){function e(e){var n=t.call(this,e)||this,a=null;return a=e.createMode?n._getEmptyEvent(e.meUser,e.initialCreationTime,e.initialDurationSecs,e.initialTags,e.initialTasks):e.event,n.state={event:a,startNow:!1,startAfterLast:!1,endNow:!1,submitted:!1},n}return a(e,t),e.prototype.componentWillReceiveProps=function(t){var e=t.event;if(t.createMode){var n=this._getEmptyEvent(t.meUser,t.initialCreationTime,t.initialDurationSecs,t.initialTags,t.initialTasks);this.state&&!this.state.submitted&&(null==t.initialCreationTime&&(n.startTime=this.state.event.startTime),null==t.initialDurationSecs&&(n.durationSecs=this.state.event.durationSecs),t.initialTags&&t.initialTags.length||(n.tagIds=this.state.event.tagIds),t.initialTasks&&t.initialTasks.length||(n.taskIds=this.state.event.taskIds),n.name=this.state.event.name),e=n}this.state.event=e,this.setState(this.state)},e.prototype._getEmptyEvent=function(t,e,n,a,i){return{id:0,name:"",authorId:t.id,ownerId:t.id,tagIds:a?a:[],startTime:e?e:0,durationSecs:n?n:900,taskIds:i?i:[]}},e.prototype.toggleStartNow=function(){this.state.startNow=!this.state.startNow,this.state.startNow&&(this.state.startAfterLast=!1),this.setState(this.state)},e.prototype.toggleStartAfterLast=function(){this.state.startAfterLast=!this.state.startAfterLast,this.state.startAfterLast&&(this.state.startNow=!1),this.setState(this.state)},e.prototype.toggleEndNow=function(){this.state.endNow=!this.state.endNow,this.setState(this.state)},e.prototype.submitForm=function(t){var e=1e3*i().unix();if(this.state.startNow){var n=this.state.event.startTime+1e3*this.state.event.durationSecs;this.state.event.startTime=e,this.state.event.durationSecs=Math.floor((n-e)/1e3)}else if(this.state.startAfterLast){for(var a=0,r=0,s=Object.keys(this.props.eventsById);r<s.length;r++){var o=s[r],c=this.props.eventsById[o],d=c.startTime+1e3*c.durationSecs;d>a&&d<=this.state.event.startTime&&(a=d)}e-a>864e5&&(a=e),this.state.event.startTime=a}if(this.state.endNow&&e>this.state.event.startTime&&(this.state.event.durationSecs=Math.floor((e-this.state.event.startTime)/1e3)),this.state.event.name.trim().length||(this.state.event.name=this.autoFillName()),"save"==t)this.props.updateEvent(this.state.event);else if("delete"==t)this.props.deleteEvent(this.state.event);else{if("create"!=t)throw Error("Unknown submit type!");this.props.createEvent(this.state.event)}this.state.submitted=!0,this.setState(this.state)},e.prototype.autoFillName=function(){var t=this.state.event;if(1==t.taskIds.length)return"Working on T"+t.taskIds[0];if(t.tagIds.length>0){var e=this.getCurrentTags();if(2==t.tagIds.length)return e[0].label+" & "+e[1].label;if(1==t.tagIds.length)return""+e[0].label}return""},e.prototype.onKeyDownCreate=function(t){"Enter"==t.key&&this.props.createMode&&this.submitForm("create")},e.prototype.updateAttr=function(t,e){this.state.event[t]=e.target.value,this.setState(this.state)},e.prototype.getCurrentTags=function(){var t=this,e=[];return this.state.event.tagIds.forEach(function(n){var a=t.props.tagsById[n];e.push({label:a.name,value:a.id})}),e},e.prototype.getAllTagNames=function(){var t=this,e=[];return Object.keys(this.props.tagsById).forEach(function(n){var a=t.props.tagsById[+n];e.push({label:a.name,value:a.id})}),e},e.prototype.retrieveTagNames=function(t){this.state.event.tagIds=t.map(function(t){return t.value}),this.setState(this.state)},e.prototype.getCurrentTasks=function(){var t=this;return this.state.event.taskIds.map(function(e){var n=t.props.tasksById[e];return{label:"T"+e,subtext:n.title,value:e}})},e.prototype.getAllTaskNames=function(){var t=[];for(var e in this.props.tasksById){var n=this.props.tasksById[e];t.push({label:"T"+e,subtext:n.title,value:e})}return t},e.prototype.retrieveTaskNames=function(t){for(var e={},n=0,a=this.state.event.taskIds;n<a.length;n++){var i=a[n];e[i]=!0}var r=[];this.state.event.taskIds=t.map(function(t){return e.hasOwnProperty(t.value)||r.push(t.value),t.value});for(var s={},o=0,c=this.state.event.tagIds;o<c.length;o++){var d=c[o];s[d]=!0}for(var l=0,p=r;l<p.length;l++)for(var i=p[l],u=0,h=this.props.tasksById[i].tagIds;u<h.length;u++){var d=h[u];s.hasOwnProperty(d+"")||this.state.event.tagIds.push(d)}this.setState(this.state)},e.prototype.renderFormTitle=function(){return this.props.createMode?r.createElement("h3",null,"Create Event"):r.createElement("h3",null,"Editing E",this.state.event.id)},e.prototype.renderButtons=function(){return this.props.createMode?r.createElement("div",{className:"edit-event-button-container"},r.createElement("input",{type:"button",value:"create",onClick:this.submitForm.bind(this,"create")})):r.createElement("div",{className:"edit-event-button-container"},r.createElement("input",{type:"button",value:"delete",onClick:this.submitForm.bind(this,"delete")}),r.createElement("input",{type:"button",value:"save",onClick:this.submitForm.bind(this,"save")}))},e.prototype.renderForm=function(){return r.createElement("div",null,r.createElement("div",{className:"name-container"},r.createElement("label",{htmlFor:"name"},"Name: "),r.createElement("input",{id:"event-name",type:"text",name:"name",value:this.state.event.name,onKeyDown:this.onKeyDownCreate.bind(this),onChange:this.updateAttr.bind(this,"name")})),r.createElement("div",{className:"task-tokenizer-container"},r.createElement("label",null,"Tasks:"),r.createElement(s.TokenizerComponent,{onChange:this.retrieveTaskNames.bind(this),initialValues:this.getCurrentTasks(),possibleTokens:this.getAllTaskNames()})),r.createElement("div",{className:"tag-tokenizer-container"},r.createElement("label",null,"Tags:"),r.createElement(s.TokenizerComponent,{onChange:this.retrieveTagNames.bind(this),initialValues:this.getCurrentTags(),possibleTokens:this.getAllTagNames()})),r.createElement("div",{className:"start-now checkbox-container"},r.createElement("label",{onClick:this.toggleStartNow.bind(this)},"Start Now?"),r.createElement("input",{type:"checkbox",onChange:this.toggleStartNow.bind(this),checked:this.state.startNow})),r.createElement("div",{className:"start-now checkbox-container"},r.createElement("label",{onClick:this.toggleStartAfterLast.bind(this)},"After Last?"),r.createElement("input",{type:"checkbox",onChange:this.toggleStartAfterLast.bind(this),checked:this.state.startAfterLast})),r.createElement("div",{className:"end-now checkbox-container"},r.createElement("label",{onClick:this.toggleEndNow.bind(this)},"End Now?"),r.createElement("input",{type:"checkbox",onChange:this.toggleEndNow.bind(this),checked:this.state.endNow})),this.renderButtons())},e.prototype.render=function(){return r.createElement("div",{className:"edit-event-container"},this.renderFormTitle(),this.renderForm())},e}(r.Component);e.EditEventComponent=o},function(t,e,n){"use strict";var a=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(0),r=n(7),s=n(5),o=function(t){function e(){return t.apply(this,arguments)||this}return a(e,t),e.prototype.selectTask=function(t){var e=new CustomEvent(s.signalDisplayTaskInfo,{detail:t});document.dispatchEvent(e)},e.prototype.renderTag=function(t){var e=this.props.tagsById[t];return i.createElement(r.TagComponent,{tag:e,key:t})},e.prototype.renderName=function(){return i.createElement("div",{className:"name"},this.props.event.name)},e.prototype.renderTags=function(){if(this.props.event.tagIds.length)return this.props.event.tagIds.map(this.renderTag.bind(this))},e.prototype.renderTasks=function(){var t=this;if(this.props.event.taskIds.length)return this.props.event.taskIds.map(function(e){return i.createElement("div",{className:"task-id-card card",key:"T"+e,onClick:t.selectTask.bind(t,e)},"T"+e)})},e.prototype.render=function(){return i.createElement("div",{className:"event-container"},this.renderName(),i.createElement("div",{className:"event-card-container"},this.renderTags(),this.renderTasks()))},e}(i.Component);e.EventComponent=o},function(t,e,n){"use strict";var a=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(0),r=n(16),s=n(23),o=new r;o.tlds(s);var c=function(t){function e(){var e=t.apply(this,arguments)||this;return e.parseCounter=0,e}return a(e,t),e.prototype.getMatches=function(t){return o.match(t)},e.prototype.parseString=function(t){var n=this,a=[];if(""===t)return a;var r=this.getMatches(t);if(!r)return t;var s=0;return r.forEach(function(r,o){r.index>s&&a.push(t.substring(s,r.index));var c={href:r.url,key:"parse"+n.parseCounter+"match"+o};for(var d in n.props.properties){var l=n.props.properties[d];l===e.MATCH&&(l=r.url),c[d]=l}a.push(i.createElement(n.props.component,c,r.text)),s=r.lastIndex}),s<t.length&&a.push(t.substring(s)),1===a.length?a[0]:a},e.prototype.parse=function(t){var e=this,n=t;if("string"==typeof t)n=this.parseString(t);else if(i.isValidElement(t)&&"a"!==t.type&&"button"!==t.type){var a=t;n=i.cloneElement(a,{key:"parse"+ ++this.parseCounter},this.parse(a.props.children))}else t instanceof Array&&(n=t.map(function(t){return e.parse(t)}));return n},e.prototype.render=function(){this.parseCounter=0;var t=this.parse(this.props.children);return i.createElement("span",{className:this.props.className},t)},e}(i.Component);c.MATCH="LINKIFY_MATCH",c.defaultProps={className:"Linkify",component:"a",properties:{}},e.Linkify=c},function(t,e,n){"use strict";var a=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(1),r=n(0),s=n(2),o=function(t){function e(e){var n=t.call(this,e)||this;return e.createMode?n.state={note:n._getEmptyNote(e)}:n.state={note:e.note},n}return a(e,t),e.prototype.componentWillReceiveProps=function(t){t.createMode?this.setState({note:this._getEmptyNote(t)}):this.setState({note:t.note})},e.prototype._getEmptyNote=function(t){var e={id:0,title:"",content:"",authorId:t.meUser.id,creationTime:1e3*i().unix(),tagIds:[]};return e},e.prototype.submitForm=function(t){if("save"==t)this.props.updateNote(this.state.note);else if("delete"==t)this.props.deleteNote(this.state.note);else{if("create"!=t)throw Error("Unknown submit type!");this.props.createNote(this.state.note)}},e.prototype.onKeyDownCreate=function(t){"Enter"==t.key&&this.props.createMode&&this.submitForm("create")},e.prototype.updateAttr=function(t,e){this.state.note[t]=e.target.value,this.setState(this.state)},e.prototype.getCurrentTags=function(){var t=this,e=[];return this.state.note.tagIds.forEach(function(n){var a=t.props.tagsById[n];e.push({label:a.name,value:a.id})}),e},e.prototype.getAllTagNames=function(){var t=this,e=[];return Object.keys(this.props.tagsById).forEach(function(n){var a=t.props.tagsById[+n];e.push({label:a.name,value:a.id})}),e},e.prototype.retrieveTagNames=function(t){this.state.note.tagIds=t.map(function(t){return t.value}),this.setState(this.state)},e.prototype.renderFormTitle=function(){return this.props.createMode?r.createElement("h3",null,"Create Note"):r.createElement("h3",null,"Editing T",this.state.note.id)},e.prototype.renderButtons=function(){return this.props.createMode?r.createElement("div",{className:"edit-note-button-container"},r.createElement("input",{type:"button",value:"create",onClick:this.submitForm.bind(this,"create")})):r.createElement("div",{className:"edit-note-button-container"},r.createElement("input",{type:"button",value:"delete",onClick:this.submitForm.bind(this,"delete")}),r.createElement("input",{type:"button",value:"save",onClick:this.submitForm.bind(this,"save")}))},e.prototype.renderForm=function(){return r.createElement("div",null,r.createElement("div",{className:"title-container"},r.createElement("label",{htmlFor:"title"},"Title: "),r.createElement("input",{type:"text",name:"title",value:this.state.note.title,onKeyDown:this.onKeyDownCreate.bind(this),onChange:this.updateAttr.bind(this,"title")})),r.createElement("div",{className:"content-container"},r.createElement("label",{htmlFor:"content"},"Description: "),r.createElement("textarea",{type:"text",name:"content",value:this.state.note.content,onChange:this.updateAttr.bind(this,"content")})),r.createElement("div",{className:"tag-tokenizer-container"},r.createElement("label",null,"Tags:"),r.createElement(s.TokenizerComponent,{onChange:this.retrieveTagNames.bind(this),initialValues:this.getCurrentTags(),possibleTokens:this.getAllTagNames()})),this.renderButtons())},e.prototype.render=function(){return r.createElement("div",{className:"edit-note-container"},this.renderFormTitle(),this.renderForm())},e}(r.Component);e.EditNoteComponent=o},function(t,e,n){"use strict";var a=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(0),r=n(40),s=n(7),o=function(t){function e(){return t.apply(this,arguments)||this}return a(e,t),e.prototype.renderNoteId=function(){return i.createElement("div",{className:"note-id"},"N",this.props.note.id)},e.prototype.renderTag=function(t){var e=this.props.tagsById[t];return i.createElement(s.TagComponent,{tag:e,key:t})},e.prototype.renderTags=function(){if(this.props.note.tagIds.length)return i.createElement("div",{className:"note-tags-container"},"Tags:",this.props.note.tagIds.map(this.renderTag.bind(this)))},e.prototype.render=function(){return i.createElement("div",{className:"note card"},i.createElement("div",{className:"note-header"},i.createElement("div",{className:"note-title"},this.props.note.title),this.renderNoteId()),i.createElement("div",{className:"note-content"},i.createElement(r,{source:this.props.note.content})),this.renderTags())},e}(i.Component);e.NoteComponent=o},function(t,e,n){"use strict";var a=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(0),r=n(6),s=n(29),o=n(30),c=function(t){function e(e){var n=t.call(this,e)||this;return n.state=n.getState(e),n}return a(e,t),e.prototype.componentWillReceiveProps=function(t){this.setState(this.getState(t))},e.prototype.getState=function(t){return{sortedNotes:this.getSortedNotes(t),creatingNote:!1,editingNote:null}},e.prototype.getSortedNotes=function(t){for(var e=[],n=0,a=Object.keys(t.notesById);n<a.length;n++){var i=a[n];e.push(t.notesById[i])}return e.sort(function(t,e){return e.creationTime-t.creationTime}),e},e.prototype.onDoubleClick=function(t){this.state.editingNote=t,this.setState(this.state)},e.prototype.clearEditingNote=function(){this.state.editingNote=null,this.setState(this.state)},e.prototype.toggleCreateNote=function(){this.state.creatingNote=!this.state.creatingNote,this.setState(this.state)},e.prototype.renderNote=function(t){return i.createElement("div",{key:t.id,className:"note-container",onDoubleClick:this.onDoubleClick.bind(this,t)},i.createElement(o.NoteComponent,{note:t,tagsById:this.props.tagsById}))},e.prototype.renderNotes=function(){return i.createElement("div",{className:"notes-container"},this.state.sortedNotes.map(this.renderNote.bind(this)))},e.prototype.renderEditNote=function(){if(this.state.editingNote)return i.createElement(r.ModalComponent,{cancelFunc:this.clearEditingNote.bind(this)},i.createElement(s.EditNoteComponent,{meUser:this.props.meUser,note:this.state.editingNote,tagsById:this.props.tagsById,createMode:!1,createNote:function(t){},updateNote:this.props.updateNote,deleteNote:this.props.deleteNote}))},e.prototype.renderCreateNote=function(){return this.state.creatingNote?i.createElement(r.ModalComponent,{cancelFunc:this.toggleCreateNote.bind(this)},i.createElement(s.EditNoteComponent,{meUser:this.props.meUser,tagsById:this.props.tagsById,createMode:!0,createNote:this.props.createNote,updateNote:function(t){},deleteNote:function(t){}})):i.createElement("div",{
className:"create-note-button-container"},i.createElement("a",{onClick:this.toggleCreateNote.bind(this)},"Create New"))},e.prototype.render=function(){return i.createElement("div",{className:"note-board"},this.renderCreateNote(),this.renderEditNote(),this.renderNotes())},e}(i.Component);e.NoteBoardComponent=c},function(t,e,n){"use strict";var a=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(1),r=n(0),s=60,o=600,c=1800,d=function(t){function e(e){var n=t.call(this,e)||this;return n.loopId=0,n.state={enabled:!1,lastNotificationTime:i().unix()-o},n}return a(e,t),e.prototype.componentDidMount=function(){this.requestNotificationPermission(),this.beginLoop()},e.prototype.componentWillUnmount=function(){this.loopId&&clearInterval(this.loopId)},e.prototype.requestNotificationPermission=function(){var t=this;Notification.requestPermission().then(function(e){"granted"==e&&(t.state.enabled=!0,t.setState(t.state))})},e.prototype.recordSendingNotification=function(){this.state.lastNotificationTime=i().unix(),this.setState(this.state)},e.prototype.spawnNotification=function(t,e){var n=new Notification("Starter",{body:t});n.onclick=e,setTimeout(n.close.bind(n),5e3)},e.prototype.sendOutOfEventNotification=function(){this.recordSendingNotification(),this.spawnNotification("No event info, not tracking time. :(",function(t){t.target.close(),window.focus()})},e.prototype.timeSinceLastEventSec=function(){var t=1e3*i().unix(),e=Number.MAX_VALUE;return this.props.events.forEach(function(n){if(t>n.startTime){var a=n.startTime+1e3*n.durationSecs;e=t<a?-1:Math.min(e,t-a)}}),e/1e3},e.prototype.beginLoop=function(){var t=this,e=function(){if(t.state.enabled&&!(i().unix()-t.state.lastNotificationTime<o)){var e=t.timeSinceLastEventSec();e<0||Math.random()<e/c&&t.sendOutOfEventNotification()}};this.loopId=setInterval(e.bind(this),1e3*s)},e.prototype.render=function(){return r.createElement("div",null)},e}(r.Component);e.NotifierComponent=d},function(t,e,n){"use strict";var a=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(0),r=function(t){function e(e){var n=t.call(this,e)||this;return n.state={tag:{id:0,name:"",childTagIds:[],ownerId:n.props.meUser.id}},n}return a(e,t),e.prototype.submitForm=function(){this.props.createTag(this.state.tag)},e.prototype.updateName=function(t){this.state.tag.name=t.target.value,this.setState(this.state)},e.prototype.renderForm=function(){return i.createElement("div",null,i.createElement("div",{className:"name-container"},i.createElement("label",{htmlFor:"name"},"Name: "),i.createElement("input",{type:"text",name:"name",value:this.state.tag.name,onChange:this.updateName.bind(this)})),i.createElement("input",{type:"button",value:"create",onClick:this.submitForm.bind(this)}))},e.prototype.render=function(){return i.createElement("div",{className:"create-tag-container"},i.createElement("h3",null,"Create Tag Form:"),this.renderForm())},e}(i.Component);e.CreateTagComponent=r},function(t,e,n){"use strict";var a=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(0),r=n(2),s=function(t){function e(e){var n=t.call(this,e)||this;return n.state={tag:e.tag,tagsById:e.tagsById},n}return a(e,t),e.prototype.componentWillReceiveProps=function(t){this.setState({tag:t.tag,tagsById:t.tagsById})},e.prototype.submitForm=function(t){"save"==t?this.props.updateTag(this.state.tag):this.props.deleteTag(this.state.tag)},e.prototype.updateName=function(t){this.state.tag.name=t.target.value,this.setState(this.state)},e.prototype.getCurrentChildren=function(){var t=this,e=[];return this.state.tag.childTagIds.forEach(function(n){var a=t.state.tagsById[n];e.push({label:a.name,value:a.id})}),e},e.prototype.getAllTagNames=function(){var t=this,e=[];return Object.keys(this.state.tagsById).forEach(function(n){var a=t.state.tagsById[+n];e.push({label:a.name,value:a.id})}),e},e.prototype.retrieveChildNames=function(t){this.state.tag.childTagIds=t.map(function(t){return t.value}),this.setState(this.state)},e.prototype.renderForm=function(){return i.createElement("div",null,i.createElement("div",{className:"name-container"},i.createElement("label",{htmlFor:"name"},"Name: "),i.createElement("input",{type:"text",name:"name",value:this.state.tag.name,onChange:this.updateName.bind(this)})),i.createElement("div",{className:"children-container"},i.createElement("label",{htmlFor:"children"},"Children: "),i.createElement(r.TokenizerComponent,{onChange:this.retrieveChildNames.bind(this),initialValues:this.getCurrentChildren(),possibleTokens:this.getAllTagNames()})),i.createElement("input",{type:"button",value:"delete",onClick:this.submitForm.bind(this,"delete")}),i.createElement("input",{type:"button",value:"save",onClick:this.submitForm.bind(this,"save")}))},e.prototype.render=function(){return i.createElement("div",{className:"edit-tag-container"},i.createElement("h3",null,"Tag Edit Form:"),this.renderForm())},e}(i.Component);e.EditTagComponent=s},function(t,e,n){"use strict";var a=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(1),r=n(0),s=n(4),o=n(7),c=function(t){function e(){var e=t.apply(this,arguments)||this;return e.refreshLoopId=0,e}return a(e,t),e.prototype.componentDidMount=function(){var t=this,e=function(){t.forceUpdate()};this.refreshLoopId=setInterval(e,1e4)},e.prototype.componentWillUnmount=function(){this.refreshLoopId&&clearInterval(this.refreshLoopId)},e.prototype.computeAllRelevantEvents=function(){for(var t=s.getTagAndDescendantsRecursive(this.props.tag.id,this.props.tagsById),e=[],n=0,a=Object.keys(this.props.eventsById);n<a.length;n++)for(var i=a[n],r=this.props.eventsById[i],o=0,c=r.tagIds;o<c.length;o++){var d=c[o];if(t[d]){e.push(r.id);break}}return e},e.prototype.computeStartMonday=function(){var t=i().startOf("week").add(1,"days");return t>i()&&(t=t.subtract(1,"week")),t},e.prototype.computeStartTimes=function(){var t=this.computeStartMonday(),e=[i().startOf("day"),t,i(t).subtract(1,"week"),i().startOf("month")];return e.map(function(t){return 1e3*t.unix()})},e.prototype.computeDurationOfEventBetweenTimestamps=function(t,e,n){if(n<=e)return 0;var a=0,i=t.startTime+1e3*t.durationSecs;if(e<i)if(e>=t.startTime){var r=t.durationSecs-(e-t.startTime)/1e3;a=i<=n?r:r-(i-n)/1e3}else n>t.startTime&&(a=i<=n?t.durationSecs:t.durationSecs-(i-n)/1e3);return a},e.prototype.computeSpentTimes=function(t){for(var e=0,n=0,a=0,r=0,s=this.computeStartTimes(),o=s[0],c=s[1],d=s[2],l=s[3],p=1e3*i().unix(),u=0,h=t;u<h.length;u++){var m=h[u],g=this.props.eventsById[m];r+=this.computeDurationOfEventBetweenTimestamps(g,o,p),n+=this.computeDurationOfEventBetweenTimestamps(g,c,p),a+=this.computeDurationOfEventBetweenTimestamps(g,d,c),e+=this.computeDurationOfEventBetweenTimestamps(g,l,p)}return[r,n,a,e]},e.prototype.renderOptions=function(){return r.createElement("div",{className:"options"},r.createElement("a",{className:"close-button",onClick:this.props.closeCallback},"Close"))},e.prototype.renderHeader=function(){return r.createElement("div",{className:"tag-detail-header"},r.createElement("div",{className:"options-container tag-options-container"},r.createElement("div",{className:"title"},this.props.tag.name),this.renderOptions()))},e.prototype.renderParentTags=function(){var t=this,e=s.getTagParentIds(this.props.tag.id,this.props.tagsById);if(0!=e.length)return r.createElement("div",{className:"related-tag-names"},"Parents:",e.map(function(e){var n=t.props.tagsById[e];return r.createElement(o.TagComponent,{key:n.id,tag:n})}))},e.prototype.renderDescendantTags=function(){var t=this,e=s.getTagAndDescendantsRecursive(this.props.tag.id,this.props.tagsById);if(!(Object.keys(e).length<=1))return r.createElement("div",{className:"related-tag-names"},"Descendants:",Object.keys(e).map(function(e){if(parseInt(e)!=t.props.tag.id){var n=t.props.tagsById[e];return r.createElement(o.TagComponent,{key:n.id,tag:n})}}))},e.prototype.renderDurationWithName=function(t,e){if(e)return r.createElement("div",{className:"tag-time-duration"},t,": ",s.renderDuration(e,!1))},e.prototype.renderTimeInfo=function(){var t=this.computeAllRelevantEvents(),e=this.computeSpentTimes(t),n=e[0],a=e[1],i=e[2],s=e[3];return r.createElement("div",{className:"time-info"},this.renderDurationWithName("Spent today",n),this.renderDurationWithName("Spent this week",a),this.renderDurationWithName("Spent last week",i),this.renderDurationWithName("Spent this month",s))},e.prototype.render=function(){return r.createElement("div",{className:"detail-container"},this.renderHeader(),this.renderParentTags(),this.renderDescendantTags(),this.renderTimeInfo())},e}(r.Component);e.TagDetailComponent=c},function(t,e,n){"use strict";var a=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(0),r=n(34),s=n(33),o=n(6),c=function(t){function e(e){var n=t.call(this,e)||this;return n.state=n.getState(e),n}return a(e,t),e.prototype.componentWillReceiveProps=function(t){this.setState(this.getState(t))},e.prototype.getState=function(t){var e=this.computeTagGraph(t.tagsById),n=e[0],a=e[1];return{tagGraph:n,rootTagIds:a,tagsById:t.tagsById,editingTag:null,creatingTag:!1}},e.prototype.computeTagGraph=function(t){var e={},n={};Object.keys(t).forEach(function(t){n[t]=!0}),Object.keys(t).forEach(function(a){for(var i=t[+a],r=[],s=0,o=i.childTagIds;s<o.length;s++){var c=o[s];r.push(c),n.hasOwnProperty(""+c)&&delete n[c]}e[i.id]=r});var a=[];return Object.keys(n).forEach(function(t){a.push(+t)}),[e,a]},e.prototype.onClick=function(t,e){this.state.editingTag=t,this.setState(this.state),e.preventDefault(),e.stopPropagation()},e.prototype.clearEditingTag=function(){this.state.editingTag=null,this.setState(this.state)},e.prototype.toggleCreatingTag=function(){this.state.creatingTag=!this.state.creatingTag,this.setState(this.state)},e.prototype.renderTagById=function(t){var e=this,n=this.state.tagsById[t],a=function(){if(0!=n.childTagIds.length)return i.createElement("div",{className:"tag-children-container"},n.childTagIds.map(e.renderTagById.bind(e)))};return i.createElement("div",{className:"tag-container",key:n.id},n.name," -"," ",i.createElement("span",{className:"edit-tag-button",onClick:this.onClick.bind(this,n)},"edit"),a())},e.prototype.renderFromRootTagId=function(t){return i.createElement("div",{className:"tags-root-container",key:t},this.renderTagById(t))},e.prototype.renderTags=function(){return i.createElement("div",{className:"tags-container"},this.state.rootTagIds.map(this.renderFromRootTagId.bind(this)))},e.prototype.renderEditingTag=function(){if(this.state.editingTag)return i.createElement(o.ModalComponent,{cancelFunc:this.clearEditingTag.bind(this)},i.createElement(r.EditTagComponent,{tag:this.state.editingTag,tagsById:this.state.tagsById,updateTag:this.props.updateTag,deleteTag:this.props.deleteTag}))},e.prototype.renderCreateTag=function(){return this.state.creatingTag?i.createElement(o.ModalComponent,{cancelFunc:this.toggleCreatingTag.bind(this)},i.createElement(s.CreateTagComponent,{meUser:this.props.meUser,createTag:this.props.createTag,tagsById:this.state.tagsById})):i.createElement("div",{className:"create-tag-button-container"},i.createElement("a",{onClick:this.toggleCreatingTag.bind(this)},"Create New"))},e.prototype.render=function(){return i.createElement("div",{className:"tag-graph"},this.renderTags(),this.renderEditingTag(),this.renderCreateTag())},e}(i.Component);e.TagGraphComponent=c},function(t,e,n){"use strict";var a=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(0),r=n(2),s=function(t){function e(e){var n=t.call(this,e)||this;return e.createMode?n.state={task:n._getEmptyTask(e)}:n.state={task:e.task},n}return a(e,t),e.prototype.componentWillReceiveProps=function(t){t.createMode?this.setState({task:this._getEmptyTask(t)}):this.setState({task:t.task})},e.prototype._getEmptyTask=function(t){var e={id:0,title:"",description:"",authorId:t.meUser.id,ownerId:t.meUser.id,tagIds:[],priority:0,state:0,eventIds:[],expectedDurationSecs:0};return t.initialPriority&&(e.priority=t.initialPriority),t.initialState&&(e.state=t.initialState),t.initialTags&&(e.tagIds=t.initialTags),e},e.prototype.submitForm=function(t){if("save"==t)this.props.updateTask(this.state.task);else if("delete"==t)this.props.deleteTask(this.state.task);else{if("create"!=t)throw Error("Unknown submit type!");this.props.createTask(this.state.task)}},e.prototype.onKeyDownCreate=function(t){"Enter"==t.key&&this.props.createMode&&this.submitForm("create")},e.prototype.updateAttr=function(t,e){this.state.task[t]=e.target.value,this.setState(this.state)},e.prototype.updateEstimate=function(t){var e=t.target.value;this.state.task.expectedDurationSecs=60*e,this.setState(this.state)},e.prototype.getCurrentTags=function(){var t=this,e=[];return this.state.task.tagIds.forEach(function(n){var a=t.props.tagsById[n];e.push({label:a.name,value:a.id})}),e},e.prototype.getAllTagNames=function(){var t=this,e=[];return Object.keys(this.props.tagsById).forEach(function(n){var a=t.props.tagsById[+n];e.push({label:a.name,value:a.id})}),e},e.prototype.retrieveTagNames=function(t){this.state.task.tagIds=t.map(function(t){return t.value}),this.setState(this.state)},e.prototype.renderFormTitle=function(){return this.props.createMode?i.createElement("h3",null,"Create Task"):i.createElement("h3",null,"Editing T",this.state.task.id)},e.prototype.renderButtons=function(){return this.props.createMode?i.createElement("div",{className:"edit-task-button-container"},i.createElement("input",{type:"button",value:"create",onClick:this.submitForm.bind(this,"create")})):i.createElement("div",{className:"edit-task-button-container"},i.createElement("input",{type:"button",value:"delete",onClick:this.submitForm.bind(this,"delete")}),i.createElement("input",{type:"button",value:"save",onClick:this.submitForm.bind(this,"save")}))},e.prototype.renderForm=function(){return i.createElement("div",null,i.createElement("div",{className:"title-container"},i.createElement("label",{htmlFor:"title"},"Title: "),i.createElement("input",{type:"text",name:"title",value:this.state.task.title,onKeyDown:this.onKeyDownCreate.bind(this),onChange:this.updateAttr.bind(this,"title")})),i.createElement("div",{className:"description-container"},i.createElement("label",{htmlFor:"description"},"Description: "),i.createElement("textarea",{type:"text",name:"description",value:this.state.task.description,onChange:this.updateAttr.bind(this,"description")})),i.createElement("div",{className:"estimate-container"},i.createElement("label",{htmlFor:"estimate"},"Estimated Time (minutes): "),i.createElement("input",{type:"number",name:"estimate",value:Math.round(this.state.task.expectedDurationSecs/60),onChange:this.updateEstimate.bind(this)})),i.createElement("div",{className:"priority-selector"},i.createElement("label",{htmlFor:"priority"},"Priority: "),i.createElement("select",{name:"priority",value:this.state.task.priority,onChange:this.updateAttr.bind(this,"priority")},i.createElement("option",{value:"0"},"Unknown"),i.createElement("option",{value:"500"},"Highest"),i.createElement("option",{value:"400"},"High"),i.createElement("option",{value:"300"},"Normal"),i.createElement("option",{value:"200"},"Low"),i.createElement("option",{value:"100"},"Lowest"))),i.createElement("div",{className:"state-selector"},i.createElement("label",{htmlFor:"state"},"Status: "),i.createElement("select",{name:"state",value:this.state.task.state,onChange:this.updateAttr.bind(this,"state")},i.createElement("option",{value:"0"},"Open"),i.createElement("option",{value:"500"},"In Progress"),i.createElement("option",{value:"750"},"Blocked"),i.createElement("option",{value:"1000"},"Closed"))),i.createElement("div",{className:"tag-tokenizer-container"},i.createElement("label",null,"Tags:"),i.createElement(r.TokenizerComponent,{onChange:this.retrieveTagNames.bind(this),initialValues:this.getCurrentTags(),possibleTokens:this.getAllTagNames()})),this.renderButtons())},e.prototype.render=function(){return i.createElement("div",{className:"edit-task-container"},this.renderFormTitle(),this.renderForm())},e}(i.Component);e.EditTaskComponent=s},function(t,e,n){"use strict";var a=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(0),r=n(1),s=n(10),o=n(7),c=n(4),d=function(t){function e(){return t.apply(this,arguments)||this}return a(e,t),e.prototype.renderTaskId=function(){return i.createElement("div",{className:"task-id"},"T",this.props.task.id)},e.prototype.renderPriority=function(){var t="task-color -p"+this.props.task.priority;return i.createElement("div",{className:t})},e.prototype.renderState=function(){if(this.props.viewType!=s.TaskBoardViewType.status)return i.createElement("div",null)},e.prototype.renderTag=function(t){var e=this.props.tagsById[t];return i.createElement(o.TagComponent,{tag:e,key:t})},e.prototype.renderTags=function(){if(this.props.task.tagIds.length)return i.createElement("div",{className:"task-tags-container"},"Tags:",this.props.task.tagIds.map(this.renderTag.bind(this)))},e.prototype.renderProgress=function(){var t=this,e=1e3*r().unix(),n=0;this.props.task.eventIds.forEach(function(a){var i=t.props.eventsById[a];i.startTime>e||(n+=Math.min((e-i.startTime)/1e3,i.durationSecs))});var a=n/this.props.task.expectedDurationSecs;a=Math.round(100*a);var s="percentage";return a>100?s+=" -bad":a>0&&(s+=" -good"),i.createElement("div",{className:"progress-container"},"Progress: ",i.createElement("span",{className:s},a,"%"))},e.prototype.renderEstimate=function(){if(this.props.task.expectedDurationSecs)return i.createElement("div",{className:"estimate-container"},"Est: ",c.renderDuration(this.props.task.expectedDurationSecs,!0),this.renderProgress())},e.prototype.render=function(){return i.createElement("div",{className:"task card"},i.createElement("div",{className:"task-columns"},this.renderPriority(),this.renderState(),i.createElement("div",{className:"main-column"},this.renderTaskId(),i.createElement("div",{className:"task-title"},this.props.task.title),this.renderTags(),this.renderEstimate())))},e}(i.Component);e.TaskComponent=d},function(t,e,n){"use strict";var a=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(0),r=n(1),s=n(11),o=n(28),c=n(4),d=function(t){function e(){var e=t.apply(this,arguments)||this;return e.refreshLoopId=0,e}return a(e,t),e.prototype.componentDidMount=function(){var t=this,e=function(){t.forceUpdate()};this.refreshLoopId=setInterval(e,1e4)},e.prototype.componentWillUnmount=function(){this.refreshLoopId&&clearInterval(this.refreshLoopId)},e.prototype.computeTotalTimeScheduled=function(){var t=this,e=0;return this.props.task.eventIds.forEach(function(n){var a=t.props.eventsById[n];e+=a.durationSecs}),e},e.prototype.computeTotalTimeSpent=function(){var t=this,e=1e3*r().unix(),n=0;return this.props.task.eventIds.forEach(function(a){var i=t.props.eventsById[a];i.startTime>e||(n+=Math.min((e-i.startTime)/1e3,i.durationSecs))}),n},e.prototype.renderOptions=function(){return i.createElement("div",{className:"options"},i.createElement("a",{className:"edit-button",onClick:this.props.editCallback},"Edit"),i.createElement("a",{className:"close-button",onClick:this.props.closeCallback},"Close"))},e.prototype.renderHeader=function(){return i.createElement("div",{className:"task-detail-header"},i.createElement("div",{className:"options-container"},"T",this.props.task.id,this.renderOptions()),i.createElement("div",{className:"title"},this.props.task.title))},e.prototype.renderDescription=function(){var t=this.props.task.description.split("\n");return i.createElement(o.Linkify,{className:"task-description"},t.map(function(e,n){return i.createElement("span",{key:n},e,n<t.length-1?i.createElement("br",null):"")}))},e.prototype.renderCurrentStatus=function(){var t=this,e="";s.priorityNameList.forEach(function(n){var a=n[0],i=n[1];t.props.task.priority==i&&(e=a)});var n="";return s.stateNameList.forEach(function(e){var a=e[0],i=e[1];t.props.task.state==i&&(n=a)}),i.createElement("div",{className:"task-status"},i.createElement("div",{className:"info-container"},i.createElement("div",{className:"task-color -p"+this.props.task.priority}),i.createElement("div",null,e)),i.createElement("div",{className:"info-container"},i.createElement("div",{className:"task-color -s"+this.props.task.state}),i.createElement("div",null,n)))},e.prototype.renderEstimatedTime=function(){var t=this.props.task.expectedDurationSecs;if(0!=t)return i.createElement("div",{className:"time-estimate"},"Estimated: ",c.renderDuration(t,!1))},e.prototype.renderProgress=function(t){if(t&&this.props.task.expectedDurationSecs){var e=Math.round(t/this.props.task.expectedDurationSecs*100);return i.createElement("div",{className:"progress"},"Estimated Time Spent: ",e,"%")}},e.prototype.renderTimeInfo=function(){var t=this.computeTotalTimeScheduled(),e=this.computeTotalTimeSpent();return 0==t?i.createElement("div",{className:"time-info"},this.renderEstimatedTime()):t==e?i.createElement("div",{className:"time-info"},this.renderEstimatedTime(),"Scheduled and Spent: ",c.renderDuration(t,!1),this.renderProgress(e)):i.createElement("div",{className:"time-info"},this.renderEstimatedTime(),"Scheduled: ",c.renderDuration(t,!1),i.createElement("br",null),"Spent: ",c.renderDuration(e,!1),this.renderProgress(e))},e.prototype.render=function(){return i.createElement("div",{className:"detail-container"},this.renderHeader(),this.renderDescription(),this.renderCurrentStatus(),this.renderTimeInfo())},e}(i.Component);e.TaskDetailComponent=d},function(t,e){t.exports=reactMarkdown},function(module,exports,__webpack_require__){"use strict";function getCookie(t){var e="";if(document.cookie&&""!=document.cookie)for(var n=document.cookie.split(";"),a=0;a<n.length;a++){var i=jQuery.trim(n[a]);if(i.substring(0,t.length+1)==t+"="){e=decodeURIComponent(i.substring(t.length+1));break}}return e}function csrfSafeMethod(t){return/^(GET|HEAD|OPTIONS|TRACE)$/.test(t)}var __assign=this&&this.__assign||Object.assign||function(t){for(var e,n=1,a=arguments.length;n<a;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t};__webpack_require__(12);var React=__webpack_require__(0),ReactDOM=__webpack_require__(13),jQuery=__webpack_require__(3),app_1=__webpack_require__(9),AppRenderer=function(){function t(t){ReactDOM.render(React.createElement(app_1.App,__assign({},t)),document.getElementById("render-target"))}return t}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=AppRenderer;var csrfToken=getCookie("csrftoken");jQuery.ajaxSetup({beforeSend:function(t,e){csrfSafeMethod(e.type)||this.crossDomain||t.setRequestHeader("X-CSRFToken",csrfToken)}}),eval("window.AppRenderer = AppRenderer;")}]);